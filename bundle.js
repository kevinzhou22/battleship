/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./src/reset.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/reset.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}", "",{"version":3,"sources":["webpack://./src/reset.css"],"names":[],"mappings":"AAAA;;;CAGC;;AAED;;;;;;;;;;;;;CAaC,SAAS;CACT,UAAU;CACV,SAAS;CACT,eAAe;CACf,aAAa;CACb,wBAAwB;AACzB;AACA,gDAAgD;AAChD;;CAEC,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;CACC,gBAAgB;AACjB;AACA;CACC,YAAY;AACb;AACA;;CAEC,WAAW;CACX,aAAa;AACd;AACA;CACC,yBAAyB;CACzB,iBAAiB;AAClB","sourcesContent":["/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/style.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "html {\n  font-size: 10px;\n}\n\n:root {\n  --off-white: #efefef;\n  --background-blue: #000240;\n}\n\n.root {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--background-blue);\n  color: var(--off-white);\n  min-height: 100vh;\n  box-sizing: bor;\n  padding: 3rem 3rem;\n}\n\nheader {\n  font-size: 3.5rem;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\nheader .new-game {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n.information {\n  background-color: rgb(200, 200,200);\n  color: black;\n  padding: 2.5rem 3.5rem;\n  margin-top: 5rem;\n  border-radius: 1.5rem;\n  font-size: 2rem;\n  font-weight: 500;\n}\n\n.main-game-wrapper {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 4rem 2rem;\n}\n\n.main-game-wrapper h2 {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 1rem;\n}\n\n.player-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n  margin-bottom: 5rem;\n}\n\n.computer-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n}\n\n.grid {\n  display: inline-grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 0.2rem;\n}\n\n.grid .cell {\n  width: 5rem;\n  height: 5rem;\n  border-radius: 8%;\n  box-sizing: border-box;\n  border: 1px solid white;\n}\n\n.player-section-wrapper .options {\n  margin-top: 2rem;\n}\n\n.player-section-wrapper .options button {\n  margin-top: 1rem;\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n/* Ship Placement Mode */\n.cell.already-placed {\n  background-color:rgb(180, 180,180)\n}\n\n.cell.invalid-placement {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n\n.cell.player-selection {\n  background-color: rgba(180, 180,180, 0.7)\n}\n\n/* Game Mode */\n\n.cell {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.cell.hit::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: red;\n}\n\n.cell.missed::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: white;\n}\n\n.cell.targeting {\n  background-color: #00693e;\n}\n\n.cell.invalid-targeting {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n", "",{"version":3,"sources":["webpack://./src/style.css"],"names":[],"mappings":"AAAA;EACE,eAAe;AACjB;;AAEA;EACE,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;EACE,mCAAmC;EACnC,wCAAwC;EACxC,uBAAuB;EACvB,iBAAiB;EACjB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,iBAAiB;EACjB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,mCAAmC;EACnC,kCAAkC;EAClC,YAAY;EACZ,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;EACpB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,mCAAmC;EACnC,YAAY;EACZ,sBAAsB;EACtB,gBAAgB;EAChB,qBAAqB;EACrB,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,uBAAuB;EACvB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,oBAAoB;EACpB,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;EAChB,mCAAmC;EACnC,kCAAkC;EAClC,YAAY;EACZ,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;EACpB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA,wBAAwB;AACxB;EACE;AACF;;AAEA;EACE,sCAAsC;AACxC;;AAEA;EACE;AACF;;AAEA,cAAc;;AAEd;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,aAAa;EACb,kBAAkB;EAClB,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,aAAa;EACb,kBAAkB;EAClB,uBAAuB;AACzB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,sCAAsC;AACxC","sourcesContent":["html {\n  font-size: 10px;\n}\n\n:root {\n  --off-white: #efefef;\n  --background-blue: #000240;\n}\n\n.root {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--background-blue);\n  color: var(--off-white);\n  min-height: 100vh;\n  box-sizing: bor;\n  padding: 3rem 3rem;\n}\n\nheader {\n  font-size: 3.5rem;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\nheader .new-game {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n.information {\n  background-color: rgb(200, 200,200);\n  color: black;\n  padding: 2.5rem 3.5rem;\n  margin-top: 5rem;\n  border-radius: 1.5rem;\n  font-size: 2rem;\n  font-weight: 500;\n}\n\n.main-game-wrapper {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 4rem 2rem;\n}\n\n.main-game-wrapper h2 {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 1rem;\n}\n\n.player-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n  margin-bottom: 5rem;\n}\n\n.computer-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n}\n\n.grid {\n  display: inline-grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 0.2rem;\n}\n\n.grid .cell {\n  width: 5rem;\n  height: 5rem;\n  border-radius: 8%;\n  box-sizing: border-box;\n  border: 1px solid white;\n}\n\n.player-section-wrapper .options {\n  margin-top: 2rem;\n}\n\n.player-section-wrapper .options button {\n  margin-top: 1rem;\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n/* Ship Placement Mode */\n.cell.already-placed {\n  background-color:rgb(180, 180,180)\n}\n\n.cell.invalid-placement {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n\n.cell.player-selection {\n  background-color: rgba(180, 180,180, 0.7)\n}\n\n/* Game Mode */\n\n.cell {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.cell.hit::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: red;\n}\n\n.cell.missed::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: white;\n}\n\n.cell.targeting {\n  background-color: #00693e;\n}\n\n.cell.invalid-targeting {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \************************************************************************/
/***/ ((module) => {



function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

module.exports = function cssWithMappingToString(item) {
  var _item = _slicedToArray(item, 4),
      content = _item[1],
      cssMapping = _item[3];

  if (typeof btoa === 'function') {
    // eslint-disable-next-line no-undef
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
};

/***/ }),

/***/ "./src/reset.css":
/*!***********************!*\
  !*** ./src/reset.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./reset.css */ "./node_modules/css-loader/dist/cjs.js!./src/reset.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./style.css */ "./node_modules/css-loader/dist/cjs.js!./src/style.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _reset_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reset.css */ "./src/reset.css");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./style.css */ "./src/style.css");
/* harmony import */ var _modules_createGame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/createGame */ "./src/modules/createGame.js");
/* harmony import */ var _modules_createDOMController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/createDOMController */ "./src/modules/createDOMController.js");
/* harmony import */ var _modules_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/events */ "./src/modules/events.js");






const DOMController = (0,_modules_createDOMController__WEBPACK_IMPORTED_MODULE_3__.default)((0,_modules_createGame__WEBPACK_IMPORTED_MODULE_2__.default)(_modules_events__WEBPACK_IMPORTED_MODULE_4__.default));
DOMController.initialize();


/***/ }),

/***/ "./src/modules/createDOMController.js":
/*!********************************************!*\
  !*** ./src/modules/createDOMController.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events */ "./src/modules/events.js");


function createDOMController(game) {
  const playerGrid = document.querySelector('.player-section-wrapper .grid');
  const computerGrid = document.querySelector('.computer-section-wrapper .grid');

  /* STATE */

  let placedShips = [];
  let selectionLength = null;
  let selectionOrientation = 'up';
  let isThereAnotherShip = true;
  const shipsToPlace = (function createShipsToPlace() {
    const items = [5, 4, 3, 3, 2];
    let currentIndex = 0;
    const nextShipLength = function nextShipLength() {
      if (currentIndex >= items.length) {
        selectionLength = null;
        isThereAnotherShip = false;
      } else {
        selectionLength = items[currentIndex];
        currentIndex += 1;
      }
    };
    const reset = function reset() {
      isThereAnotherShip = true;
      currentIndex = 0;
      nextShipLength();
    };
    return {
      nextShipLength,
      reset,
    };
  }());

  const setInformation = function setInformation(message) {
    document.querySelector('.information').textContent = message;
  };
  const getCell = function getCell(grid, coordinates) {
    const { x, y } = coordinates;
    const cell = grid.querySelector(`.cell[data-cell-x="${x}"][data-cell-y="${y}"]`);
    if (cell === null) throw new Error('Cell not found');
    return cell;
  };

  let canUserMove = null;

  const removeAllPlacementClasses = function removeAllPlacementClasses() {
    playerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('already-placed');
    });
  };

  /* SELECTION MODE FUNCTIONS */

  const isCellAlreadyPlaced = function isCellAlreadyPlaced(coordinates, alreadyPlaced) {
    let placed = false;
    alreadyPlaced.forEach((ship) => {
      ship.forEach(({ x, y }) => {
        if (x === coordinates.x && y === coordinates.y) {
          placed = true;
        }
      });
    });
    return placed;
  };

  // returns the coordinates for the player's selection
  const getSelection = function getSelection(mouseLocation, orientation, length) {
    let changingAxis;
    let unchangingAxis;
    const coordinatesList = [];
    switch (orientation) {
      case 'up':
        changingAxis = 'y';
        unchangingAxis = 'x';
        break;
      case 'right':
        changingAxis = 'x';
        unchangingAxis = 'y';
        break;
      default:
    }
    for (let i = 0; i < length; i += 1) {
      const coordinates = {
        [changingAxis]: mouseLocation[changingAxis] + i,
        [unchangingAxis]: mouseLocation[unchangingAxis],
      };
      coordinatesList.push(coordinates);
    }
    return coordinatesList;
  };

  const renderCurrentSelection = function renderCurrentSelection(
    mouseLocation,
    orientation,
    length,
  ) {
    const coordinatesList = getSelection(mouseLocation, orientation, length);

    let isValidSelection = true;
    coordinatesList.forEach((coordinates) => {
      if (coordinates.x < 0 || coordinates.y < 0) {
        isValidSelection = false;
      }
      if (coordinates.x > 7 || coordinates.y > 7) {
        isValidSelection = false;
      }
      if (isCellAlreadyPlaced(coordinates, placedShips)) {
        isValidSelection = false;
      }
    });
    if (isValidSelection) {
      coordinatesList.forEach((coordinates) => {
        getCell(playerGrid, coordinates).classList.add('player-selection');
      });
    } else {
      getCell(playerGrid, mouseLocation).classList.add('invalid-placement');
    }
  };

  /* alters the playerGrid to show already placed ships */
  const renderPlacedShips = function renderInSelectMode(alreadyPlaced) {
    alreadyPlaced.forEach((ship) => {
      ship.forEach((coordinates) => {
        const cell = getCell(playerGrid, coordinates);
        cell.classList.add('already-placed');
      });
    });
  };

  const getCellCoordinates = function getCellCoordinates(cell) {
    const x = Number(cell.getAttribute('data-cell-x'));
    const y = Number(cell.getAttribute('data-cell-y'));
    const coordinates = {
      x,
      y,
    };
    return coordinates;
  };

  // adds ship to state
  const onClickOfCellDuringSelection = function onClickOfCellDuringSelection(event) {
    if (!isThereAnotherShip) {
      return;
    }
    const cell = event.target;
    const mouseLocation = getCellCoordinates(cell);
    const coordinatesList = getSelection(mouseLocation, selectionOrientation, selectionLength);
    let isValidSelection = true;
    coordinatesList.forEach((coordinates) => {
      if (coordinates.x < 0 || coordinates.y < 0) {
        isValidSelection = false;
      }
      if (coordinates.x > 7 || coordinates.y > 7) {
        isValidSelection = false;
      }
      if (isCellAlreadyPlaced(coordinates, placedShips)) {
        isValidSelection = false;
      }
    });
    if (isValidSelection) {
      placedShips.push(coordinatesList);
      renderPlacedShips(placedShips);
      shipsToPlace.nextShipLength();
    }
  };

  /* goes through all the cells in the player's grid to remove classes that indicate placed
  ships and selection */
  const removeAllSelectionClasses = function removeAllSelectionClasses() {
    playerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('player-selection');
      cell.classList.remove('invalid-placement');
    });
  };

  const onMouseEnterCellDuringSelection = function onMouseEnterCellDuringSelection(event) {
    if (!isThereAnotherShip) {
      return;
    }
    const cell = event.target;
    const coordinates = getCellCoordinates(cell);
    renderPlacedShips(placedShips);
    renderCurrentSelection(coordinates, selectionOrientation, selectionLength, placedShips);
  };

  const onMouseLeaveCellDuringSelection = function onMouseLeaveCellDuringSelection() {
    removeAllSelectionClasses();
  };

  // toggles orientation
  const onClickOfChangeOrientation = function onClickOfChangeOrientation() {
    if (selectionOrientation === 'up') {
      selectionOrientation = 'right';
    } else {
      selectionOrientation = 'up';
    }
  };

  const onClickOfResetDuringSelection = function onClickOfResetDuringSelection() {
    placedShips = [];
    removeAllPlacementClasses();
    shipsToPlace.reset();
  };

  const removePlayerSelectionEventListeners = function removePlayerSelectionEventListeners() {
    const cells = playerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.removeEventListener('mouseenter', onMouseEnterCellDuringSelection);
      cell.removeEventListener('mouseleave', onMouseLeaveCellDuringSelection);
      cell.removeEventListener('click', onClickOfCellDuringSelection);
    });
  };

  const onClickOfStartDuringSelection = function onClickOfStartDuringSelection() {
    if (isThereAnotherShip) {
      setInformation('All ships must be placed before the game can begin!');
      return;
    }
    setInformation('Let the game begin!');
    removePlayerSelectionEventListeners();
    document.querySelector('.options').style.visibility = 'hidden';
    placedShips.forEach((placedShip) => {
      game.placeShip('user', placedShip);
    });
    startGame(); // eslint-disable-line
  };

  const setUpPlayerSelectionEventListeners = function setUpPlayerSelectionEventListeners() {
    const cells = playerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.addEventListener('mouseenter', onMouseEnterCellDuringSelection);
      cell.addEventListener('mouseleave', onMouseLeaveCellDuringSelection);
      cell.addEventListener('click', onClickOfCellDuringSelection);
    });
  };

  /* GAME MODE FUNCTIONS */

  // removes hit and miss classes from both grids
  const removeAllHitAndMissClasses = function removeAllHitAndMissClasses() {
    playerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('hit');
      cell.classList.remove('missed');
    });
    computerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('hit');
      cell.classList.remove('missed');
    });
  };

  const updateBoardForFiredUponCells = function updateBoardForFiredUponCells(playerName) {
    let hitCoordinates;
    let missedCoordinates;
    let grid;
    if (playerName === 'user') {
      ({ hitCoordinates, missedCoordinates } = game.getBoardState('user'));
      grid = playerGrid;
    } else if (playerName === 'computer') {
      ({ hitCoordinates, missedCoordinates } = game.getBoardState('computer'));
      grid = computerGrid;
    } else {
      throw new Error('Invalid playerName');
    }
    hitCoordinates.forEach((coordinates) => {
      getCell(grid, coordinates).classList.add('hit');
    });
    missedCoordinates.forEach((coordinates) => {
      getCell(grid, coordinates).classList.add('missed');
    });
  };

  const hasCellBeenFiredUpon = function hasCellBeenFiredUpon(coordinates) {
    const { hitCoordinates, missedCoordinates } = game.getBoardState('computer');
    let firedUpon = false;
    hitCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        firedUpon = true;
      }
    });
    missedCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        firedUpon = true;
      }
    });
    return firedUpon;
  };

  const onClickOfCellDuringGame = function onClickOnCellDuringGame(event) {
    if (!canUserMove) {
      return;
    }
    const cell = event.target;
    const coordinates = getCellCoordinates(cell);
    if (hasCellBeenFiredUpon(coordinates)) {
      return;
    }
    game.makeUserMove(coordinates);
    updateBoardForFiredUponCells('computer');
    canUserMove = false;
  };

  const onUserTurnBegins = function onUserTurnBegins() {
    canUserMove = true;
  };

  const onComputerTurnBegins = function onComputerTurnBegins() {
    game.makeComputerMove(Math.random);
    updateBoardForFiredUponCells('user');
  };

  const removeAllTargetingClasses = function removeAllTargetingClasses() {
    computerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('targeting');
      cell.classList.remove('invalid-targeting');
    });
  };

  const onMouseEnterComputerCellDuringGame = function onMouseEnterComputerCellDuringGame(event) {
    const cell = event.target;
    if (hasCellBeenFiredUpon(getCellCoordinates(cell))) {
      cell.classList.add('invalid-targeting');
    } else {
      cell.classList.add('targeting');
    }
  };

  const onMouseLeaveComputerCellDuringGame = function onMouseLeaveComputerCellDuringGame() {
    removeAllTargetingClasses();
  };

  const setUpGameModeEventListeners = function setUpGameModeEventListeners() {
    const cells = computerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.addEventListener('mouseenter', onMouseEnterComputerCellDuringGame);
      cell.addEventListener('mouseleave', onMouseLeaveComputerCellDuringGame);
      cell.addEventListener('click', onClickOfCellDuringGame);
    });

    _events__WEBPACK_IMPORTED_MODULE_0__.default.on('USER_TURN_BEGINS', onUserTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.on('COMPUTER_TURN_BEGINS', onComputerTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.on('PLAYER_HAS_WON', onPlayerHasWon);  // eslint-disable-line
  };

  const removeGameModeEventListeners = function removeGameModeEventListeners() {
    const cells = computerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.removeEventListener('mouseenter', onMouseEnterComputerCellDuringGame);
      cell.removeEventListener('mouseleave', onMouseLeaveComputerCellDuringGame);
      cell.removeEventListener('click', onClickOfCellDuringGame); // eslint-disable-line
    });

    _events__WEBPACK_IMPORTED_MODULE_0__.default.off('USER_TURN_BEGINS', onUserTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.off('COMPUTER_TURN_BEGINS', onComputerTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.off('PLAYER_HAS_WON', onPlayerHasWon); // eslint-disable-line
  };

  const onClickOfNewGame = function onClickOfNewGame() {
    const newGameButton = document.querySelector('header .new-game');
    newGameButton.removeEventListener('click', onClickOfNewGame);
    newGameButton.style.visibility = 'hidden';
    game.resetGame();
    placedShips = [];
    removeAllPlacementClasses();
    removeAllHitAndMissClasses();
    document.querySelector('.options').style.visibility = 'visible';
    shipsToPlace.reset();
    setUpPlayerSelectionEventListeners();
  };

  const onPlayerHasWon = function onPlayerHasWon(eventData) {
    const { winner } = eventData;
    let victorToDisplay;
    if (winner === 'user') {
      victorToDisplay = 'User';
    } else if (winner === 'computer') {
      victorToDisplay = 'Computer';
    } else {
      throw new Error('Unrecognized victor in event data');
    }
    setInformation(`${victorToDisplay} has won the game!`);
    removeGameModeEventListeners();
    removeAllTargetingClasses();
    const newGameButton = document.querySelector('header .new-game');
    newGameButton.style.visibility = 'visible';
    newGameButton.addEventListener('click', onClickOfNewGame);
  };

  const startGame = function startGame() {
    game.generateAndPlaceComputerShips(Math.random);
    setUpGameModeEventListeners();
    game.start();
  };

  /* INITIALIZE */

  const initialize = function initialize() {
    setInformation('Place your ships!');
    for (let i = 7; i >= 0; i -= 1) {
      for (let j = 0; j < 8; j += 1) {
        const playerCell = document.createElement('div');
        playerCell.classList.add('cell');
        playerCell.setAttribute('data-cell-x', String(j));
        playerCell.setAttribute('data-cell-y', String(i));
        playerGrid.appendChild(playerCell);
        const computerCell = document.createElement('div');
        computerCell.classList.add('cell');
        computerCell.setAttribute('data-cell-x', String(j));
        computerCell.setAttribute('data-cell-y', String(i));
        computerGrid.appendChild(computerCell);
      }
    }
    document.querySelector('.change-orientation').addEventListener('click', onClickOfChangeOrientation);
    document.querySelector('.reset').addEventListener('click', onClickOfResetDuringSelection);
    document.querySelector('.start').addEventListener('click', onClickOfStartDuringSelection);
    document.querySelector('header .new-game').style.visibility = 'hidden';
    shipsToPlace.nextShipLength();
    setUpPlayerSelectionEventListeners();
  };

  return {
    initialize,
    renderPlacedShips,
    renderCurrentSelection,
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createDOMController);


/***/ }),

/***/ "./src/modules/createGame.js":
/*!***********************************!*\
  !*** ./src/modules/createGame.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _createGameboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createGameboard */ "./src/modules/createGameboard.js");
/* harmony import */ var _createPlayer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createPlayer */ "./src/modules/createPlayer.js");



const createGame = function createGame(events) {
  const eventsEmitted = {
    USER_TURN_BEGINS: 'USER_TURN_BEGINS',
    COMPUTER_TURN_BEGINS: 'COMPUTER_TURN_BEGINS',
    PLAYER_HAS_WON: 'PLAYER_HAS_WON',
  };

  // initialization
  const xLength = 8;
  const yLength = 8;

  const userPlayer = (0,_createPlayer__WEBPACK_IMPORTED_MODULE_1__.default)('user');
  const computerPlayer = (0,_createPlayer__WEBPACK_IMPORTED_MODULE_1__.default)('computer');

  let currentPlayer = null;

  let userBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);
  let computerBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);

  /* used to resolve the returned promises in awaitUserMove and
  awaitComputerMove  */
  let awaitCallback = null;

  const getCorrespondingBoard = function getCorrespondingBoard(playerName) {
    if (playerName === 'user') return userBoard;
    if (playerName === 'computer') return computerBoard;
    throw new Error('Player does not exist');
  };

  const placeShip = function placeShip(playerName, coordinatesList) {
    const board = getCorrespondingBoard(playerName);
    board.placeShip(coordinatesList);
  };

  const getBoardState = function getBoardState(playerName) {
    const board = getCorrespondingBoard(playerName);
    const placedShips = board.getPlacedShips();
    const hitCoordinates = board.getHitCoordinates();
    const missedCoordinates = board.getMissedCoordinates();
    return {
      placedShips,
      hitCoordinates,
      missedCoordinates,
      xLength,
      yLength,
    };
  };

  /* returns a promise that is resolved with the coordinates of the
  user's move */
  const awaitUserMove = function awaitUserMove() {
    currentPlayer = userPlayer;
    return new Promise((resolve) => {
      awaitCallback = resolve;
      events.emit(eventsEmitted.USER_TURN_BEGINS, null);
    });
  };

  const awaitComputerMove = function awaitComputerMove() {
    currentPlayer = computerPlayer;
    return new Promise((resolve) => {
      awaitCallback = resolve;
      events.emit(eventsEmitted.COMPUTER_TURN_BEGINS, null);
    });
  };

  const makeUserMove = function makeUserMove(coordinates) {
    if (!(currentPlayer === userPlayer)) {
      throw new Error('Not User Turn');
    }
    userPlayer.makeMove(computerBoard, coordinates);
    awaitCallback();
  };

  const makeComputerMove = function makeComputerMove(randomFn) {
    if (!(currentPlayer === computerPlayer)) {
      throw new Error('Not Computer Turn');
    }
    computerPlayer.autoMakeMove(userBoard, randomFn);
    awaitCallback();
  };

  const hasPlayerWon = function hasPlayerWon(playerName) {
    let board;
    if (playerName === 'user') {
      board = computerBoard;
    }
    if (playerName === 'computer') {
      board = userBoard;
    }
    if (board.areAllShipsSunk()) {
      return true;
    }
    return false;
  };

  const declareWinner = function declareWinner(playerName) {
    events.emit(
      eventsEmitted.PLAYER_HAS_WON,
      { winner: playerName },
    );
  };

  const start = async function start() {
    /* eslint-disable no-await-in-loop */
    while (true) {
      currentPlayer = userPlayer;
      await awaitUserMove();
      if (hasPlayerWon('user')) {
        declareWinner('user');
        currentPlayer = null;
        break;
      }
      currentPlayer = computerPlayer;
      await awaitComputerMove();
      if (hasPlayerWon('computer')) {
        declareWinner('computer');
        currentPlayer = null;
        break;
      }
    }
  };

  const resetGame = function resetGame() {
    userBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);
    computerBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);
  };

  const generateShipCoordinates = function generateShipCoordinates(orientation, origin, length) {
    const coordinatesList = [];
    coordinatesList.push({ ...origin });
    let constantVariable;
    let changingVariable;
    if (orientation === 'up') {
      constantVariable = 'x';
      changingVariable = 'y';
    } else if (orientation === 'right') {
      constantVariable = 'y';
      changingVariable = 'x';
    } else {
      throw new RangeError('Invalid orientation');
    }
    for (let i = 1; i < length; i += 1) {
      const newCoordinates = {
        [constantVariable]: origin[constantVariable],
        [changingVariable]: (origin[changingVariable] + i),
      };
      coordinatesList.push(newCoordinates);
    }
    return coordinatesList;
  };
  const generateRandomShipCoordinates = function generateRandomShipCoordinates(
    randomFn,
    playerName,
    length,
  ) {
    let orientation;
    let permittedXLengthForOrigin;
    let permittedYLengthForOrigin;
    const orientationNumber = Math.floor(randomFn() * 2);
    switch (orientationNumber) {
      case 0:
        orientation = 'right';
        permittedXLengthForOrigin = xLength - length + 1;
        permittedYLengthForOrigin = yLength;
        break;
      case 1:
        orientation = 'up';
        permittedXLengthForOrigin = xLength;
        permittedYLengthForOrigin = yLength - length + 1;
        break;
      default:
    }
    const origin = {
      x: Math.floor(randomFn() * permittedXLengthForOrigin),
      y: Math.floor(randomFn() * permittedYLengthForOrigin),
    };
    const ship = generateShipCoordinates(orientation, origin, length);

    const board = getCorrespondingBoard(playerName);

    if (board.areCoordinatesValidForShip(ship)) {
      return ship;
    }
    // try again at generating a new ship if the generated coordinates are not valid
    return generateRandomShipCoordinates(randomFn, playerName, length);
  };

  const generateAndPlaceComputerShips = function generateAndPlaceComputerShips(randomFn) {
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 2));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 3));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 3));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 4));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 5));
  };

  return {
    placeShip,
    getBoardState,
    start,
    makeUserMove,
    makeComputerMove,
    resetGame,
    generateShipCoordinates,
    generateRandomShipCoordinates,
    generateAndPlaceComputerShips,
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createGame);


/***/ }),

/***/ "./src/modules/createGameboard.js":
/*!****************************************!*\
  !*** ./src/modules/createGameboard.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _createShip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createShip */ "./src/modules/createShip.js");


function createGameboard(xLength, yLength) {
  if (!(xLength > 0) || !(yLength > 0)) {
    throw new RangeError('Arguments must be positive');
  }

  const shipsDetails = [];
  const hitCoordinatesList = [];
  const missedCoordinatesList = [];

  const getXLength = function getXLength() {
    return xLength;
  };

  const getYLength = function getYLength() {
    return yLength;
  };

  const verifyCoordinatesAreValid = function verifyCoordinatesAreValid(coordinates) {
    if (!(coordinates.x < xLength && coordinates.y < yLength)) {
      throw new RangeError('Coordinates are invalid');
    }
  };

  const placeShip = function placeShip(coordinatesList) {
    const newShip = (0,_createShip__WEBPACK_IMPORTED_MODULE_0__.default)(coordinatesList.length);
    const coordinatesListCopy = [];

    coordinatesList.forEach((coordinates) => {
      verifyCoordinatesAreValid(coordinates);
      coordinatesListCopy.push({ ...coordinates });
    });

    shipsDetails.push({
      ship: newShip,
      coordinatesList: coordinatesListCopy,
    });
  };

  const receiveAttack = function receiveAttack(coordinates) {
    verifyCoordinatesAreValid(coordinates);
    hitCoordinatesList.forEach((hitCoordinates) => {
      if (coordinates.x === hitCoordinates.x && coordinates.y === hitCoordinates.y) {
        throw new Error('Coordinates previously attacked');
      }
    });

    missedCoordinatesList.forEach((missedCoordinates) => {
      if (coordinates.x === missedCoordinates.x && coordinates.y === missedCoordinates.y) {
        throw new Error('Coordinates previously attacked');
      }
    });
    let hit = false;
    for (let i = 0; i < shipsDetails.length; i += 1) {
      const shipCoordinatesList = shipsDetails[i].coordinatesList;
      for (let j = 0; j < shipCoordinatesList.length; j += 1) {
        const shipCoordinates = shipCoordinatesList[j];
        const doCoordinatesMatch = (
          shipCoordinates.x === coordinates.x
          && shipCoordinates.y === coordinates.y
        );
        if (doCoordinatesMatch) {
          hitCoordinatesList.push({ ...coordinates });
          shipsDetails[i].ship.hit(j);
          hit = true;
        }
      }
    }
    if (!hit) {
      missedCoordinatesList.push({ ...coordinates });
    }
  };

  const getHitCoordinates = function getHitCoordinates() {
    const hitCoordinatesCopy = [];
    hitCoordinatesList.forEach((hitCoordinates) => {
      hitCoordinatesCopy.push({ ...hitCoordinates });
    });

    return hitCoordinatesCopy;
  };

  const getMissedCoordinates = function getMissedCoordinates() {
    const missedCoordinatesCopy = [];
    missedCoordinatesList.forEach((missedCoordinates) => {
      missedCoordinatesCopy.push({ ...missedCoordinates });
    });

    return missedCoordinatesCopy;
  };

  const getPlacedShips = function getPlacedShips() {
    const shipCoordinates = [];
    shipsDetails.forEach(({ coordinatesList }) => {
      const coordinatesListCopy = [];
      coordinatesList.forEach((coordinates) => {
        coordinatesListCopy.push({ ...coordinates });
      });
      shipCoordinates.push(coordinatesListCopy);
    });
    return shipCoordinates;
  };

  const areAllShipsSunk = function areAllShipsSunk() {
    let allSunk = true;
    shipsDetails.forEach((shipDetails) => {
      if (!shipDetails.ship.isSunk()) {
        allSunk = false;
      }
    });
    return allSunk;
  };

  const areCoordinatesValidForShip = function areCoordinatesValidForShip(shipCoordinates) {
    let valid = true;
    shipCoordinates.forEach((coordinates) => {
      shipsDetails.forEach(({ coordinatesList }) => {
        coordinatesList.forEach(({ x, y }) => {
          if (x === coordinates.x && y === coordinates.y) {
            valid = false;
          }
        });
      });
    });
    return valid;
  };

  return {
    getXLength,
    getYLength,
    receiveAttack,
    placeShip,
    getHitCoordinates,
    getMissedCoordinates,
    getPlacedShips,
    areAllShipsSunk,
    areCoordinatesValidForShip,
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createGameboard);


/***/ }),

/***/ "./src/modules/createPlayer.js":
/*!*************************************!*\
  !*** ./src/modules/createPlayer.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const createPlayer = function createPlayer(name) {
  const makeMove = function makeMove(gameBoard, coordinates) {
    gameBoard.receiveAttack(coordinates);
  };

  const getName = function getName() {
    return name;
  };

  const areCoordinatesAlreadyAttacked = function areCoordinatesAlreadyAttacked(
    gameBoard,
    coordinates,
  ) {
    let alreadyAttacked = false;
    const hitCoordinates = gameBoard.getHitCoordinates();
    hitCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        alreadyAttacked = true;
      }
    });
    const missedCoordinates = gameBoard.getMissedCoordinates();
    missedCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        alreadyAttacked = true;
      }
    });
    return alreadyAttacked;
  };

  const autoMakeMove = function autoMakeMove(gameBoard, randomFn) {
    let xValue;
    let yValue;
    do {
      xValue = Math.floor(gameBoard.getXLength() * randomFn());
      yValue = Math.floor(gameBoard.getYLength() * randomFn());
    } while (areCoordinatesAlreadyAttacked(gameBoard, { x: xValue, y: yValue }));

    gameBoard.receiveAttack({ x: xValue, y: yValue });
  };

  return {
    makeMove,
    getName,
    autoMakeMove,
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createPlayer);


/***/ }),

/***/ "./src/modules/createShip.js":
/*!***********************************!*\
  !*** ./src/modules/createShip.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
function createShip(length) {
  if (!(length > 0)) {
    throw new RangeError('Length must be positive');
  }
  const positions = [];
  for (let i = 0; i < length; i += 1) {
    positions.push(false);
  }

  const hit = function hit(position) {
    if (position >= length) {
      throw new RangeError('The argument must be below the Ship length');
    }
    positions[position] = true;
  };

  const isSunk = function isSunk() {
    let isAllHit = true;
    positions.forEach((position) => {
      if (!position) {
        isAllHit = false;
      }
    });

    return isAllHit;
  };

  return {
    hit,
    isSunk,
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createShip);


/***/ }),

/***/ "./src/modules/events.js":
/*!*******************************!*\
  !*** ./src/modules/events.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ events)
/* harmony export */ });
const eventsList = {};

function on(eventName, fn) {
  eventsList[eventName] = eventsList[eventName] || [];
  eventsList[eventName].push(fn);
}

function off(eventName, fn) {
  if (eventsList[eventName]) {
    for (let i = 0; i < eventsList[eventName].length; i += 1) {
      if (eventsList[eventName][i] === fn) {
        eventsList[eventName].splice(i, 1);
        break;
      }
    }
  }
}

function emit(eventName, data) {
  if (eventsList[eventName]) {
    eventsList[eventName].forEach((fn) => {
      fn(data);
    });
  }
}

const events = {
  on,
  off,
  emit,
};




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.js");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3Jlc2V0LmNzcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZXNldC5jc3M/ZWRlMCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3N0eWxlLmNzcz83MTYzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY3JlYXRlRE9NQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY3JlYXRlR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY3JlYXRlR2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9jcmVhdGVQbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2NyZWF0ZVNoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNzSDtBQUM3QjtBQUN6Riw4QkFBOEIsbUZBQTJCLENBQUMsd0dBQXFDO0FBQy9GO0FBQ0EsK29CQUErb0IsY0FBYyxlQUFlLGNBQWMsb0JBQW9CLGtCQUFrQiw2QkFBNkIsR0FBRyxnSkFBZ0osbUJBQW1CLEdBQUcsUUFBUSxtQkFBbUIsR0FBRyxVQUFVLHFCQUFxQixHQUFHLGlCQUFpQixpQkFBaUIsR0FBRywyREFBMkQsZ0JBQWdCLGtCQUFrQixHQUFHLFNBQVMsOEJBQThCLHNCQUFzQixHQUFHLE9BQU8sa0ZBQWtGLE1BQU0saUJBQWlCLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxZQUFZLE1BQU0sWUFBWSxPQUFPLFVBQVUsS0FBSyxLQUFLLFVBQVUsS0FBSyxLQUFLLFlBQVksTUFBTSxLQUFLLFVBQVUsS0FBSyxNQUFNLFVBQVUsVUFBVSxLQUFLLEtBQUssWUFBWSxhQUFhLCtuQkFBK25CLGNBQWMsZUFBZSxjQUFjLG9CQUFvQixrQkFBa0IsNkJBQTZCLEdBQUcsZ0pBQWdKLG1CQUFtQixHQUFHLFFBQVEsbUJBQW1CLEdBQUcsVUFBVSxxQkFBcUIsR0FBRyxpQkFBaUIsaUJBQWlCLEdBQUcsMkRBQTJELGdCQUFnQixrQkFBa0IsR0FBRyxTQUFTLDhCQUE4QixzQkFBc0IsR0FBRyxtQkFBbUI7QUFDM3FGO0FBQ0EsaUVBQWUsdUJBQXVCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQdkM7QUFDc0g7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QUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvQ0FBb0M7QUFDNUM7QUFDQSxLQUFLO0FBQ0wsUUFBUSxvQ0FBb0M7QUFDNUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FB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QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLGtDQUFrQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZCOzs7Ozs7O1VDaEM3QjtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0NyQkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGdDQUFnQyxZQUFZO1dBQzVDO1dBQ0EsRTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHdDQUF3Qyx5Q0FBeUM7V0FDakY7V0FDQTtXQUNBLEU7Ozs7O1dDUEEsd0Y7Ozs7O1dDQUE7V0FDQTtXQUNBO1dBQ0Esc0RBQXNELGtCQUFrQjtXQUN4RTtXQUNBLCtDQUErQyxjQUFjO1dBQzdELEU7Ozs7VUNOQTtVQUNBO1VBQ0E7VUFDQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvIFxcbiAgIHYyLjAgfCAyMDExMDEyNlxcbiAgIExpY2Vuc2U6IG5vbmUgKHB1YmxpYyBkb21haW4pXFxuKi9cXG5cXG5odG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXFxuaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLFxcbmEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSxcXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXFxuc21hbGwsIHN0cmlrZSwgc3Ryb25nLCBzdWIsIHN1cCwgdHQsIHZhcixcXG5iLCB1LCBpLCBjZW50ZXIsXFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcXG5maWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCxcXG50YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCxcXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCwgXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBcXG5tZW51LCBuYXYsIG91dHB1dCwgcnVieSwgc2VjdGlvbiwgc3VtbWFyeSxcXG50aW1lLCBtYXJrLCBhdWRpbywgdmlkZW8ge1xcblxcdG1hcmdpbjogMDtcXG5cXHRwYWRkaW5nOiAwO1xcblxcdGJvcmRlcjogMDtcXG5cXHRmb250LXNpemU6IDEwMCU7XFxuXFx0Zm9udDogaW5oZXJpdDtcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxufVxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBcXG5mb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5ib2R5IHtcXG5cXHRsaW5lLWhlaWdodDogMTtcXG59XFxub2wsIHVsIHtcXG5cXHRsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlLCBxIHtcXG5cXHRxdW90ZXM6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLCBxOmFmdGVyIHtcXG5cXHRjb250ZW50OiAnJztcXG5cXHRjb250ZW50OiBub25lO1xcbn1cXG50YWJsZSB7XFxuXFx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG5cXHRib3JkZXItc3BhY2luZzogMDtcXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3Jlc2V0LmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTs7O0NBR0M7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Q0FhQyxTQUFTO0NBQ1QsVUFBVTtDQUNWLFNBQVM7Q0FDVCxlQUFlO0NBQ2YsYUFBYTtDQUNiLHdCQUF3QjtBQUN6QjtBQUNBLGdEQUFnRDtBQUNoRDs7Q0FFQyxjQUFjO0FBQ2Y7QUFDQTtDQUNDLGNBQWM7QUFDZjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxZQUFZO0FBQ2I7QUFDQTs7Q0FFQyxXQUFXO0NBQ1gsYUFBYTtBQUNkO0FBQ0E7Q0FDQyx5QkFBeUI7Q0FDekIsaUJBQWlCO0FBQ2xCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvIFxcbiAgIHYyLjAgfCAyMDExMDEyNlxcbiAgIExpY2Vuc2U6IG5vbmUgKHB1YmxpYyBkb21haW4pXFxuKi9cXG5cXG5odG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXFxuaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLFxcbmEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSxcXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXFxuc21hbGwsIHN0cmlrZSwgc3Ryb25nLCBzdWIsIHN1cCwgdHQsIHZhcixcXG5iLCB1LCBpLCBjZW50ZXIsXFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcXG5maWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCxcXG50YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCxcXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCwgXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBcXG5tZW51LCBuYXYsIG91dHB1dCwgcnVieSwgc2VjdGlvbiwgc3VtbWFyeSxcXG50aW1lLCBtYXJrLCBhdWRpbywgdmlkZW8ge1xcblxcdG1hcmdpbjogMDtcXG5cXHRwYWRkaW5nOiAwO1xcblxcdGJvcmRlcjogMDtcXG5cXHRmb250LXNpemU6IDEwMCU7XFxuXFx0Zm9udDogaW5oZXJpdDtcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxufVxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBcXG5mb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5ib2R5IHtcXG5cXHRsaW5lLWhlaWdodDogMTtcXG59XFxub2wsIHVsIHtcXG5cXHRsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlLCBxIHtcXG5cXHRxdW90ZXM6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLCBxOmFmdGVyIHtcXG5cXHRjb250ZW50OiAnJztcXG5cXHRjb250ZW50OiBub25lO1xcbn1cXG50YWJsZSB7XFxuXFx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG5cXHRib3JkZXItc3BhY2luZzogMDtcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiaHRtbCB7XFxuICBmb250LXNpemU6IDEwcHg7XFxufVxcblxcbjpyb290IHtcXG4gIC0tb2ZmLXdoaXRlOiAjZWZlZmVmO1xcbiAgLS1iYWNrZ3JvdW5kLWJsdWU6ICMwMDAyNDA7XFxufVxcblxcbi5yb290IHtcXG4gIGZvbnQtZmFtaWx5OiAnT3JiaXRyb24nLCBzYW5zLXNlcmlmO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1ibHVlKTtcXG4gIGNvbG9yOiB2YXIoLS1vZmYtd2hpdGUpO1xcbiAgbWluLWhlaWdodDogMTAwdmg7XFxuICBib3gtc2l6aW5nOiBib3I7XFxuICBwYWRkaW5nOiAzcmVtIDNyZW07XFxufVxcblxcbmhlYWRlciB7XFxuICBmb250LXNpemU6IDMuNXJlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxufVxcblxcbmhlYWRlciAubmV3LWdhbWUge1xcbiAgZm9udC1mYW1pbHk6ICdPcmJpdHJvbicsIHNhbnMtc2VyaWY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1vZmYtd2hpdGUpO1xcbiAgY29sb3I6IGJsYWNrO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgZm9udC1zaXplOiAxLjVyZW07XFxuICBwYWRkaW5nOiAxLjVyZW0gMnJlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgbWFyZ2luLXJpZ2h0OiAwLjNyZW07XFxufVxcblxcbi5pbmZvcm1hdGlvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjAwLCAyMDAsMjAwKTtcXG4gIGNvbG9yOiBibGFjaztcXG4gIHBhZGRpbmc6IDIuNXJlbSAzLjVyZW07XFxuICBtYXJnaW4tdG9wOiA1cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogMS41cmVtO1xcbiAgZm9udC1zaXplOiAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IDUwMDtcXG59XFxuXFxuLm1haW4tZ2FtZS13cmFwcGVyIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgZmxleC13cmFwOiB3cmFwO1xcbiAgcGFkZGluZzogNHJlbSAycmVtO1xcbn1cXG5cXG4ubWFpbi1nYW1lLXdyYXBwZXIgaDIge1xcbiAgZm9udC1zaXplOiAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBtYXJnaW4tYm90dG9tOiAxcmVtO1xcbn1cXG5cXG4ucGxheWVyLXNlY3Rpb24td3JhcHBlciB7XFxuICBtYXJnaW4tbGVmdDogMjByZW07XFxuICBtYXJnaW4tcmlnaHQ6IDIwcmVtO1xcbiAgbWFyZ2luLWJvdHRvbTogNXJlbTtcXG59XFxuXFxuLmNvbXB1dGVyLXNlY3Rpb24td3JhcHBlciB7XFxuICBtYXJnaW4tbGVmdDogMjByZW07XFxuICBtYXJnaW4tcmlnaHQ6IDIwcmVtO1xcbn1cXG5cXG4uZ3JpZCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtZ3JpZDtcXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDgsIDFmcik7XFxuICBnYXA6IDAuMnJlbTtcXG59XFxuXFxuLmdyaWQgLmNlbGwge1xcbiAgd2lkdGg6IDVyZW07XFxuICBoZWlnaHQ6IDVyZW07XFxuICBib3JkZXItcmFkaXVzOiA4JTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBib3JkZXI6IDFweCBzb2xpZCB3aGl0ZTtcXG59XFxuXFxuLnBsYXllci1zZWN0aW9uLXdyYXBwZXIgLm9wdGlvbnMge1xcbiAgbWFyZ2luLXRvcDogMnJlbTtcXG59XFxuXFxuLnBsYXllci1zZWN0aW9uLXdyYXBwZXIgLm9wdGlvbnMgYnV0dG9uIHtcXG4gIG1hcmdpbi10b3A6IDFyZW07XFxuICBmb250LWZhbWlseTogJ09yYml0cm9uJywgc2Fucy1zZXJpZjtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW9mZi13aGl0ZSk7XFxuICBjb2xvcjogYmxhY2s7XFxuICBib3JkZXI6IG5vbmU7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG4gIHBhZGRpbmc6IDEuNXJlbSAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBtYXJnaW4tcmlnaHQ6IDAuM3JlbTtcXG59XFxuXFxuLyogU2hpcCBQbGFjZW1lbnQgTW9kZSAqL1xcbi5jZWxsLmFscmVhZHktcGxhY2VkIHtcXG4gIGJhY2tncm91bmQtY29sb3I6cmdiKDE4MCwgMTgwLDE4MClcXG59XFxuXFxuLmNlbGwuaW52YWxpZC1wbGFjZW1lbnQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTAsIDAsIDAsIDAuNSk7ICBcXG59XFxuXFxuLmNlbGwucGxheWVyLXNlbGVjdGlvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE4MCwgMTgwLDE4MCwgMC43KVxcbn1cXG5cXG4vKiBHYW1lIE1vZGUgKi9cXG5cXG4uY2VsbCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbn1cXG5cXG4uY2VsbC5oaXQ6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgaGVpZ2h0OiAxLjZyZW07XFxuICB3aWR0aDogMS42cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xcbn1cXG5cXG4uY2VsbC5taXNzZWQ6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgaGVpZ2h0OiAxLjZyZW07XFxuICB3aWR0aDogMS42cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxufVxcblxcbi5jZWxsLnRhcmdldGluZyB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2OTNlO1xcbn1cXG5cXG4uY2VsbC5pbnZhbGlkLXRhcmdldGluZyB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1MCwgMCwgMCwgMC41KTsgIFxcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxtQ0FBbUM7RUFDbkMsd0NBQXdDO0VBQ3hDLHVCQUF1QjtFQUN2QixpQkFBaUI7RUFDakIsZUFBZTtFQUNmLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxtQ0FBbUM7RUFDbkMsa0NBQWtDO0VBQ2xDLFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQixpQkFBaUI7RUFDakIsb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsbUNBQW1DO0VBQ25DLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtFQUNyQixlQUFlO0VBQ2YsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2Qix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLHFDQUFxQztFQUNyQyxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixzQkFBc0I7RUFDdEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1DQUFtQztFQUNuQyxrQ0FBa0M7RUFDbEMsWUFBWTtFQUNaLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLGlCQUFpQjtFQUNqQixvQkFBb0I7QUFDdEI7O0FBRUEsd0JBQXdCO0FBQ3hCO0VBQ0U7QUFDRjs7QUFFQTtFQUNFLHNDQUFzQztBQUN4Qzs7QUFFQTtFQUNFO0FBQ0Y7O0FBRUEsY0FBYzs7QUFFZDtFQUNFLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLHNDQUFzQztBQUN4Q1wiLFwic291cmNlc0NvbnRlbnRcIjpbXCJodG1sIHtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG59XFxuXFxuOnJvb3Qge1xcbiAgLS1vZmYtd2hpdGU6ICNlZmVmZWY7XFxuICAtLWJhY2tncm91bmQtYmx1ZTogIzAwMDI0MDtcXG59XFxuXFxuLnJvb3Qge1xcbiAgZm9udC1mYW1pbHk6ICdPcmJpdHJvbicsIHNhbnMtc2VyaWY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLWJsdWUpO1xcbiAgY29sb3I6IHZhcigtLW9mZi13aGl0ZSk7XFxuICBtaW4taGVpZ2h0OiAxMDB2aDtcXG4gIGJveC1zaXppbmc6IGJvcjtcXG4gIHBhZGRpbmc6IDNyZW0gM3JlbTtcXG59XFxuXFxuaGVhZGVyIHtcXG4gIGZvbnQtc2l6ZTogMy41cmVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG59XFxuXFxuaGVhZGVyIC5uZXctZ2FtZSB7XFxuICBmb250LWZhbWlseTogJ09yYml0cm9uJywgc2Fucy1zZXJpZjtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW9mZi13aGl0ZSk7XFxuICBjb2xvcjogYmxhY2s7XFxuICBib3JkZXI6IG5vbmU7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG4gIHBhZGRpbmc6IDEuNXJlbSAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBtYXJnaW4tcmlnaHQ6IDAuM3JlbTtcXG59XFxuXFxuLmluZm9ybWF0aW9uIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMDAsIDIwMCwyMDApO1xcbiAgY29sb3I6IGJsYWNrO1xcbiAgcGFkZGluZzogMi41cmVtIDMuNXJlbTtcXG4gIG1hcmdpbi10b3A6IDVyZW07XFxuICBib3JkZXItcmFkaXVzOiAxLjVyZW07XFxuICBmb250LXNpemU6IDJyZW07XFxuICBmb250LXdlaWdodDogNTAwO1xcbn1cXG5cXG4ubWFpbi1nYW1lLXdyYXBwZXIge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuICBwYWRkaW5nOiA0cmVtIDJyZW07XFxufVxcblxcbi5tYWluLWdhbWUtd3JhcHBlciBoMiB7XFxuICBmb250LXNpemU6IDJyZW07XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XFxufVxcblxcbi5wbGF5ZXItc2VjdGlvbi13cmFwcGVyIHtcXG4gIG1hcmdpbi1sZWZ0OiAyMHJlbTtcXG4gIG1hcmdpbi1yaWdodDogMjByZW07XFxuICBtYXJnaW4tYm90dG9tOiA1cmVtO1xcbn1cXG5cXG4uY29tcHV0ZXItc2VjdGlvbi13cmFwcGVyIHtcXG4gIG1hcmdpbi1sZWZ0OiAyMHJlbTtcXG4gIG1hcmdpbi1yaWdodDogMjByZW07XFxufVxcblxcbi5ncmlkIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ncmlkO1xcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoOCwgMWZyKTtcXG4gIGdhcDogMC4ycmVtO1xcbn1cXG5cXG4uZ3JpZCAuY2VsbCB7XFxuICB3aWR0aDogNXJlbTtcXG4gIGhlaWdodDogNXJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDglO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlO1xcbn1cXG5cXG4ucGxheWVyLXNlY3Rpb24td3JhcHBlciAub3B0aW9ucyB7XFxuICBtYXJnaW4tdG9wOiAycmVtO1xcbn1cXG5cXG4ucGxheWVyLXNlY3Rpb24td3JhcHBlciAub3B0aW9ucyBidXR0b24ge1xcbiAgbWFyZ2luLXRvcDogMXJlbTtcXG4gIGZvbnQtZmFtaWx5OiAnT3JiaXRyb24nLCBzYW5zLXNlcmlmO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tb2ZmLXdoaXRlKTtcXG4gIGNvbG9yOiBibGFjaztcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgcGFkZGluZzogMS41cmVtIDJyZW07XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIG1hcmdpbi1yaWdodDogMC4zcmVtO1xcbn1cXG5cXG4vKiBTaGlwIFBsYWNlbWVudCBNb2RlICovXFxuLmNlbGwuYWxyZWFkeS1wbGFjZWQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjpyZ2IoMTgwLCAxODAsMTgwKVxcbn1cXG5cXG4uY2VsbC5pbnZhbGlkLXBsYWNlbWVudCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1MCwgMCwgMCwgMC41KTsgIFxcbn1cXG5cXG4uY2VsbC5wbGF5ZXItc2VsZWN0aW9uIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTgwLCAxODAsMTgwLCAwLjcpXFxufVxcblxcbi8qIEdhbWUgTW9kZSAqL1xcblxcbi5jZWxsIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxufVxcblxcbi5jZWxsLmhpdDo6YWZ0ZXIge1xcbiAgY29udGVudDogJyc7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBoZWlnaHQ6IDEuNnJlbTtcXG4gIHdpZHRoOiAxLjZyZW07XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XFxufVxcblxcbi5jZWxsLm1pc3NlZDo6YWZ0ZXIge1xcbiAgY29udGVudDogJyc7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBoZWlnaHQ6IDEuNnJlbTtcXG4gIHdpZHRoOiAxLjZyZW07XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXG59XFxuXFxuLmNlbGwudGFyZ2V0aW5nIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDY5M2U7XFxufVxcblxcbi5jZWxsLmludmFsaWQtdGFyZ2V0aW5nIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjUwLCAwLCAwLCAwLjUpOyAgXFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSkge1xuICB2YXIgX2l0ZW0gPSBfc2xpY2VkVG9BcnJheShpdGVtLCA0KSxcbiAgICAgIGNvbnRlbnQgPSBfaXRlbVsxXSxcbiAgICAgIGNzc01hcHBpbmcgPSBfaXRlbVszXTtcblxuICBpZiAodHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn07IiwiaW1wb3J0IGFwaSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgICAgICAgaW1wb3J0IGNvbnRlbnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9yZXNldC5jc3NcIjtcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJpbXBvcnQgYXBpIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICAgICAgICBpbXBvcnQgY29udGVudCBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiO1xuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiaW1wb3J0ICcuL3Jlc2V0LmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUuY3NzJztcbmltcG9ydCBjcmVhdGVHYW1lIGZyb20gJy4vbW9kdWxlcy9jcmVhdGVHYW1lJztcbmltcG9ydCBjcmVhdGVET01Db250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9jcmVhdGVET01Db250cm9sbGVyJztcbmltcG9ydCBldmVudHMgZnJvbSAnLi9tb2R1bGVzL2V2ZW50cyc7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXIgPSBjcmVhdGVET01Db250cm9sbGVyKGNyZWF0ZUdhbWUoZXZlbnRzKSk7XG5ET01Db250cm9sbGVyLmluaXRpYWxpemUoKTtcbiIsImltcG9ydCBldmVudHMgZnJvbSAnLi9ldmVudHMnO1xuXG5mdW5jdGlvbiBjcmVhdGVET01Db250cm9sbGVyKGdhbWUpIHtcbiAgY29uc3QgcGxheWVyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXItc2VjdGlvbi13cmFwcGVyIC5ncmlkJyk7XG4gIGNvbnN0IGNvbXB1dGVyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21wdXRlci1zZWN0aW9uLXdyYXBwZXIgLmdyaWQnKTtcblxuICAvKiBTVEFURSAqL1xuXG4gIGxldCBwbGFjZWRTaGlwcyA9IFtdO1xuICBsZXQgc2VsZWN0aW9uTGVuZ3RoID0gbnVsbDtcbiAgbGV0IHNlbGVjdGlvbk9yaWVudGF0aW9uID0gJ3VwJztcbiAgbGV0IGlzVGhlcmVBbm90aGVyU2hpcCA9IHRydWU7XG4gIGNvbnN0IHNoaXBzVG9QbGFjZSA9IChmdW5jdGlvbiBjcmVhdGVTaGlwc1RvUGxhY2UoKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbNSwgNCwgMywgMywgMl07XG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG4gICAgY29uc3QgbmV4dFNoaXBMZW5ndGggPSBmdW5jdGlvbiBuZXh0U2hpcExlbmd0aCgpIHtcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPj0gaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHNlbGVjdGlvbkxlbmd0aCA9IG51bGw7XG4gICAgICAgIGlzVGhlcmVBbm90aGVyU2hpcCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0aW9uTGVuZ3RoID0gaXRlbXNbY3VycmVudEluZGV4XTtcbiAgICAgICAgY3VycmVudEluZGV4ICs9IDE7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgaXNUaGVyZUFub3RoZXJTaGlwID0gdHJ1ZTtcbiAgICAgIGN1cnJlbnRJbmRleCA9IDA7XG4gICAgICBuZXh0U2hpcExlbmd0aCgpO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHRTaGlwTGVuZ3RoLFxuICAgICAgcmVzZXQsXG4gICAgfTtcbiAgfSgpKTtcblxuICBjb25zdCBzZXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uIHNldEluZm9ybWF0aW9uKG1lc3NhZ2UpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mb3JtYXRpb24nKS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIH07XG4gIGNvbnN0IGdldENlbGwgPSBmdW5jdGlvbiBnZXRDZWxsKGdyaWQsIGNvb3JkaW5hdGVzKSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBjb29yZGluYXRlcztcbiAgICBjb25zdCBjZWxsID0gZ3JpZC5xdWVyeVNlbGVjdG9yKGAuY2VsbFtkYXRhLWNlbGwteD1cIiR7eH1cIl1bZGF0YS1jZWxsLXk9XCIke3l9XCJdYCk7XG4gICAgaWYgKGNlbGwgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignQ2VsbCBub3QgZm91bmQnKTtcbiAgICByZXR1cm4gY2VsbDtcbiAgfTtcblxuICBsZXQgY2FuVXNlck1vdmUgPSBudWxsO1xuXG4gIGNvbnN0IHJlbW92ZUFsbFBsYWNlbWVudENsYXNzZXMgPSBmdW5jdGlvbiByZW1vdmVBbGxQbGFjZW1lbnRDbGFzc2VzKCkge1xuICAgIHBsYXllckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2FscmVhZHktcGxhY2VkJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyogU0VMRUNUSU9OIE1PREUgRlVOQ1RJT05TICovXG5cbiAgY29uc3QgaXNDZWxsQWxyZWFkeVBsYWNlZCA9IGZ1bmN0aW9uIGlzQ2VsbEFscmVhZHlQbGFjZWQoY29vcmRpbmF0ZXMsIGFscmVhZHlQbGFjZWQpIHtcbiAgICBsZXQgcGxhY2VkID0gZmFsc2U7XG4gICAgYWxyZWFkeVBsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBzaGlwLmZvckVhY2goKHsgeCwgeSB9KSA9PiB7XG4gICAgICAgIGlmICh4ID09PSBjb29yZGluYXRlcy54ICYmIHkgPT09IGNvb3JkaW5hdGVzLnkpIHtcbiAgICAgICAgICBwbGFjZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGxhY2VkO1xuICB9O1xuXG4gIC8vIHJldHVybnMgdGhlIGNvb3JkaW5hdGVzIGZvciB0aGUgcGxheWVyJ3Mgc2VsZWN0aW9uXG4gIGNvbnN0IGdldFNlbGVjdGlvbiA9IGZ1bmN0aW9uIGdldFNlbGVjdGlvbihtb3VzZUxvY2F0aW9uLCBvcmllbnRhdGlvbiwgbGVuZ3RoKSB7XG4gICAgbGV0IGNoYW5naW5nQXhpcztcbiAgICBsZXQgdW5jaGFuZ2luZ0F4aXM7XG4gICAgY29uc3QgY29vcmRpbmF0ZXNMaXN0ID0gW107XG4gICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xuICAgICAgY2FzZSAndXAnOlxuICAgICAgICBjaGFuZ2luZ0F4aXMgPSAneSc7XG4gICAgICAgIHVuY2hhbmdpbmdBeGlzID0gJ3gnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgY2hhbmdpbmdBeGlzID0gJ3gnO1xuICAgICAgICB1bmNoYW5naW5nQXhpcyA9ICd5JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBjb29yZGluYXRlcyA9IHtcbiAgICAgICAgW2NoYW5naW5nQXhpc106IG1vdXNlTG9jYXRpb25bY2hhbmdpbmdBeGlzXSArIGksXG4gICAgICAgIFt1bmNoYW5naW5nQXhpc106IG1vdXNlTG9jYXRpb25bdW5jaGFuZ2luZ0F4aXNdLFxuICAgICAgfTtcbiAgICAgIGNvb3JkaW5hdGVzTGlzdC5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzTGlzdDtcbiAgfTtcblxuICBjb25zdCByZW5kZXJDdXJyZW50U2VsZWN0aW9uID0gZnVuY3Rpb24gcmVuZGVyQ3VycmVudFNlbGVjdGlvbihcbiAgICBtb3VzZUxvY2F0aW9uLFxuICAgIG9yaWVudGF0aW9uLFxuICAgIGxlbmd0aCxcbiAgKSB7XG4gICAgY29uc3QgY29vcmRpbmF0ZXNMaXN0ID0gZ2V0U2VsZWN0aW9uKG1vdXNlTG9jYXRpb24sIG9yaWVudGF0aW9uLCBsZW5ndGgpO1xuXG4gICAgbGV0IGlzVmFsaWRTZWxlY3Rpb24gPSB0cnVlO1xuICAgIGNvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgaWYgKGNvb3JkaW5hdGVzLnggPCAwIHx8IGNvb3JkaW5hdGVzLnkgPCAwKSB7XG4gICAgICAgIGlzVmFsaWRTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChjb29yZGluYXRlcy54ID4gNyB8fCBjb29yZGluYXRlcy55ID4gNykge1xuICAgICAgICBpc1ZhbGlkU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaXNDZWxsQWxyZWFkeVBsYWNlZChjb29yZGluYXRlcywgcGxhY2VkU2hpcHMpKSB7XG4gICAgICAgIGlzVmFsaWRTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoaXNWYWxpZFNlbGVjdGlvbikge1xuICAgICAgY29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICAgIGdldENlbGwocGxheWVyR3JpZCwgY29vcmRpbmF0ZXMpLmNsYXNzTGlzdC5hZGQoJ3BsYXllci1zZWxlY3Rpb24nKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZXRDZWxsKHBsYXllckdyaWQsIG1vdXNlTG9jYXRpb24pLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQtcGxhY2VtZW50Jyk7XG4gICAgfVxuICB9O1xuXG4gIC8qIGFsdGVycyB0aGUgcGxheWVyR3JpZCB0byBzaG93IGFscmVhZHkgcGxhY2VkIHNoaXBzICovXG4gIGNvbnN0IHJlbmRlclBsYWNlZFNoaXBzID0gZnVuY3Rpb24gcmVuZGVySW5TZWxlY3RNb2RlKGFscmVhZHlQbGFjZWQpIHtcbiAgICBhbHJlYWR5UGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwocGxheWVyR3JpZCwgY29vcmRpbmF0ZXMpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2FscmVhZHktcGxhY2VkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRDZWxsQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDZWxsQ29vcmRpbmF0ZXMoY2VsbCkge1xuICAgIGNvbnN0IHggPSBOdW1iZXIoY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC14JykpO1xuICAgIGNvbnN0IHkgPSBOdW1iZXIoY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC15JykpO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0ge1xuICAgICAgeCxcbiAgICAgIHksXG4gICAgfTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXM7XG4gIH07XG5cbiAgLy8gYWRkcyBzaGlwIHRvIHN0YXRlXG4gIGNvbnN0IG9uQ2xpY2tPZkNlbGxEdXJpbmdTZWxlY3Rpb24gPSBmdW5jdGlvbiBvbkNsaWNrT2ZDZWxsRHVyaW5nU2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKCFpc1RoZXJlQW5vdGhlclNoaXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2VsbCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBtb3VzZUxvY2F0aW9uID0gZ2V0Q2VsbENvb3JkaW5hdGVzKGNlbGwpO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzTGlzdCA9IGdldFNlbGVjdGlvbihtb3VzZUxvY2F0aW9uLCBzZWxlY3Rpb25PcmllbnRhdGlvbiwgc2VsZWN0aW9uTGVuZ3RoKTtcbiAgICBsZXQgaXNWYWxpZFNlbGVjdGlvbiA9IHRydWU7XG4gICAgY29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBpZiAoY29vcmRpbmF0ZXMueCA8IDAgfHwgY29vcmRpbmF0ZXMueSA8IDApIHtcbiAgICAgICAgaXNWYWxpZFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNvb3JkaW5hdGVzLnggPiA3IHx8IGNvb3JkaW5hdGVzLnkgPiA3KSB7XG4gICAgICAgIGlzVmFsaWRTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0NlbGxBbHJlYWR5UGxhY2VkKGNvb3JkaW5hdGVzLCBwbGFjZWRTaGlwcykpIHtcbiAgICAgICAgaXNWYWxpZFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChpc1ZhbGlkU2VsZWN0aW9uKSB7XG4gICAgICBwbGFjZWRTaGlwcy5wdXNoKGNvb3JkaW5hdGVzTGlzdCk7XG4gICAgICByZW5kZXJQbGFjZWRTaGlwcyhwbGFjZWRTaGlwcyk7XG4gICAgICBzaGlwc1RvUGxhY2UubmV4dFNoaXBMZW5ndGgoKTtcbiAgICB9XG4gIH07XG5cbiAgLyogZ29lcyB0aHJvdWdoIGFsbCB0aGUgY2VsbHMgaW4gdGhlIHBsYXllcidzIGdyaWQgdG8gcmVtb3ZlIGNsYXNzZXMgdGhhdCBpbmRpY2F0ZSBwbGFjZWRcbiAgc2hpcHMgYW5kIHNlbGVjdGlvbiAqL1xuICBjb25zdCByZW1vdmVBbGxTZWxlY3Rpb25DbGFzc2VzID0gZnVuY3Rpb24gcmVtb3ZlQWxsU2VsZWN0aW9uQ2xhc3NlcygpIHtcbiAgICBwbGF5ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdwbGF5ZXItc2VsZWN0aW9uJyk7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQtcGxhY2VtZW50Jyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgb25Nb3VzZUVudGVyQ2VsbER1cmluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uIG9uTW91c2VFbnRlckNlbGxEdXJpbmdTZWxlY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoIWlzVGhlcmVBbm90aGVyU2hpcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gZ2V0Q2VsbENvb3JkaW5hdGVzKGNlbGwpO1xuICAgIHJlbmRlclBsYWNlZFNoaXBzKHBsYWNlZFNoaXBzKTtcbiAgICByZW5kZXJDdXJyZW50U2VsZWN0aW9uKGNvb3JkaW5hdGVzLCBzZWxlY3Rpb25PcmllbnRhdGlvbiwgc2VsZWN0aW9uTGVuZ3RoLCBwbGFjZWRTaGlwcyk7XG4gIH07XG5cbiAgY29uc3Qgb25Nb3VzZUxlYXZlQ2VsbER1cmluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uIG9uTW91c2VMZWF2ZUNlbGxEdXJpbmdTZWxlY3Rpb24oKSB7XG4gICAgcmVtb3ZlQWxsU2VsZWN0aW9uQ2xhc3NlcygpO1xuICB9O1xuXG4gIC8vIHRvZ2dsZXMgb3JpZW50YXRpb25cbiAgY29uc3Qgb25DbGlja09mQ2hhbmdlT3JpZW50YXRpb24gPSBmdW5jdGlvbiBvbkNsaWNrT2ZDaGFuZ2VPcmllbnRhdGlvbigpIHtcbiAgICBpZiAoc2VsZWN0aW9uT3JpZW50YXRpb24gPT09ICd1cCcpIHtcbiAgICAgIHNlbGVjdGlvbk9yaWVudGF0aW9uID0gJ3JpZ2h0JztcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0aW9uT3JpZW50YXRpb24gPSAndXAnO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbkNsaWNrT2ZSZXNldER1cmluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uIG9uQ2xpY2tPZlJlc2V0RHVyaW5nU2VsZWN0aW9uKCkge1xuICAgIHBsYWNlZFNoaXBzID0gW107XG4gICAgcmVtb3ZlQWxsUGxhY2VtZW50Q2xhc3NlcygpO1xuICAgIHNoaXBzVG9QbGFjZS5yZXNldCgpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZVBsYXllclNlbGVjdGlvbkV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlUGxheWVyU2VsZWN0aW9uRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2VsbHMgPSBwbGF5ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25Nb3VzZUVudGVyQ2VsbER1cmluZ1NlbGVjdGlvbik7XG4gICAgICBjZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBvbk1vdXNlTGVhdmVDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICAgIGNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvbkNsaWNrT2ZTdGFydER1cmluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uIG9uQ2xpY2tPZlN0YXJ0RHVyaW5nU2VsZWN0aW9uKCkge1xuICAgIGlmIChpc1RoZXJlQW5vdGhlclNoaXApIHtcbiAgICAgIHNldEluZm9ybWF0aW9uKCdBbGwgc2hpcHMgbXVzdCBiZSBwbGFjZWQgYmVmb3JlIHRoZSBnYW1lIGNhbiBiZWdpbiEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0SW5mb3JtYXRpb24oJ0xldCB0aGUgZ2FtZSBiZWdpbiEnKTtcbiAgICByZW1vdmVQbGF5ZXJTZWxlY3Rpb25FdmVudExpc3RlbmVycygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpb25zJykuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIHBsYWNlZFNoaXBzLmZvckVhY2goKHBsYWNlZFNoaXApID0+IHtcbiAgICAgIGdhbWUucGxhY2VTaGlwKCd1c2VyJywgcGxhY2VkU2hpcCk7XG4gICAgfSk7XG4gICAgc3RhcnRHYW1lKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgfTtcblxuICBjb25zdCBzZXRVcFBsYXllclNlbGVjdGlvbkV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0VXBQbGF5ZXJTZWxlY3Rpb25FdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjZWxscyA9IHBsYXllckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBvbk1vdXNlRW50ZXJDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG9uTW91c2VMZWF2ZUNlbGxEdXJpbmdTZWxlY3Rpb24pO1xuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tPZkNlbGxEdXJpbmdTZWxlY3Rpb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qIEdBTUUgTU9ERSBGVU5DVElPTlMgKi9cblxuICAvLyByZW1vdmVzIGhpdCBhbmQgbWlzcyBjbGFzc2VzIGZyb20gYm90aCBncmlkc1xuICBjb25zdCByZW1vdmVBbGxIaXRBbmRNaXNzQ2xhc3NlcyA9IGZ1bmN0aW9uIHJlbW92ZUFsbEhpdEFuZE1pc3NDbGFzc2VzKCkge1xuICAgIHBsYXllckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpdCcpO1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdtaXNzZWQnKTtcbiAgICB9KTtcbiAgICBjb21wdXRlckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpdCcpO1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdtaXNzZWQnKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVCb2FyZEZvckZpcmVkVXBvbkNlbGxzID0gZnVuY3Rpb24gdXBkYXRlQm9hcmRGb3JGaXJlZFVwb25DZWxscyhwbGF5ZXJOYW1lKSB7XG4gICAgbGV0IGhpdENvb3JkaW5hdGVzO1xuICAgIGxldCBtaXNzZWRDb29yZGluYXRlcztcbiAgICBsZXQgZ3JpZDtcbiAgICBpZiAocGxheWVyTmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICAoeyBoaXRDb29yZGluYXRlcywgbWlzc2VkQ29vcmRpbmF0ZXMgfSA9IGdhbWUuZ2V0Qm9hcmRTdGF0ZSgndXNlcicpKTtcbiAgICAgIGdyaWQgPSBwbGF5ZXJHcmlkO1xuICAgIH0gZWxzZSBpZiAocGxheWVyTmFtZSA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgKHsgaGl0Q29vcmRpbmF0ZXMsIG1pc3NlZENvb3JkaW5hdGVzIH0gPSBnYW1lLmdldEJvYXJkU3RhdGUoJ2NvbXB1dGVyJykpO1xuICAgICAgZ3JpZCA9IGNvbXB1dGVyR3JpZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBsYXllck5hbWUnKTtcbiAgICB9XG4gICAgaGl0Q29vcmRpbmF0ZXMuZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIGdldENlbGwoZ3JpZCwgY29vcmRpbmF0ZXMpLmNsYXNzTGlzdC5hZGQoJ2hpdCcpO1xuICAgIH0pO1xuICAgIG1pc3NlZENvb3JkaW5hdGVzLmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBnZXRDZWxsKGdyaWQsIGNvb3JkaW5hdGVzKS5jbGFzc0xpc3QuYWRkKCdtaXNzZWQnKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoYXNDZWxsQmVlbkZpcmVkVXBvbiA9IGZ1bmN0aW9uIGhhc0NlbGxCZWVuRmlyZWRVcG9uKGNvb3JkaW5hdGVzKSB7XG4gICAgY29uc3QgeyBoaXRDb29yZGluYXRlcywgbWlzc2VkQ29vcmRpbmF0ZXMgfSA9IGdhbWUuZ2V0Qm9hcmRTdGF0ZSgnY29tcHV0ZXInKTtcbiAgICBsZXQgZmlyZWRVcG9uID0gZmFsc2U7XG4gICAgaGl0Q29vcmRpbmF0ZXMuZm9yRWFjaCgoeyB4LCB5IH0pID0+IHtcbiAgICAgIGlmICh4ID09PSBjb29yZGluYXRlcy54ICYmIHkgPT09IGNvb3JkaW5hdGVzLnkpIHtcbiAgICAgICAgZmlyZWRVcG9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBtaXNzZWRDb29yZGluYXRlcy5mb3JFYWNoKCh7IHgsIHkgfSkgPT4ge1xuICAgICAgaWYgKHggPT09IGNvb3JkaW5hdGVzLnggJiYgeSA9PT0gY29vcmRpbmF0ZXMueSkge1xuICAgICAgICBmaXJlZFVwb24gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmaXJlZFVwb247XG4gIH07XG5cbiAgY29uc3Qgb25DbGlja09mQ2VsbER1cmluZ0dhbWUgPSBmdW5jdGlvbiBvbkNsaWNrT25DZWxsRHVyaW5nR2FtZShldmVudCkge1xuICAgIGlmICghY2FuVXNlck1vdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2VsbCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IGdldENlbGxDb29yZGluYXRlcyhjZWxsKTtcbiAgICBpZiAoaGFzQ2VsbEJlZW5GaXJlZFVwb24oY29vcmRpbmF0ZXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGdhbWUubWFrZVVzZXJNb3ZlKGNvb3JkaW5hdGVzKTtcbiAgICB1cGRhdGVCb2FyZEZvckZpcmVkVXBvbkNlbGxzKCdjb21wdXRlcicpO1xuICAgIGNhblVzZXJNb3ZlID0gZmFsc2U7XG4gIH07XG5cbiAgY29uc3Qgb25Vc2VyVHVybkJlZ2lucyA9IGZ1bmN0aW9uIG9uVXNlclR1cm5CZWdpbnMoKSB7XG4gICAgY2FuVXNlck1vdmUgPSB0cnVlO1xuICB9O1xuXG4gIGNvbnN0IG9uQ29tcHV0ZXJUdXJuQmVnaW5zID0gZnVuY3Rpb24gb25Db21wdXRlclR1cm5CZWdpbnMoKSB7XG4gICAgZ2FtZS5tYWtlQ29tcHV0ZXJNb3ZlKE1hdGgucmFuZG9tKTtcbiAgICB1cGRhdGVCb2FyZEZvckZpcmVkVXBvbkNlbGxzKCd1c2VyJyk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlQWxsVGFyZ2V0aW5nQ2xhc3NlcyA9IGZ1bmN0aW9uIHJlbW92ZUFsbFRhcmdldGluZ0NsYXNzZXMoKSB7XG4gICAgY29tcHV0ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCd0YXJnZXRpbmcnKTtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZC10YXJnZXRpbmcnKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvbk1vdXNlRW50ZXJDb21wdXRlckNlbGxEdXJpbmdHYW1lID0gZnVuY3Rpb24gb25Nb3VzZUVudGVyQ29tcHV0ZXJDZWxsRHVyaW5nR2FtZShldmVudCkge1xuICAgIGNvbnN0IGNlbGwgPSBldmVudC50YXJnZXQ7XG4gICAgaWYgKGhhc0NlbGxCZWVuRmlyZWRVcG9uKGdldENlbGxDb29yZGluYXRlcyhjZWxsKSkpIHtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaW52YWxpZC10YXJnZXRpbmcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCd0YXJnZXRpbmcnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25Nb3VzZUxlYXZlQ29tcHV0ZXJDZWxsRHVyaW5nR2FtZSA9IGZ1bmN0aW9uIG9uTW91c2VMZWF2ZUNvbXB1dGVyQ2VsbER1cmluZ0dhbWUoKSB7XG4gICAgcmVtb3ZlQWxsVGFyZ2V0aW5nQ2xhc3NlcygpO1xuICB9O1xuXG4gIGNvbnN0IHNldFVwR2FtZU1vZGVFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldFVwR2FtZU1vZGVFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjZWxscyA9IGNvbXB1dGVyR3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIG9uTW91c2VFbnRlckNvbXB1dGVyQ2VsbER1cmluZ0dhbWUpO1xuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgb25Nb3VzZUxlYXZlQ29tcHV0ZXJDZWxsRHVyaW5nR2FtZSk7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja09mQ2VsbER1cmluZ0dhbWUpO1xuICAgIH0pO1xuXG4gICAgZXZlbnRzLm9uKCdVU0VSX1RVUk5fQkVHSU5TJywgb25Vc2VyVHVybkJlZ2lucyk7XG4gICAgZXZlbnRzLm9uKCdDT01QVVRFUl9UVVJOX0JFR0lOUycsIG9uQ29tcHV0ZXJUdXJuQmVnaW5zKTtcbiAgICBldmVudHMub24oJ1BMQVlFUl9IQVNfV09OJywgb25QbGF5ZXJIYXNXb24pOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUdhbWVNb2RlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVHYW1lTW9kZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGNlbGxzID0gY29tcHV0ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25Nb3VzZUVudGVyQ29tcHV0ZXJDZWxsRHVyaW5nR2FtZSk7XG4gICAgICBjZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBvbk1vdXNlTGVhdmVDb21wdXRlckNlbGxEdXJpbmdHYW1lKTtcbiAgICAgIGNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZDZWxsRHVyaW5nR2FtZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICB9KTtcblxuICAgIGV2ZW50cy5vZmYoJ1VTRVJfVFVSTl9CRUdJTlMnLCBvblVzZXJUdXJuQmVnaW5zKTtcbiAgICBldmVudHMub2ZmKCdDT01QVVRFUl9UVVJOX0JFR0lOUycsIG9uQ29tcHV0ZXJUdXJuQmVnaW5zKTtcbiAgICBldmVudHMub2ZmKCdQTEFZRVJfSEFTX1dPTicsIG9uUGxheWVySGFzV29uKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB9O1xuXG4gIGNvbnN0IG9uQ2xpY2tPZk5ld0dhbWUgPSBmdW5jdGlvbiBvbkNsaWNrT2ZOZXdHYW1lKCkge1xuICAgIGNvbnN0IG5ld0dhbWVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgLm5ldy1nYW1lJyk7XG4gICAgbmV3R2FtZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tPZk5ld0dhbWUpO1xuICAgIG5ld0dhbWVCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIGdhbWUucmVzZXRHYW1lKCk7XG4gICAgcGxhY2VkU2hpcHMgPSBbXTtcbiAgICByZW1vdmVBbGxQbGFjZW1lbnRDbGFzc2VzKCk7XG4gICAgcmVtb3ZlQWxsSGl0QW5kTWlzc0NsYXNzZXMoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aW9ucycpLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgc2hpcHNUb1BsYWNlLnJlc2V0KCk7XG4gICAgc2V0VXBQbGF5ZXJTZWxlY3Rpb25FdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIGNvbnN0IG9uUGxheWVySGFzV29uID0gZnVuY3Rpb24gb25QbGF5ZXJIYXNXb24oZXZlbnREYXRhKSB7XG4gICAgY29uc3QgeyB3aW5uZXIgfSA9IGV2ZW50RGF0YTtcbiAgICBsZXQgdmljdG9yVG9EaXNwbGF5O1xuICAgIGlmICh3aW5uZXIgPT09ICd1c2VyJykge1xuICAgICAgdmljdG9yVG9EaXNwbGF5ID0gJ1VzZXInO1xuICAgIH0gZWxzZSBpZiAod2lubmVyID09PSAnY29tcHV0ZXInKSB7XG4gICAgICB2aWN0b3JUb0Rpc3BsYXkgPSAnQ29tcHV0ZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCB2aWN0b3IgaW4gZXZlbnQgZGF0YScpO1xuICAgIH1cbiAgICBzZXRJbmZvcm1hdGlvbihgJHt2aWN0b3JUb0Rpc3BsYXl9IGhhcyB3b24gdGhlIGdhbWUhYCk7XG4gICAgcmVtb3ZlR2FtZU1vZGVFdmVudExpc3RlbmVycygpO1xuICAgIHJlbW92ZUFsbFRhcmdldGluZ0NsYXNzZXMoKTtcbiAgICBjb25zdCBuZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5uZXctZ2FtZScpO1xuICAgIG5ld0dhbWVCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICBuZXdHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja09mTmV3R2FtZSk7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xuICAgIGdhbWUuZ2VuZXJhdGVBbmRQbGFjZUNvbXB1dGVyU2hpcHMoTWF0aC5yYW5kb20pO1xuICAgIHNldFVwR2FtZU1vZGVFdmVudExpc3RlbmVycygpO1xuICAgIGdhbWUuc3RhcnQoKTtcbiAgfTtcblxuICAvKiBJTklUSUFMSVpFICovXG5cbiAgY29uc3QgaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgc2V0SW5mb3JtYXRpb24oJ1BsYWNlIHlvdXIgc2hpcHMhJyk7XG4gICAgZm9yIChsZXQgaSA9IDc7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDg7IGogKz0gMSkge1xuICAgICAgICBjb25zdCBwbGF5ZXJDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHBsYXllckNlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICAgICAgICBwbGF5ZXJDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsLXgnLCBTdHJpbmcoaikpO1xuICAgICAgICBwbGF5ZXJDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsLXknLCBTdHJpbmcoaSkpO1xuICAgICAgICBwbGF5ZXJHcmlkLmFwcGVuZENoaWxkKHBsYXllckNlbGwpO1xuICAgICAgICBjb25zdCBjb21wdXRlckNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29tcHV0ZXJDZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcbiAgICAgICAgY29tcHV0ZXJDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsLXgnLCBTdHJpbmcoaikpO1xuICAgICAgICBjb21wdXRlckNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLWNlbGwteScsIFN0cmluZyhpKSk7XG4gICAgICAgIGNvbXB1dGVyR3JpZC5hcHBlbmRDaGlsZChjb21wdXRlckNlbGwpO1xuICAgICAgfVxuICAgIH1cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlLW9yaWVudGF0aW9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZDaGFuZ2VPcmllbnRhdGlvbik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc2V0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZSZXNldER1cmluZ1NlbGVjdGlvbik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZTdGFydER1cmluZ1NlbGVjdGlvbik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5uZXctZ2FtZScpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBzaGlwc1RvUGxhY2UubmV4dFNoaXBMZW5ndGgoKTtcbiAgICBzZXRVcFBsYXllclNlbGVjdGlvbkV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0aWFsaXplLFxuICAgIHJlbmRlclBsYWNlZFNoaXBzLFxuICAgIHJlbmRlckN1cnJlbnRTZWxlY3Rpb24sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZURPTUNvbnRyb2xsZXI7XG4iLCJpbXBvcnQgY3JlYXRlR2FtZUJvYXJkIGZyb20gJy4vY3JlYXRlR2FtZWJvYXJkJztcbmltcG9ydCBjcmVhdGVQbGF5ZXIgZnJvbSAnLi9jcmVhdGVQbGF5ZXInO1xuXG5jb25zdCBjcmVhdGVHYW1lID0gZnVuY3Rpb24gY3JlYXRlR2FtZShldmVudHMpIHtcbiAgY29uc3QgZXZlbnRzRW1pdHRlZCA9IHtcbiAgICBVU0VSX1RVUk5fQkVHSU5TOiAnVVNFUl9UVVJOX0JFR0lOUycsXG4gICAgQ09NUFVURVJfVFVSTl9CRUdJTlM6ICdDT01QVVRFUl9UVVJOX0JFR0lOUycsXG4gICAgUExBWUVSX0hBU19XT046ICdQTEFZRVJfSEFTX1dPTicsXG4gIH07XG5cbiAgLy8gaW5pdGlhbGl6YXRpb25cbiAgY29uc3QgeExlbmd0aCA9IDg7XG4gIGNvbnN0IHlMZW5ndGggPSA4O1xuXG4gIGNvbnN0IHVzZXJQbGF5ZXIgPSBjcmVhdGVQbGF5ZXIoJ3VzZXInKTtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBjcmVhdGVQbGF5ZXIoJ2NvbXB1dGVyJyk7XG5cbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSBudWxsO1xuXG4gIGxldCB1c2VyQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoeExlbmd0aCwgeUxlbmd0aCk7XG4gIGxldCBjb21wdXRlckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKHhMZW5ndGgsIHlMZW5ndGgpO1xuXG4gIC8qIHVzZWQgdG8gcmVzb2x2ZSB0aGUgcmV0dXJuZWQgcHJvbWlzZXMgaW4gYXdhaXRVc2VyTW92ZSBhbmRcbiAgYXdhaXRDb21wdXRlck1vdmUgICovXG4gIGxldCBhd2FpdENhbGxiYWNrID0gbnVsbDtcblxuICBjb25zdCBnZXRDb3JyZXNwb25kaW5nQm9hcmQgPSBmdW5jdGlvbiBnZXRDb3JyZXNwb25kaW5nQm9hcmQocGxheWVyTmFtZSkge1xuICAgIGlmIChwbGF5ZXJOYW1lID09PSAndXNlcicpIHJldHVybiB1c2VyQm9hcmQ7XG4gICAgaWYgKHBsYXllck5hbWUgPT09ICdjb21wdXRlcicpIHJldHVybiBjb21wdXRlckJvYXJkO1xuICAgIHRocm93IG5ldyBFcnJvcignUGxheWVyIGRvZXMgbm90IGV4aXN0Jyk7XG4gIH07XG5cbiAgY29uc3QgcGxhY2VTaGlwID0gZnVuY3Rpb24gcGxhY2VTaGlwKHBsYXllck5hbWUsIGNvb3JkaW5hdGVzTGlzdCkge1xuICAgIGNvbnN0IGJvYXJkID0gZ2V0Q29ycmVzcG9uZGluZ0JvYXJkKHBsYXllck5hbWUpO1xuICAgIGJvYXJkLnBsYWNlU2hpcChjb29yZGluYXRlc0xpc3QpO1xuICB9O1xuXG4gIGNvbnN0IGdldEJvYXJkU3RhdGUgPSBmdW5jdGlvbiBnZXRCb2FyZFN0YXRlKHBsYXllck5hbWUpIHtcbiAgICBjb25zdCBib2FyZCA9IGdldENvcnJlc3BvbmRpbmdCb2FyZChwbGF5ZXJOYW1lKTtcbiAgICBjb25zdCBwbGFjZWRTaGlwcyA9IGJvYXJkLmdldFBsYWNlZFNoaXBzKCk7XG4gICAgY29uc3QgaGl0Q29vcmRpbmF0ZXMgPSBib2FyZC5nZXRIaXRDb29yZGluYXRlcygpO1xuICAgIGNvbnN0IG1pc3NlZENvb3JkaW5hdGVzID0gYm9hcmQuZ2V0TWlzc2VkQ29vcmRpbmF0ZXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgcGxhY2VkU2hpcHMsXG4gICAgICBoaXRDb29yZGluYXRlcyxcbiAgICAgIG1pc3NlZENvb3JkaW5hdGVzLFxuICAgICAgeExlbmd0aCxcbiAgICAgIHlMZW5ndGgsXG4gICAgfTtcbiAgfTtcblxuICAvKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIGNvb3JkaW5hdGVzIG9mIHRoZVxuICB1c2VyJ3MgbW92ZSAqL1xuICBjb25zdCBhd2FpdFVzZXJNb3ZlID0gZnVuY3Rpb24gYXdhaXRVc2VyTW92ZSgpIHtcbiAgICBjdXJyZW50UGxheWVyID0gdXNlclBsYXllcjtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGF3YWl0Q2FsbGJhY2sgPSByZXNvbHZlO1xuICAgICAgZXZlbnRzLmVtaXQoZXZlbnRzRW1pdHRlZC5VU0VSX1RVUk5fQkVHSU5TLCBudWxsKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBhd2FpdENvbXB1dGVyTW92ZSA9IGZ1bmN0aW9uIGF3YWl0Q29tcHV0ZXJNb3ZlKCkge1xuICAgIGN1cnJlbnRQbGF5ZXIgPSBjb21wdXRlclBsYXllcjtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGF3YWl0Q2FsbGJhY2sgPSByZXNvbHZlO1xuICAgICAgZXZlbnRzLmVtaXQoZXZlbnRzRW1pdHRlZC5DT01QVVRFUl9UVVJOX0JFR0lOUywgbnVsbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgbWFrZVVzZXJNb3ZlID0gZnVuY3Rpb24gbWFrZVVzZXJNb3ZlKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKCEoY3VycmVudFBsYXllciA9PT0gdXNlclBsYXllcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IFVzZXIgVHVybicpO1xuICAgIH1cbiAgICB1c2VyUGxheWVyLm1ha2VNb3ZlKGNvbXB1dGVyQm9hcmQsIGNvb3JkaW5hdGVzKTtcbiAgICBhd2FpdENhbGxiYWNrKCk7XG4gIH07XG5cbiAgY29uc3QgbWFrZUNvbXB1dGVyTW92ZSA9IGZ1bmN0aW9uIG1ha2VDb21wdXRlck1vdmUocmFuZG9tRm4pIHtcbiAgICBpZiAoIShjdXJyZW50UGxheWVyID09PSBjb21wdXRlclBsYXllcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IENvbXB1dGVyIFR1cm4nKTtcbiAgICB9XG4gICAgY29tcHV0ZXJQbGF5ZXIuYXV0b01ha2VNb3ZlKHVzZXJCb2FyZCwgcmFuZG9tRm4pO1xuICAgIGF3YWl0Q2FsbGJhY2soKTtcbiAgfTtcblxuICBjb25zdCBoYXNQbGF5ZXJXb24gPSBmdW5jdGlvbiBoYXNQbGF5ZXJXb24ocGxheWVyTmFtZSkge1xuICAgIGxldCBib2FyZDtcbiAgICBpZiAocGxheWVyTmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICBib2FyZCA9IGNvbXB1dGVyQm9hcmQ7XG4gICAgfVxuICAgIGlmIChwbGF5ZXJOYW1lID09PSAnY29tcHV0ZXInKSB7XG4gICAgICBib2FyZCA9IHVzZXJCb2FyZDtcbiAgICB9XG4gICAgaWYgKGJvYXJkLmFyZUFsbFNoaXBzU3VuaygpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGRlY2xhcmVXaW5uZXIgPSBmdW5jdGlvbiBkZWNsYXJlV2lubmVyKHBsYXllck5hbWUpIHtcbiAgICBldmVudHMuZW1pdChcbiAgICAgIGV2ZW50c0VtaXR0ZWQuUExBWUVSX0hBU19XT04sXG4gICAgICB7IHdpbm5lcjogcGxheWVyTmFtZSB9LFxuICAgICk7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnQgPSBhc3luYyBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1hd2FpdC1pbi1sb29wICovXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSB1c2VyUGxheWVyO1xuICAgICAgYXdhaXQgYXdhaXRVc2VyTW92ZSgpO1xuICAgICAgaWYgKGhhc1BsYXllcldvbigndXNlcicpKSB7XG4gICAgICAgIGRlY2xhcmVXaW5uZXIoJ3VzZXInKTtcbiAgICAgICAgY3VycmVudFBsYXllciA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY3VycmVudFBsYXllciA9IGNvbXB1dGVyUGxheWVyO1xuICAgICAgYXdhaXQgYXdhaXRDb21wdXRlck1vdmUoKTtcbiAgICAgIGlmIChoYXNQbGF5ZXJXb24oJ2NvbXB1dGVyJykpIHtcbiAgICAgICAgZGVjbGFyZVdpbm5lcignY29tcHV0ZXInKTtcbiAgICAgICAgY3VycmVudFBsYXllciA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCByZXNldEdhbWUgPSBmdW5jdGlvbiByZXNldEdhbWUoKSB7XG4gICAgdXNlckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKHhMZW5ndGgsIHlMZW5ndGgpO1xuICAgIGNvbXB1dGVyQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoeExlbmd0aCwgeUxlbmd0aCk7XG4gIH07XG5cbiAgY29uc3QgZ2VuZXJhdGVTaGlwQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZW5lcmF0ZVNoaXBDb29yZGluYXRlcyhvcmllbnRhdGlvbiwgb3JpZ2luLCBsZW5ndGgpIHtcbiAgICBjb25zdCBjb29yZGluYXRlc0xpc3QgPSBbXTtcbiAgICBjb29yZGluYXRlc0xpc3QucHVzaCh7IC4uLm9yaWdpbiB9KTtcbiAgICBsZXQgY29uc3RhbnRWYXJpYWJsZTtcbiAgICBsZXQgY2hhbmdpbmdWYXJpYWJsZTtcbiAgICBpZiAob3JpZW50YXRpb24gPT09ICd1cCcpIHtcbiAgICAgIGNvbnN0YW50VmFyaWFibGUgPSAneCc7XG4gICAgICBjaGFuZ2luZ1ZhcmlhYmxlID0gJ3knO1xuICAgIH0gZWxzZSBpZiAob3JpZW50YXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgIGNvbnN0YW50VmFyaWFibGUgPSAneSc7XG4gICAgICBjaGFuZ2luZ1ZhcmlhYmxlID0gJ3gnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBvcmllbnRhdGlvbicpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBuZXdDb29yZGluYXRlcyA9IHtcbiAgICAgICAgW2NvbnN0YW50VmFyaWFibGVdOiBvcmlnaW5bY29uc3RhbnRWYXJpYWJsZV0sXG4gICAgICAgIFtjaGFuZ2luZ1ZhcmlhYmxlXTogKG9yaWdpbltjaGFuZ2luZ1ZhcmlhYmxlXSArIGkpLFxuICAgICAgfTtcbiAgICAgIGNvb3JkaW5hdGVzTGlzdC5wdXNoKG5ld0Nvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzTGlzdDtcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVNoaXBDb29yZGluYXRlcyhcbiAgICByYW5kb21GbixcbiAgICBwbGF5ZXJOYW1lLFxuICAgIGxlbmd0aCxcbiAgKSB7XG4gICAgbGV0IG9yaWVudGF0aW9uO1xuICAgIGxldCBwZXJtaXR0ZWRYTGVuZ3RoRm9yT3JpZ2luO1xuICAgIGxldCBwZXJtaXR0ZWRZTGVuZ3RoRm9yT3JpZ2luO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uTnVtYmVyID0gTWF0aC5mbG9vcihyYW5kb21GbigpICogMik7XG4gICAgc3dpdGNoIChvcmllbnRhdGlvbk51bWJlcikge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBvcmllbnRhdGlvbiA9ICdyaWdodCc7XG4gICAgICAgIHBlcm1pdHRlZFhMZW5ndGhGb3JPcmlnaW4gPSB4TGVuZ3RoIC0gbGVuZ3RoICsgMTtcbiAgICAgICAgcGVybWl0dGVkWUxlbmd0aEZvck9yaWdpbiA9IHlMZW5ndGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBvcmllbnRhdGlvbiA9ICd1cCc7XG4gICAgICAgIHBlcm1pdHRlZFhMZW5ndGhGb3JPcmlnaW4gPSB4TGVuZ3RoO1xuICAgICAgICBwZXJtaXR0ZWRZTGVuZ3RoRm9yT3JpZ2luID0geUxlbmd0aCAtIGxlbmd0aCArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luID0ge1xuICAgICAgeDogTWF0aC5mbG9vcihyYW5kb21GbigpICogcGVybWl0dGVkWExlbmd0aEZvck9yaWdpbiksXG4gICAgICB5OiBNYXRoLmZsb29yKHJhbmRvbUZuKCkgKiBwZXJtaXR0ZWRZTGVuZ3RoRm9yT3JpZ2luKSxcbiAgICB9O1xuICAgIGNvbnN0IHNoaXAgPSBnZW5lcmF0ZVNoaXBDb29yZGluYXRlcyhvcmllbnRhdGlvbiwgb3JpZ2luLCBsZW5ndGgpO1xuXG4gICAgY29uc3QgYm9hcmQgPSBnZXRDb3JyZXNwb25kaW5nQm9hcmQocGxheWVyTmFtZSk7XG5cbiAgICBpZiAoYm9hcmQuYXJlQ29vcmRpbmF0ZXNWYWxpZEZvclNoaXAoc2hpcCkpIHtcbiAgICAgIHJldHVybiBzaGlwO1xuICAgIH1cbiAgICAvLyB0cnkgYWdhaW4gYXQgZ2VuZXJhdGluZyBhIG5ldyBzaGlwIGlmIHRoZSBnZW5lcmF0ZWQgY29vcmRpbmF0ZXMgYXJlIG5vdCB2YWxpZFxuICAgIHJldHVybiBnZW5lcmF0ZVJhbmRvbVNoaXBDb29yZGluYXRlcyhyYW5kb21GbiwgcGxheWVyTmFtZSwgbGVuZ3RoKTtcbiAgfTtcblxuICBjb25zdCBnZW5lcmF0ZUFuZFBsYWNlQ29tcHV0ZXJTaGlwcyA9IGZ1bmN0aW9uIGdlbmVyYXRlQW5kUGxhY2VDb21wdXRlclNoaXBzKHJhbmRvbUZuKSB7XG4gICAgY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMocmFuZG9tRm4sICdjb21wdXRlcicsIDIpKTtcbiAgICBjb21wdXRlckJvYXJkLnBsYWNlU2hpcChnZW5lcmF0ZVJhbmRvbVNoaXBDb29yZGluYXRlcyhyYW5kb21GbiwgJ2NvbXB1dGVyJywgMykpO1xuICAgIGNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKGdlbmVyYXRlUmFuZG9tU2hpcENvb3JkaW5hdGVzKHJhbmRvbUZuLCAnY29tcHV0ZXInLCAzKSk7XG4gICAgY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMocmFuZG9tRm4sICdjb21wdXRlcicsIDQpKTtcbiAgICBjb21wdXRlckJvYXJkLnBsYWNlU2hpcChnZW5lcmF0ZVJhbmRvbVNoaXBDb29yZGluYXRlcyhyYW5kb21GbiwgJ2NvbXB1dGVyJywgNSkpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcGxhY2VTaGlwLFxuICAgIGdldEJvYXJkU3RhdGUsXG4gICAgc3RhcnQsXG4gICAgbWFrZVVzZXJNb3ZlLFxuICAgIG1ha2VDb21wdXRlck1vdmUsXG4gICAgcmVzZXRHYW1lLFxuICAgIGdlbmVyYXRlU2hpcENvb3JkaW5hdGVzLFxuICAgIGdlbmVyYXRlUmFuZG9tU2hpcENvb3JkaW5hdGVzLFxuICAgIGdlbmVyYXRlQW5kUGxhY2VDb21wdXRlclNoaXBzLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlR2FtZTtcbiIsImltcG9ydCBjcmVhdGVTaGlwIGZyb20gJy4vY3JlYXRlU2hpcCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUdhbWVib2FyZCh4TGVuZ3RoLCB5TGVuZ3RoKSB7XG4gIGlmICghKHhMZW5ndGggPiAwKSB8fCAhKHlMZW5ndGggPiAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBwb3NpdGl2ZScpO1xuICB9XG5cbiAgY29uc3Qgc2hpcHNEZXRhaWxzID0gW107XG4gIGNvbnN0IGhpdENvb3JkaW5hdGVzTGlzdCA9IFtdO1xuICBjb25zdCBtaXNzZWRDb29yZGluYXRlc0xpc3QgPSBbXTtcblxuICBjb25zdCBnZXRYTGVuZ3RoID0gZnVuY3Rpb24gZ2V0WExlbmd0aCgpIHtcbiAgICByZXR1cm4geExlbmd0aDtcbiAgfTtcblxuICBjb25zdCBnZXRZTGVuZ3RoID0gZnVuY3Rpb24gZ2V0WUxlbmd0aCgpIHtcbiAgICByZXR1cm4geUxlbmd0aDtcbiAgfTtcblxuICBjb25zdCB2ZXJpZnlDb29yZGluYXRlc0FyZVZhbGlkID0gZnVuY3Rpb24gdmVyaWZ5Q29vcmRpbmF0ZXNBcmVWYWxpZChjb29yZGluYXRlcykge1xuICAgIGlmICghKGNvb3JkaW5hdGVzLnggPCB4TGVuZ3RoICYmIGNvb3JkaW5hdGVzLnkgPCB5TGVuZ3RoKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0Nvb3JkaW5hdGVzIGFyZSBpbnZhbGlkJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IGZ1bmN0aW9uIHBsYWNlU2hpcChjb29yZGluYXRlc0xpc3QpIHtcbiAgICBjb25zdCBuZXdTaGlwID0gY3JlYXRlU2hpcChjb29yZGluYXRlc0xpc3QubGVuZ3RoKTtcbiAgICBjb25zdCBjb29yZGluYXRlc0xpc3RDb3B5ID0gW107XG5cbiAgICBjb29yZGluYXRlc0xpc3QuZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIHZlcmlmeUNvb3JkaW5hdGVzQXJlVmFsaWQoY29vcmRpbmF0ZXMpO1xuICAgICAgY29vcmRpbmF0ZXNMaXN0Q29weS5wdXNoKHsgLi4uY29vcmRpbmF0ZXMgfSk7XG4gICAgfSk7XG5cbiAgICBzaGlwc0RldGFpbHMucHVzaCh7XG4gICAgICBzaGlwOiBuZXdTaGlwLFxuICAgICAgY29vcmRpbmF0ZXNMaXN0OiBjb29yZGluYXRlc0xpc3RDb3B5LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSBmdW5jdGlvbiByZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKSB7XG4gICAgdmVyaWZ5Q29vcmRpbmF0ZXNBcmVWYWxpZChjb29yZGluYXRlcyk7XG4gICAgaGl0Q29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKGhpdENvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBpZiAoY29vcmRpbmF0ZXMueCA9PT0gaGl0Q29vcmRpbmF0ZXMueCAmJiBjb29yZGluYXRlcy55ID09PSBoaXRDb29yZGluYXRlcy55KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgcHJldmlvdXNseSBhdHRhY2tlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWlzc2VkQ29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKG1pc3NlZENvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBpZiAoY29vcmRpbmF0ZXMueCA9PT0gbWlzc2VkQ29vcmRpbmF0ZXMueCAmJiBjb29yZGluYXRlcy55ID09PSBtaXNzZWRDb29yZGluYXRlcy55KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgcHJldmlvdXNseSBhdHRhY2tlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxldCBoaXQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzRGV0YWlscy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzTGlzdCA9IHNoaXBzRGV0YWlsc1tpXS5jb29yZGluYXRlc0xpc3Q7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNoaXBDb29yZGluYXRlc0xpc3QubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzID0gc2hpcENvb3JkaW5hdGVzTGlzdFtqXTtcbiAgICAgICAgY29uc3QgZG9Db29yZGluYXRlc01hdGNoID0gKFxuICAgICAgICAgIHNoaXBDb29yZGluYXRlcy54ID09PSBjb29yZGluYXRlcy54XG4gICAgICAgICAgJiYgc2hpcENvb3JkaW5hdGVzLnkgPT09IGNvb3JkaW5hdGVzLnlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGRvQ29vcmRpbmF0ZXNNYXRjaCkge1xuICAgICAgICAgIGhpdENvb3JkaW5hdGVzTGlzdC5wdXNoKHsgLi4uY29vcmRpbmF0ZXMgfSk7XG4gICAgICAgICAgc2hpcHNEZXRhaWxzW2ldLnNoaXAuaGl0KGopO1xuICAgICAgICAgIGhpdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFoaXQpIHtcbiAgICAgIG1pc3NlZENvb3JkaW5hdGVzTGlzdC5wdXNoKHsgLi4uY29vcmRpbmF0ZXMgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldEhpdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gZ2V0SGl0Q29vcmRpbmF0ZXMoKSB7XG4gICAgY29uc3QgaGl0Q29vcmRpbmF0ZXNDb3B5ID0gW107XG4gICAgaGl0Q29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKGhpdENvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBoaXRDb29yZGluYXRlc0NvcHkucHVzaCh7IC4uLmhpdENvb3JkaW5hdGVzIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGhpdENvb3JkaW5hdGVzQ29weTtcbiAgfTtcblxuICBjb25zdCBnZXRNaXNzZWRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldE1pc3NlZENvb3JkaW5hdGVzKCkge1xuICAgIGNvbnN0IG1pc3NlZENvb3JkaW5hdGVzQ29weSA9IFtdO1xuICAgIG1pc3NlZENvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChtaXNzZWRDb29yZGluYXRlcykgPT4ge1xuICAgICAgbWlzc2VkQ29vcmRpbmF0ZXNDb3B5LnB1c2goeyAuLi5taXNzZWRDb29yZGluYXRlcyB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBtaXNzZWRDb29yZGluYXRlc0NvcHk7XG4gIH07XG5cbiAgY29uc3QgZ2V0UGxhY2VkU2hpcHMgPSBmdW5jdGlvbiBnZXRQbGFjZWRTaGlwcygpIHtcbiAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICBzaGlwc0RldGFpbHMuZm9yRWFjaCgoeyBjb29yZGluYXRlc0xpc3QgfSkgPT4ge1xuICAgICAgY29uc3QgY29vcmRpbmF0ZXNMaXN0Q29weSA9IFtdO1xuICAgICAgY29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICAgIGNvb3JkaW5hdGVzTGlzdENvcHkucHVzaCh7IC4uLmNvb3JkaW5hdGVzIH0pO1xuICAgICAgfSk7XG4gICAgICBzaGlwQ29vcmRpbmF0ZXMucHVzaChjb29yZGluYXRlc0xpc3RDb3B5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gc2hpcENvb3JkaW5hdGVzO1xuICB9O1xuXG4gIGNvbnN0IGFyZUFsbFNoaXBzU3VuayA9IGZ1bmN0aW9uIGFyZUFsbFNoaXBzU3VuaygpIHtcbiAgICBsZXQgYWxsU3VuayA9IHRydWU7XG4gICAgc2hpcHNEZXRhaWxzLmZvckVhY2goKHNoaXBEZXRhaWxzKSA9PiB7XG4gICAgICBpZiAoIXNoaXBEZXRhaWxzLnNoaXAuaXNTdW5rKCkpIHtcbiAgICAgICAgYWxsU3VuayA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhbGxTdW5rO1xuICB9O1xuXG4gIGNvbnN0IGFyZUNvb3JkaW5hdGVzVmFsaWRGb3JTaGlwID0gZnVuY3Rpb24gYXJlQ29vcmRpbmF0ZXNWYWxpZEZvclNoaXAoc2hpcENvb3JkaW5hdGVzKSB7XG4gICAgbGV0IHZhbGlkID0gdHJ1ZTtcbiAgICBzaGlwQ29vcmRpbmF0ZXMuZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIHNoaXBzRGV0YWlscy5mb3JFYWNoKCh7IGNvb3JkaW5hdGVzTGlzdCB9KSA9PiB7XG4gICAgICAgIGNvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKCh7IHgsIHkgfSkgPT4ge1xuICAgICAgICAgIGlmICh4ID09PSBjb29yZGluYXRlcy54ICYmIHkgPT09IGNvb3JkaW5hdGVzLnkpIHtcbiAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFhMZW5ndGgsXG4gICAgZ2V0WUxlbmd0aCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIHBsYWNlU2hpcCxcbiAgICBnZXRIaXRDb29yZGluYXRlcyxcbiAgICBnZXRNaXNzZWRDb29yZGluYXRlcyxcbiAgICBnZXRQbGFjZWRTaGlwcyxcbiAgICBhcmVBbGxTaGlwc1N1bmssXG4gICAgYXJlQ29vcmRpbmF0ZXNWYWxpZEZvclNoaXAsXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUdhbWVib2FyZDtcbiIsImNvbnN0IGNyZWF0ZVBsYXllciA9IGZ1bmN0aW9uIGNyZWF0ZVBsYXllcihuYW1lKSB7XG4gIGNvbnN0IG1ha2VNb3ZlID0gZnVuY3Rpb24gbWFrZU1vdmUoZ2FtZUJvYXJkLCBjb29yZGluYXRlcykge1xuICAgIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgfTtcblxuICBjb25zdCBnZXROYW1lID0gZnVuY3Rpb24gZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gbmFtZTtcbiAgfTtcblxuICBjb25zdCBhcmVDb29yZGluYXRlc0FscmVhZHlBdHRhY2tlZCA9IGZ1bmN0aW9uIGFyZUNvb3JkaW5hdGVzQWxyZWFkeUF0dGFja2VkKFxuICAgIGdhbWVCb2FyZCxcbiAgICBjb29yZGluYXRlcyxcbiAgKSB7XG4gICAgbGV0IGFscmVhZHlBdHRhY2tlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGhpdENvb3JkaW5hdGVzID0gZ2FtZUJvYXJkLmdldEhpdENvb3JkaW5hdGVzKCk7XG4gICAgaGl0Q29vcmRpbmF0ZXMuZm9yRWFjaCgoeyB4LCB5IH0pID0+IHtcbiAgICAgIGlmICh4ID09PSBjb29yZGluYXRlcy54ICYmIHkgPT09IGNvb3JkaW5hdGVzLnkpIHtcbiAgICAgICAgYWxyZWFkeUF0dGFja2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBtaXNzZWRDb29yZGluYXRlcyA9IGdhbWVCb2FyZC5nZXRNaXNzZWRDb29yZGluYXRlcygpO1xuICAgIG1pc3NlZENvb3JkaW5hdGVzLmZvckVhY2goKHsgeCwgeSB9KSA9PiB7XG4gICAgICBpZiAoeCA9PT0gY29vcmRpbmF0ZXMueCAmJiB5ID09PSBjb29yZGluYXRlcy55KSB7XG4gICAgICAgIGFscmVhZHlBdHRhY2tlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGFscmVhZHlBdHRhY2tlZDtcbiAgfTtcblxuICBjb25zdCBhdXRvTWFrZU1vdmUgPSBmdW5jdGlvbiBhdXRvTWFrZU1vdmUoZ2FtZUJvYXJkLCByYW5kb21Gbikge1xuICAgIGxldCB4VmFsdWU7XG4gICAgbGV0IHlWYWx1ZTtcbiAgICBkbyB7XG4gICAgICB4VmFsdWUgPSBNYXRoLmZsb29yKGdhbWVCb2FyZC5nZXRYTGVuZ3RoKCkgKiByYW5kb21GbigpKTtcbiAgICAgIHlWYWx1ZSA9IE1hdGguZmxvb3IoZ2FtZUJvYXJkLmdldFlMZW5ndGgoKSAqIHJhbmRvbUZuKCkpO1xuICAgIH0gd2hpbGUgKGFyZUNvb3JkaW5hdGVzQWxyZWFkeUF0dGFja2VkKGdhbWVCb2FyZCwgeyB4OiB4VmFsdWUsIHk6IHlWYWx1ZSB9KSk7XG5cbiAgICBnYW1lQm9hcmQucmVjZWl2ZUF0dGFjayh7IHg6IHhWYWx1ZSwgeTogeVZhbHVlIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgbWFrZU1vdmUsXG4gICAgZ2V0TmFtZSxcbiAgICBhdXRvTWFrZU1vdmUsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVQbGF5ZXI7XG4iLCJmdW5jdGlvbiBjcmVhdGVTaGlwKGxlbmd0aCkge1xuICBpZiAoIShsZW5ndGggPiAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdMZW5ndGggbXVzdCBiZSBwb3NpdGl2ZScpO1xuICB9XG4gIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgcG9zaXRpb25zLnB1c2goZmFsc2UpO1xuICB9XG5cbiAgY29uc3QgaGl0ID0gZnVuY3Rpb24gaGl0KHBvc2l0aW9uKSB7XG4gICAgaWYgKHBvc2l0aW9uID49IGxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSBhcmd1bWVudCBtdXN0IGJlIGJlbG93IHRoZSBTaGlwIGxlbmd0aCcpO1xuICAgIH1cbiAgICBwb3NpdGlvbnNbcG9zaXRpb25dID0gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBpc1N1bmsgPSBmdW5jdGlvbiBpc1N1bmsoKSB7XG4gICAgbGV0IGlzQWxsSGl0ID0gdHJ1ZTtcbiAgICBwb3NpdGlvbnMuZm9yRWFjaCgocG9zaXRpb24pID0+IHtcbiAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgaXNBbGxIaXQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBpc0FsbEhpdDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGhpdCxcbiAgICBpc1N1bmssXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVNoaXA7XG4iLCJjb25zdCBldmVudHNMaXN0ID0ge307XG5cbmZ1bmN0aW9uIG9uKGV2ZW50TmFtZSwgZm4pIHtcbiAgZXZlbnRzTGlzdFtldmVudE5hbWVdID0gZXZlbnRzTGlzdFtldmVudE5hbWVdIHx8IFtdO1xuICBldmVudHNMaXN0W2V2ZW50TmFtZV0ucHVzaChmbik7XG59XG5cbmZ1bmN0aW9uIG9mZihldmVudE5hbWUsIGZuKSB7XG4gIGlmIChldmVudHNMaXN0W2V2ZW50TmFtZV0pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50c0xpc3RbZXZlbnROYW1lXS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKGV2ZW50c0xpc3RbZXZlbnROYW1lXVtpXSA9PT0gZm4pIHtcbiAgICAgICAgZXZlbnRzTGlzdFtldmVudE5hbWVdLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXQoZXZlbnROYW1lLCBkYXRhKSB7XG4gIGlmIChldmVudHNMaXN0W2V2ZW50TmFtZV0pIHtcbiAgICBldmVudHNMaXN0W2V2ZW50TmFtZV0uZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgIGZuKGRhdGEpO1xuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGV2ZW50cyA9IHtcbiAgb24sXG4gIG9mZixcbiAgZW1pdCxcbn07XG5cbmV4cG9ydCB7IGV2ZW50cyBhcyBkZWZhdWx0IH07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXguanNcIik7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdleHBvcnRzJyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG4iXSwic291cmNlUm9vdCI6IiJ9