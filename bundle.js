/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./src/reset.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/reset.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}", "",{"version":3,"sources":["webpack://./src/reset.css"],"names":[],"mappings":"AAAA;;;CAGC;;AAED;;;;;;;;;;;;;CAaC,SAAS;CACT,UAAU;CACV,SAAS;CACT,eAAe;CACf,aAAa;CACb,wBAAwB;AACzB;AACA,gDAAgD;AAChD;;CAEC,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;CACC,gBAAgB;AACjB;AACA;CACC,YAAY;AACb;AACA;;CAEC,WAAW;CACX,aAAa;AACd;AACA;CACC,yBAAyB;CACzB,iBAAiB;AAClB","sourcesContent":["/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/style.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "html {\n  font-size: 10px;\n}\n\n:root {\n  --off-white: #efefef;\n  --background-blue: #000240;\n}\n\n.root {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--background-blue);\n  color: var(--off-white);\n  min-height: 100vh;\n  box-sizing: bor;\n  padding: 3rem 3rem;\n}\n\nheader {\n  font-size: 3.5rem;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\nheader .new-game {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n.information {\n  background-color: rgb(200, 200,200);\n  color: black;\n  padding: 2.5rem 3.5rem;\n  margin-top: 5rem;\n  border-radius: 1.5rem;\n  font-size: 2rem;\n  font-weight: 500;\n}\n\n.main-game-wrapper {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 4rem 2rem;\n}\n\n.main-game-wrapper h2 {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 1rem;\n}\n\n.player-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n  margin-bottom: 5rem;\n}\n\n.computer-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n}\n\n.grid {\n  display: inline-grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 0.2rem;\n}\n\n.grid .cell {\n  width: 5rem;\n  height: 5rem;\n  border-radius: 8%;\n  box-sizing: border-box;\n  border: 1px solid white;\n}\n\n.player-section-wrapper .options {\n  margin-top: 2rem;\n}\n\n.player-section-wrapper .options button {\n  margin-top: 1rem;\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n/* Ship Placement Mode */\n.cell.already-placed {\n  background-color:rgb(180, 180,180)\n}\n\n.cell.invalid-placement {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n\n.cell.player-selection {\n  background-color: rgba(180, 180,180, 0.7)\n}\n\n/* Game Mode */\n\n.cell {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.cell.hit::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: red;\n}\n\n.cell.missed::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: white;\n}\n\n.cell.targeting {\n  background-color: #00693e;\n}\n\n.cell.invalid-targeting {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n", "",{"version":3,"sources":["webpack://./src/style.css"],"names":[],"mappings":"AAAA;EACE,eAAe;AACjB;;AAEA;EACE,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;EACE,mCAAmC;EACnC,wCAAwC;EACxC,uBAAuB;EACvB,iBAAiB;EACjB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,iBAAiB;EACjB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,mCAAmC;EACnC,kCAAkC;EAClC,YAAY;EACZ,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;EACpB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,mCAAmC;EACnC,YAAY;EACZ,sBAAsB;EACtB,gBAAgB;EAChB,qBAAqB;EACrB,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,uBAAuB;EACvB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,oBAAoB;EACpB,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;EAChB,mCAAmC;EACnC,kCAAkC;EAClC,YAAY;EACZ,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;EACpB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA,wBAAwB;AACxB;EACE;AACF;;AAEA;EACE,sCAAsC;AACxC;;AAEA;EACE;AACF;;AAEA,cAAc;;AAEd;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,aAAa;EACb,kBAAkB;EAClB,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,aAAa;EACb,kBAAkB;EAClB,uBAAuB;AACzB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,sCAAsC;AACxC","sourcesContent":["html {\n  font-size: 10px;\n}\n\n:root {\n  --off-white: #efefef;\n  --background-blue: #000240;\n}\n\n.root {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--background-blue);\n  color: var(--off-white);\n  min-height: 100vh;\n  box-sizing: bor;\n  padding: 3rem 3rem;\n}\n\nheader {\n  font-size: 3.5rem;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\nheader .new-game {\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n.information {\n  background-color: rgb(200, 200,200);\n  color: black;\n  padding: 2.5rem 3.5rem;\n  margin-top: 5rem;\n  border-radius: 1.5rem;\n  font-size: 2rem;\n  font-weight: 500;\n}\n\n.main-game-wrapper {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 4rem 2rem;\n}\n\n.main-game-wrapper h2 {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 1rem;\n}\n\n.player-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n  margin-bottom: 5rem;\n}\n\n.computer-section-wrapper {\n  margin-left: 20rem;\n  margin-right: 20rem;\n}\n\n.grid {\n  display: inline-grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 0.2rem;\n}\n\n.grid .cell {\n  width: 5rem;\n  height: 5rem;\n  border-radius: 8%;\n  box-sizing: border-box;\n  border: 1px solid white;\n}\n\n.player-section-wrapper .options {\n  margin-top: 2rem;\n}\n\n.player-section-wrapper .options button {\n  margin-top: 1rem;\n  font-family: 'Orbitron', sans-serif;\n  background-color: var(--off-white);\n  color: black;\n  border: none;\n  font-size: 1.5rem;\n  padding: 1.5rem 2rem;\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n/* Ship Placement Mode */\n.cell.already-placed {\n  background-color:rgb(180, 180,180)\n}\n\n.cell.invalid-placement {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n\n.cell.player-selection {\n  background-color: rgba(180, 180,180, 0.7)\n}\n\n/* Game Mode */\n\n.cell {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.cell.hit::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: red;\n}\n\n.cell.missed::after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: 50%;\n  background-color: white;\n}\n\n.cell.targeting {\n  background-color: #00693e;\n}\n\n.cell.invalid-targeting {\n  background-color: rgba(250, 0, 0, 0.5);  \n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \************************************************************************/
/***/ ((module) => {



function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

module.exports = function cssWithMappingToString(item) {
  var _item = _slicedToArray(item, 4),
      content = _item[1],
      cssMapping = _item[3];

  if (typeof btoa === 'function') {
    // eslint-disable-next-line no-undef
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
};

/***/ }),

/***/ "./src/reset.css":
/*!***********************!*\
  !*** ./src/reset.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./reset.css */ "./node_modules/css-loader/dist/cjs.js!./src/reset.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./style.css */ "./node_modules/css-loader/dist/cjs.js!./src/style.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _reset_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reset.css */ "./src/reset.css");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./style.css */ "./src/style.css");
/* harmony import */ var _modules_createGame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/createGame */ "./src/modules/createGame.js");
/* harmony import */ var _modules_createDOMController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/createDOMController */ "./src/modules/createDOMController.js");
/* harmony import */ var _modules_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/events */ "./src/modules/events.js");






const DOMController = (0,_modules_createDOMController__WEBPACK_IMPORTED_MODULE_3__.default)((0,_modules_createGame__WEBPACK_IMPORTED_MODULE_2__.default)(_modules_events__WEBPACK_IMPORTED_MODULE_4__.default));
DOMController.initialize();


/***/ }),

/***/ "./src/modules/createDOMController.js":
/*!********************************************!*\
  !*** ./src/modules/createDOMController.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events */ "./src/modules/events.js");


function createDOMController(game) {
  const playerGrid = document.querySelector('.player-section-wrapper .grid');
  const computerGrid = document.querySelector('.computer-section-wrapper .grid');

  /* STATE */

  let placedShips = [];
  let selectionLength = null;
  let selectionOrientation = 'up';
  let isThereAnotherShip = true;
  const shipsToPlace = (function createShipsToPlace() {
    const items = [5, 4, 3, 3, 2];
    let currentIndex = 0;
    const nextShipLength = function nextShipLength() {
      if (currentIndex >= items.length) {
        selectionLength = null;
        isThereAnotherShip = false;
      } else {
        selectionLength = items[currentIndex];
        currentIndex += 1;
      }
    };
    const reset = function reset() {
      isThereAnotherShip = true;
      currentIndex = 0;
      nextShipLength();
    };
    return {
      nextShipLength,
      reset,
    };
  }());

  const setInformation = function setInformation(message) {
    document.querySelector('.information').textContent = message;
  };
  const getCell = function getCell(grid, coordinates) {
    const { x, y } = coordinates;
    const cell = grid.querySelector(`.cell[data-cell-x="${x}"][data-cell-y="${y}"]`);
    if (cell === null) throw new Error('Cell not found');
    return cell;
  };

  let canUserMove = null;

  const removeAllPlacementClasses = function removeAllPlacementClasses() {
    playerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('already-placed');
    });
  };

  /* SELECTION MODE FUNCTIONS */

  const isCellAlreadyPlaced = function isCellAlreadyPlaced(coordinates, alreadyPlaced) {
    let placed = false;
    alreadyPlaced.forEach((ship) => {
      ship.forEach(({ x, y }) => {
        if (x === coordinates.x && y === coordinates.y) {
          placed = true;
        }
      });
    });
    return placed;
  };

  // returns the coordinates for the player's selection
  const getSelection = function getSelection(mouseLocation, orientation, length) {
    let changingAxis;
    let unchangingAxis;
    const coordinatesList = [];
    switch (orientation) {
      case 'up':
        changingAxis = 'y';
        unchangingAxis = 'x';
        break;
      case 'right':
        changingAxis = 'x';
        unchangingAxis = 'y';
        break;
      default:
    }
    for (let i = 0; i < length; i += 1) {
      const coordinates = {
        [changingAxis]: mouseLocation[changingAxis] + i,
        [unchangingAxis]: mouseLocation[unchangingAxis],
      };
      coordinatesList.push(coordinates);
    }
    return coordinatesList;
  };

  const renderCurrentSelection = function renderCurrentSelection(
    mouseLocation,
    orientation,
    length,
  ) {
    const coordinatesList = getSelection(mouseLocation, orientation, length);

    let isValidSelection = true;
    coordinatesList.forEach((coordinates) => {
      if (coordinates.x < 0 || coordinates.y < 0) {
        isValidSelection = false;
      }
      if (coordinates.x > 7 || coordinates.y > 7) {
        isValidSelection = false;
      }
      if (isCellAlreadyPlaced(coordinates, placedShips)) {
        isValidSelection = false;
      }
    });
    if (isValidSelection) {
      coordinatesList.forEach((coordinates) => {
        getCell(playerGrid, coordinates).classList.add('player-selection');
      });
    } else {
      getCell(playerGrid, mouseLocation).classList.add('invalid-placement');
    }
  };

  /* alters the playerGrid to show already placed ships */
  const renderPlacedShips = function renderInSelectMode(alreadyPlaced) {
    alreadyPlaced.forEach((ship) => {
      ship.forEach((coordinates) => {
        const cell = getCell(playerGrid, coordinates);
        cell.classList.add('already-placed');
      });
    });
  };

  const getCellCoordinates = function getCellCoordinates(cell) {
    const x = Number(cell.getAttribute('data-cell-x'));
    const y = Number(cell.getAttribute('data-cell-y'));
    const coordinates = {
      x,
      y,
    };
    return coordinates;
  };

  // adds ship to state
  const onClickOfCellDuringSelection = function onClickOfCellDuringSelection(event) {
    if (!isThereAnotherShip) {
      return;
    }
    const cell = event.target;
    const mouseLocation = getCellCoordinates(cell);
    const coordinatesList = getSelection(mouseLocation, selectionOrientation, selectionLength);
    let isValidSelection = true;
    coordinatesList.forEach((coordinates) => {
      if (coordinates.x < 0 || coordinates.y < 0) {
        isValidSelection = false;
      }
      if (coordinates.x > 7 || coordinates.y > 7) {
        isValidSelection = false;
      }
      if (isCellAlreadyPlaced(coordinates, placedShips)) {
        isValidSelection = false;
      }
    });
    if (isValidSelection) {
      placedShips.push(coordinatesList);
      renderPlacedShips(placedShips);
      shipsToPlace.nextShipLength();
    }
  };

  /* goes through all the cells in the player's grid to remove classes that indicate placed
  ships and selection */
  const removeAllSelectionClasses = function removeAllSelectionClasses() {
    playerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('player-selection');
      cell.classList.remove('invalid-placement');
    });
  };

  const onMouseEnterCellDuringSelection = function onMouseEnterCellDuringSelection(event) {
    if (!isThereAnotherShip) {
      return;
    }
    const cell = event.target;
    const coordinates = getCellCoordinates(cell);
    renderPlacedShips(placedShips);
    renderCurrentSelection(coordinates, selectionOrientation, selectionLength, placedShips);
  };

  const onMouseLeaveCellDuringSelection = function onMouseLeaveCellDuringSelection(event) {
    removeAllSelectionClasses();
  };

  // toggles orientation
  const onClickOfChangeOrientation = function onClickOfChangeOrientation() {
    if (selectionOrientation === 'up') {
      selectionOrientation = 'right';
    } else {
      selectionOrientation = 'up';
    }
  };

  const onClickOfResetDuringSelection = function onClickOfResetDuringSelection() {
    placedShips = [];
    removeAllPlacementClasses();
    shipsToPlace.reset();
  };

  const removePlayerSelectionEventListeners = function removePlayerSelectionEventListeners() {
    const cells = playerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.removeEventListener('mouseenter', onMouseEnterCellDuringSelection);
      cell.removeEventListener('mouseleave', onMouseLeaveCellDuringSelection);
      cell.removeEventListener('click', onClickOfCellDuringSelection);
    });
  };

  const onClickOfStartDuringSelection = function onClickOfStartDuringSelection() {
    if (isThereAnotherShip) {
      setInformation('All ships must be placed before the game can begin!');
      return;
    }
    removePlayerSelectionEventListeners();
    document.querySelector('.options').style.visibility = 'hidden';
    placedShips.forEach((placedShip) => {
      game.placeShip('user', placedShip);
    });
    startGame(); // eslint-disable-line
  };

  const setUpPlayerSelectionEventListeners = function setUpPlayerSelectionEventListeners() {
    const cells = playerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.addEventListener('mouseenter', onMouseEnterCellDuringSelection);
      cell.addEventListener('mouseleave', onMouseLeaveCellDuringSelection);
      cell.addEventListener('click', onClickOfCellDuringSelection);
    });
  };

  /* GAME MODE FUNCTIONS */

  // removes hit and miss classes from both grids
  const removeAllHitAndMissClasses = function removeAllHitAndMissClasses() {
    playerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('hit');
      cell.classList.remove('missed');
    });
    computerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('hit');
      cell.classList.remove('missed');
    });
  };

  const updateBoardForFiredUponCells = function updateBoardForFiredUponCells(playerName) {
    let hitCoordinates;
    let missedCoordinates;
    let grid;
    if (playerName === 'user') {
      ({ hitCoordinates, missedCoordinates } = game.getBoardState('user'));
      grid = playerGrid;
    } else if (playerName === 'computer') {
      ({ hitCoordinates, missedCoordinates } = game.getBoardState('computer'));
      grid = computerGrid;
    } else {
      throw new Error('Invalid playerName');
    }
    hitCoordinates.forEach((coordinates) => {
      getCell(grid, coordinates).classList.add('hit');
    });
    missedCoordinates.forEach((coordinates) => {
      getCell(grid, coordinates).classList.add('missed');
    });
  };

  const hasCellBeenFiredUpon = function hasCellBeenFiredUpon(coordinates) {
    const { hitCoordinates, missedCoordinates } = game.getBoardState('computer');
    let firedUpon = false;
    hitCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        firedUpon = true;
      }
    });
    missedCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        firedUpon = true;
      }
    });
    return firedUpon;
  };

  const onClickOfCellDuringGame = function onClickOnCellDuringGame(event) {
    if (!canUserMove) {
      return;
    }
    const cell = event.target;
    const coordinates = getCellCoordinates(cell);
    if (hasCellBeenFiredUpon(coordinates)) {
      return;
    }
    game.makeUserMove(coordinates);
    updateBoardForFiredUponCells('computer');
    canUserMove = false;
  };

  const onUserTurnBegins = function onUserTurnBegins() {
    canUserMove = true;
  };

  const onComputerTurnBegins = function onComputerTurnBegins() {
    game.makeComputerMove(Math.random);
    updateBoardForFiredUponCells('user');
  };

  const removeAllTargetingClasses = function removeAllTargetingClasses() {
    computerGrid.querySelectorAll('.cell').forEach((cell) => {
      cell.classList.remove('targeting');
      cell.classList.remove('invalid-targeting');
    });
  };

  const onMouseEnterComputerCellDuringGame = function onMouseEnterComputerCellDuringGame(event) {
    const cell = event.target;
    if (hasCellBeenFiredUpon(getCellCoordinates(cell))) {
      cell.classList.add('invalid-targeting');
    } else {
      cell.classList.add('targeting');
    }
  };

  const onMouseLeaveComputerCellDuringGame = function onMouseLeaveComputerCellDuringGame() {
    removeAllTargetingClasses();
  };

  const setUpGameModeEventListeners = function setUpGameModeEventListeners() {
    const cells = computerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.addEventListener('mouseenter', onMouseEnterComputerCellDuringGame);
      cell.addEventListener('mouseleave', onMouseLeaveComputerCellDuringGame);
      cell.addEventListener('click', onClickOfCellDuringGame);
    });

    _events__WEBPACK_IMPORTED_MODULE_0__.default.on('USER_TURN_BEGINS', onUserTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.on('COMPUTER_TURN_BEGINS', onComputerTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.on('PLAYER_HAS_WON', onPlayerHasWon);  // eslint-disable-line
  };

  const removeGameModeEventListeners = function removeGameModeEventListeners() {
    const cells = computerGrid.querySelectorAll('.cell');
    cells.forEach((cell) => {
      cell.removeEventListener('mouseenter', onMouseEnterComputerCellDuringGame);
      cell.removeEventListener('mouseleave', onMouseLeaveComputerCellDuringGame);
      cell.removeEventListener('click', onClickOfCellDuringGame); // eslint-disable-line
    });

    _events__WEBPACK_IMPORTED_MODULE_0__.default.off('USER_TURN_BEGINS', onUserTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.off('COMPUTER_TURN_BEGINS', onComputerTurnBegins);
    _events__WEBPACK_IMPORTED_MODULE_0__.default.off('PLAYER_HAS_WON', onPlayerHasWon); // eslint-disable-line
  };

  const onClickOfNewGame = function onClickOfNewGame() {
    const newGameButton = document.querySelector('header .new-game');
    newGameButton.removeEventListener('click', onClickOfNewGame);
    newGameButton.style.visibility = 'hidden';
    game.resetGame();
    placedShips = [];
    removeAllPlacementClasses();
    removeAllHitAndMissClasses();
    document.querySelector('.options').style.visibility = 'visible';
    shipsToPlace.reset();
    setUpPlayerSelectionEventListeners();
  };

  const onPlayerHasWon = function onPlayerHasWon(eventData) {
    const { winner } = eventData;
    let victorToDisplay;
    if (winner === 'user') {
      victorToDisplay = 'User';
    } else if (winner === 'computer') {
      victorToDisplay = 'Computer';
    } else {
      throw new Error('Unrecognized victor in event data');
    }
    setInformation(`${victorToDisplay} has won the game!`);
    removeGameModeEventListeners();
    removeAllTargetingClasses();
    const newGameButton = document.querySelector('header .new-game');
    newGameButton.style.visibility = 'visible';
    newGameButton.addEventListener('click', onClickOfNewGame);
  };

  const startGame = function startGame() {
    game.generateAndPlaceComputerShips(Math.random);
    setUpGameModeEventListeners();
    game.start();
  };

  /* INITIALIZE */

  const initialize = function initialize() {
    setInformation('Place your ships!');
    for (let i = 7; i >= 0; i -= 1) {
      for (let j = 0; j < 8; j += 1) {
        const playerCell = document.createElement('div');
        playerCell.classList.add('cell');
        playerCell.setAttribute('data-cell-x', String(j));
        playerCell.setAttribute('data-cell-y', String(i));
        playerGrid.appendChild(playerCell);
        const computerCell = document.createElement('div');
        computerCell.classList.add('cell');
        computerCell.setAttribute('data-cell-x', String(j));
        computerCell.setAttribute('data-cell-y', String(i));
        computerGrid.appendChild(computerCell);
      }
    }
    document.querySelector('.change-orientation').addEventListener('click', onClickOfChangeOrientation);
    document.querySelector('.reset').addEventListener('click', onClickOfResetDuringSelection);
    document.querySelector('.start').addEventListener('click', onClickOfStartDuringSelection);
    document.querySelector('header .new-game').style.visibility = 'hidden';
    shipsToPlace.nextShipLength();
    setUpPlayerSelectionEventListeners();
  };

  return {
    initialize,
    renderPlacedShips,
    renderCurrentSelection,
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createDOMController);


/***/ }),

/***/ "./src/modules/createGame.js":
/*!***********************************!*\
  !*** ./src/modules/createGame.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _createGameboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createGameboard */ "./src/modules/createGameboard.js");
/* harmony import */ var _createPlayer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createPlayer */ "./src/modules/createPlayer.js");



const createGame = function createGame(events) {
  const eventsEmitted = {
    USER_TURN_BEGINS: 'USER_TURN_BEGINS',
    COMPUTER_TURN_BEGINS: 'COMPUTER_TURN_BEGINS',
    PLAYER_HAS_WON: 'PLAYER_HAS_WON',
  };

  // initialization
  const xLength = 8;
  const yLength = 8;

  const userPlayer = (0,_createPlayer__WEBPACK_IMPORTED_MODULE_1__.default)('user');
  const computerPlayer = (0,_createPlayer__WEBPACK_IMPORTED_MODULE_1__.default)('computer');

  let currentPlayer = null;

  let userBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);
  let computerBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);

  /* used to resolve the returned promises in awaitUserMove and
  awaitComputerMove  */
  let awaitCallback = null;

  const getCorrespondingBoard = function getCorrespondingBoard(playerName) {
    if (playerName === 'user') return userBoard;
    if (playerName === 'computer') return computerBoard;
    throw new Error('Player does not exist');
  };

  const placeShip = function placeShip(playerName, coordinatesList) {
    const board = getCorrespondingBoard(playerName);
    board.placeShip(coordinatesList);
  };

  const getBoardState = function getBoardState(playerName) {
    const board = getCorrespondingBoard(playerName);
    const placedShips = board.getPlacedShips();
    const hitCoordinates = board.getHitCoordinates();
    const missedCoordinates = board.getMissedCoordinates();
    return {
      placedShips,
      hitCoordinates,
      missedCoordinates,
      xLength,
      yLength,
    };
  };

  /* returns a promise that is resolved with the coordinates of the
  user's move */
  const awaitUserMove = function awaitUserMove() {
    currentPlayer = userPlayer;
    return new Promise((resolve) => {
      awaitCallback = resolve;
      events.emit(eventsEmitted.USER_TURN_BEGINS, null);
    });
  };

  const awaitComputerMove = function awaitComputerMove() {
    currentPlayer = computerPlayer;
    return new Promise((resolve) => {
      awaitCallback = resolve;
      events.emit(eventsEmitted.COMPUTER_TURN_BEGINS, null);
    });
  };

  const makeUserMove = function makeUserMove(coordinates) {
    if (!(currentPlayer === userPlayer)) {
      throw new Error('Not User Turn');
    }
    userPlayer.makeMove(computerBoard, coordinates);
    awaitCallback();
  };

  const makeComputerMove = function makeComputerMove(randomFn) {
    if (!(currentPlayer === computerPlayer)) {
      throw new Error('Not Computer Turn');
    }
    computerPlayer.autoMakeMove(userBoard, randomFn);
    awaitCallback();
  };

  const hasPlayerWon = function hasPlayerWon(playerName) {
    let board;
    if (playerName === 'user') {
      board = computerBoard;
    }
    if (playerName === 'computer') {
      board = userBoard;
    }
    if (board.areAllShipsSunk()) {
      return true;
    }
    return false;
  };

  const declareWinner = function declareWinner(playerName) {
    events.emit(
      eventsEmitted.PLAYER_HAS_WON,
      { winner: playerName },
    );
  };

  const start = async function start() {
    /* eslint-disable no-await-in-loop */
    while (true) {
      currentPlayer = userPlayer;
      await awaitUserMove();
      if (hasPlayerWon('user')) {
        declareWinner('user');
        currentPlayer = null;
        break;
      }
      currentPlayer = computerPlayer;
      await awaitComputerMove();
      if (hasPlayerWon('computer')) {
        declareWinner('computer');
        currentPlayer = null;
        break;
      }
    }
  };

  const resetGame = function resetGame() {
    userBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);
    computerBoard = (0,_createGameboard__WEBPACK_IMPORTED_MODULE_0__.default)(xLength, yLength);
  };

  const generateShipCoordinates = function generateShipCoordinates(orientation, origin, length) {
    const coordinatesList = [];
    coordinatesList.push({ ...origin });
    let constantVariable;
    let changingVariable;
    if (orientation === 'up') {
      constantVariable = 'x';
      changingVariable = 'y';
    } else if (orientation === 'right') {
      constantVariable = 'y';
      changingVariable = 'x';
    } else {
      throw new RangeError('Invalid orientation');
    }
    for (let i = 1; i < length; i += 1) {
      const newCoordinates = {
        [constantVariable]: origin[constantVariable],
        [changingVariable]: (origin[changingVariable] + i),
      };
      coordinatesList.push(newCoordinates);
    }
    return coordinatesList;
  };
  const generateRandomShipCoordinates = function generateRandomShipCoordinates(
    randomFn,
    playerName,
    length,
  ) {
    let orientation;
    let permittedXLengthForOrigin;
    let permittedYLengthForOrigin;
    const orientationNumber = Math.floor(randomFn() * 2);
    switch (orientationNumber) {
      case 0:
        orientation = 'right';
        permittedXLengthForOrigin = xLength - length + 1;
        permittedYLengthForOrigin = yLength;
        break;
      case 1:
        orientation = 'up';
        permittedXLengthForOrigin = xLength;
        permittedYLengthForOrigin = yLength - length + 1;
        break;
      default:
    }
    const origin = {
      x: Math.floor(randomFn() * permittedXLengthForOrigin),
      y: Math.floor(randomFn() * permittedYLengthForOrigin),
    };
    const ship = generateShipCoordinates(orientation, origin, length);

    const board = getCorrespondingBoard(playerName);

    if (board.areCoordinatesValidForShip(ship)) {
      return ship;
    }
    // try again at generating a new ship if the generated coordinates are not valid
    return generateRandomShipCoordinates(randomFn, playerName, length);
  };

  const generateAndPlaceComputerShips = function generateAndPlaceComputerShips(randomFn) {
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 2));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 3));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 3));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 4));
    computerBoard.placeShip(generateRandomShipCoordinates(randomFn, 'computer', 5));
  };

  return {
    placeShip,
    getBoardState,
    start,
    makeUserMove,
    makeComputerMove,
    resetGame,
    generateShipCoordinates,
    generateRandomShipCoordinates,
    generateAndPlaceComputerShips,
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createGame);


/***/ }),

/***/ "./src/modules/createGameboard.js":
/*!****************************************!*\
  !*** ./src/modules/createGameboard.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _createShip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createShip */ "./src/modules/createShip.js");


function createGameboard(xLength, yLength) {
  if (!(xLength > 0) || !(yLength > 0)) {
    throw new RangeError('Arguments must be positive');
  }

  const shipsDetails = [];
  const hitCoordinatesList = [];
  const missedCoordinatesList = [];

  const getXLength = function getXLength() {
    return xLength;
  };

  const getYLength = function getYLength() {
    return yLength;
  };

  const verifyCoordinatesAreValid = function verifyCoordinatesAreValid(coordinates) {
    if (!(coordinates.x < xLength && coordinates.y < yLength)) {
      throw new RangeError('Coordinates are invalid');
    }
  };

  const placeShip = function placeShip(coordinatesList) {
    const newShip = (0,_createShip__WEBPACK_IMPORTED_MODULE_0__.default)(coordinatesList.length);
    const coordinatesListCopy = [];

    coordinatesList.forEach((coordinates) => {
      verifyCoordinatesAreValid(coordinates);
      coordinatesListCopy.push({ ...coordinates });
    });

    shipsDetails.push({
      ship: newShip,
      coordinatesList: coordinatesListCopy,
    });
  };

  const receiveAttack = function receiveAttack(coordinates) {
    verifyCoordinatesAreValid(coordinates);
    hitCoordinatesList.forEach((hitCoordinates) => {
      if (coordinates.x === hitCoordinates.x && coordinates.y === hitCoordinates.y) {
        throw new Error('Coordinates previously attacked');
      }
    });

    missedCoordinatesList.forEach((missedCoordinates) => {
      if (coordinates.x === missedCoordinates.x && coordinates.y === missedCoordinates.y) {
        throw new Error('Coordinates previously attacked');
      }
    });
    let hit = false;
    for (let i = 0; i < shipsDetails.length; i += 1) {
      const shipCoordinatesList = shipsDetails[i].coordinatesList;
      for (let j = 0; j < shipCoordinatesList.length; j += 1) {
        const shipCoordinates = shipCoordinatesList[j];
        const doCoordinatesMatch = (
          shipCoordinates.x === coordinates.x
          && shipCoordinates.y === coordinates.y
        );
        if (doCoordinatesMatch) {
          hitCoordinatesList.push({ ...coordinates });
          shipsDetails[i].ship.hit(j);
          hit = true;
        }
      }
    }
    if (!hit) {
      missedCoordinatesList.push({ ...coordinates });
    }
  };

  const getHitCoordinates = function getHitCoordinates() {
    const hitCoordinatesCopy = [];
    hitCoordinatesList.forEach((hitCoordinates) => {
      hitCoordinatesCopy.push({ ...hitCoordinates });
    });

    return hitCoordinatesCopy;
  };

  const getMissedCoordinates = function getMissedCoordinates() {
    const missedCoordinatesCopy = [];
    missedCoordinatesList.forEach((missedCoordinates) => {
      missedCoordinatesCopy.push({ ...missedCoordinates });
    });

    return missedCoordinatesCopy;
  };

  const getPlacedShips = function getPlacedShips() {
    const shipCoordinates = [];
    shipsDetails.forEach(({ coordinatesList }) => {
      const coordinatesListCopy = [];
      coordinatesList.forEach((coordinates) => {
        coordinatesListCopy.push({ ...coordinates });
      });
      shipCoordinates.push(coordinatesListCopy);
    });
    return shipCoordinates;
  };

  const areAllShipsSunk = function areAllShipsSunk() {
    let allSunk = true;
    shipsDetails.forEach((shipDetails) => {
      if (!shipDetails.ship.isSunk()) {
        allSunk = false;
      }
    });
    return allSunk;
  };

  const areCoordinatesValidForShip = function areCoordinatesValidForShip(shipCoordinates) {
    let valid = true;
    shipCoordinates.forEach((coordinates) => {
      shipsDetails.forEach(({ coordinatesList }) => {
        coordinatesList.forEach(({ x, y }) => {
          if (x === coordinates.x && y === coordinates.y) {
            valid = false;
          }
        });
      });
    });
    return valid;
  };

  return {
    getXLength,
    getYLength,
    receiveAttack,
    placeShip,
    getHitCoordinates,
    getMissedCoordinates,
    getPlacedShips,
    areAllShipsSunk,
    areCoordinatesValidForShip,
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createGameboard);


/***/ }),

/***/ "./src/modules/createPlayer.js":
/*!*************************************!*\
  !*** ./src/modules/createPlayer.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const createPlayer = function createPlayer(name) {
  const makeMove = function makeMove(gameBoard, coordinates) {
    gameBoard.receiveAttack(coordinates);
  };

  const getName = function getName() {
    return name;
  };

  const areCoordinatesAlreadyAttacked = function areCoordinatesAlreadyAttacked(
    gameBoard,
    coordinates,
  ) {
    let alreadyAttacked = false;
    const hitCoordinates = gameBoard.getHitCoordinates();
    hitCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        alreadyAttacked = true;
      }
    });
    const missedCoordinates = gameBoard.getMissedCoordinates();
    missedCoordinates.forEach(({ x, y }) => {
      if (x === coordinates.x && y === coordinates.y) {
        alreadyAttacked = true;
      }
    });
    return alreadyAttacked;
  };

  const autoMakeMove = function autoMakeMove(gameBoard, randomFn) {
    let xValue;
    let yValue;
    do {
      xValue = Math.floor(gameBoard.getXLength() * randomFn());
      yValue = Math.floor(gameBoard.getYLength() * randomFn());
    } while (areCoordinatesAlreadyAttacked(gameBoard, { x: xValue, y: yValue }));

    gameBoard.receiveAttack({ x: xValue, y: yValue });
  };

  return {
    makeMove,
    getName,
    autoMakeMove,
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createPlayer);


/***/ }),

/***/ "./src/modules/createShip.js":
/*!***********************************!*\
  !*** ./src/modules/createShip.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
function createShip(length) {
  if (!(length > 0)) {
    throw new RangeError('Length must be positive');
  }
  const positions = [];
  for (let i = 0; i < length; i += 1) {
    positions.push(false);
  }

  const hit = function hit(position) {
    if (position >= length) {
      throw new RangeError('The argument must be below the Ship length');
    }
    positions[position] = true;
  };

  const isSunk = function isSunk() {
    let isAllHit = true;
    positions.forEach((position) => {
      if (!position) {
        isAllHit = false;
      }
    });

    return isAllHit;
  };

  return {
    hit,
    isSunk,
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createShip);


/***/ }),

/***/ "./src/modules/events.js":
/*!*******************************!*\
  !*** ./src/modules/events.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ events)
/* harmony export */ });
const eventsList = {};

function on(eventName, fn) {
  eventsList[eventName] = eventsList[eventName] || [];
  eventsList[eventName].push(fn);
}

function off(eventName, fn) {
  if (eventsList[eventName]) {
    for (let i = 0; i < eventsList[eventName].length; i += 1) {
      if (eventsList[eventName][i] === fn) {
        eventsList[eventName].splice(i, 1);
        break;
      }
    }
  }
}

function emit(eventName, data) {
  if (eventsList[eventName]) {
    eventsList[eventName].forEach((fn) => {
      fn(data);
    });
  }
}

const events = {
  on,
  off,
  emit,
};




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.js");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3Jlc2V0LmNzcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZXNldC5jc3M/ZWRlMCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3N0eWxlLmNzcz83MTYzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY3JlYXRlRE9NQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY3JlYXRlR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY3JlYXRlR2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9jcmVhdGVQbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2NyZWF0ZVNoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNzSDtBQUM3QjtBQUN6Riw4QkFBOEIsbUZBQTJCLENBQUMsd0dBQXFDO0FBQy9GO0FBQ0EsK29CQUErb0IsY0FBYyxlQUFlLGNBQWMsb0JBQW9CLGtCQUFrQiw2QkFBNkIsR0FBRyxnSkFBZ0osbUJBQW1CLEdBQUcsUUFBUSxtQkFBbUIsR0FBRyxVQUFVLHFCQUFxQixHQUFHLGlCQUFpQixpQkFBaUIsR0FBRywyREFBMkQsZ0JBQWdCLGtCQUFrQixHQUFHLFNBQVMsOEJBQThCLHNCQUFzQixHQUFHLE9BQU8sa0ZBQWtGLE1BQU0saUJBQWlCLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxZQUFZLE1BQU0sWUFBWSxPQUFPLFVBQVUsS0FBSyxLQUFLLFVBQVUsS0FBSyxLQUFLLFlBQVksTUFBTSxLQUFLLFVBQVUsS0FBSyxNQUFNLFVBQVUsVUFBVSxLQUFLLEtBQUssWUFBWSxhQUFhLCtuQkFBK25CLGNBQWMsZUFBZSxjQUFjLG9CQUFvQixrQkFBa0IsNkJBQTZCLEdBQUcsZ0pBQWdKLG1CQUFtQixHQUFHLFFBQVEsbUJBQW1CLEdBQUcsVUFBVSxxQkFBcUIsR0FBRyxpQkFBaUIsaUJBQWlCLEdBQUcsMkRBQTJELGdCQUFnQixrQkFBa0IsR0FBRyxTQUFTLDhCQUE4QixzQkFBc0IsR0FBRyxtQkFBbUI7QUFDM3FGO0FBQ0EsaUVBQWUsdUJBQXVCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQdkM7QUFDc0g7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QUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0NBQW9DO0FBQzVDO0FBQ0EsS0FBSztBQUNMLFFBQVEsb0NBQW9DO0FBQzVDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixrQ0FBa0M7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU2Qjs7Ozs7OztVQ2hDN0I7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxnQ0FBZ0MsWUFBWTtXQUM1QztXQUNBLEU7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx3Q0FBd0MseUNBQXlDO1dBQ2pGO1dBQ0E7V0FDQSxFOzs7OztXQ1BBLHdGOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHNEQUFzRCxrQkFBa0I7V0FDeEU7V0FDQSwrQ0FBK0MsY0FBYztXQUM3RCxFOzs7O1VDTkE7VUFDQTtVQUNBO1VBQ0EiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIvKiBodHRwOi8vbWV5ZXJ3ZWIuY29tL2VyaWMvdG9vbHMvY3NzL3Jlc2V0LyBcXG4gICB2Mi4wIHwgMjAxMTAxMjZcXG4gICBMaWNlbnNlOiBub25lIChwdWJsaWMgZG9tYWluKVxcbiovXFxuXFxuaHRtbCwgYm9keSwgZGl2LCBzcGFuLCBhcHBsZXQsIG9iamVjdCwgaWZyYW1lLFxcbmgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIGJsb2NrcXVvdGUsIHByZSxcXG5hLCBhYmJyLCBhY3JvbnltLCBhZGRyZXNzLCBiaWcsIGNpdGUsIGNvZGUsXFxuZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzLCBzYW1wLFxcbnNtYWxsLCBzdHJpa2UsIHN0cm9uZywgc3ViLCBzdXAsIHR0LCB2YXIsXFxuYiwgdSwgaSwgY2VudGVyLFxcbmRsLCBkdCwgZGQsIG9sLCB1bCwgbGksXFxuZmllbGRzZXQsIGZvcm0sIGxhYmVsLCBsZWdlbmQsXFxudGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsXFxuYXJ0aWNsZSwgYXNpZGUsIGNhbnZhcywgZGV0YWlscywgZW1iZWQsIFxcbmZpZ3VyZSwgZmlnY2FwdGlvbiwgZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgXFxubWVudSwgbmF2LCBvdXRwdXQsIHJ1YnksIHNlY3Rpb24sIHN1bW1hcnksXFxudGltZSwgbWFyaywgYXVkaW8sIHZpZGVvIHtcXG5cXHRtYXJnaW46IDA7XFxuXFx0cGFkZGluZzogMDtcXG5cXHRib3JkZXI6IDA7XFxuXFx0Zm9udC1zaXplOiAxMDAlO1xcblxcdGZvbnQ6IGluaGVyaXQ7XFxuXFx0dmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcbn1cXG4vKiBIVE1MNSBkaXNwbGF5LXJvbGUgcmVzZXQgZm9yIG9sZGVyIGJyb3dzZXJzICovXFxuYXJ0aWNsZSwgYXNpZGUsIGRldGFpbHMsIGZpZ2NhcHRpb24sIGZpZ3VyZSwgXFxuZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgbWVudSwgbmF2LCBzZWN0aW9uIHtcXG5cXHRkaXNwbGF5OiBibG9jaztcXG59XFxuYm9keSB7XFxuXFx0bGluZS1oZWlnaHQ6IDE7XFxufVxcbm9sLCB1bCB7XFxuXFx0bGlzdC1zdHlsZTogbm9uZTtcXG59XFxuYmxvY2txdW90ZSwgcSB7XFxuXFx0cXVvdGVzOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlcixcXG5xOmJlZm9yZSwgcTphZnRlciB7XFxuXFx0Y29udGVudDogJyc7XFxuXFx0Y29udGVudDogbm9uZTtcXG59XFxudGFibGUge1xcblxcdGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxuXFx0Ym9yZGVyLXNwYWNpbmc6IDA7XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9yZXNldC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7OztDQUdDOztBQUVEOzs7Ozs7Ozs7Ozs7O0NBYUMsU0FBUztDQUNULFVBQVU7Q0FDVixTQUFTO0NBQ1QsZUFBZTtDQUNmLGFBQWE7Q0FDYix3QkFBd0I7QUFDekI7QUFDQSxnREFBZ0Q7QUFDaEQ7O0NBRUMsY0FBYztBQUNmO0FBQ0E7Q0FDQyxjQUFjO0FBQ2Y7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsWUFBWTtBQUNiO0FBQ0E7O0NBRUMsV0FBVztDQUNYLGFBQWE7QUFDZDtBQUNBO0NBQ0MseUJBQXlCO0NBQ3pCLGlCQUFpQjtBQUNsQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIvKiBodHRwOi8vbWV5ZXJ3ZWIuY29tL2VyaWMvdG9vbHMvY3NzL3Jlc2V0LyBcXG4gICB2Mi4wIHwgMjAxMTAxMjZcXG4gICBMaWNlbnNlOiBub25lIChwdWJsaWMgZG9tYWluKVxcbiovXFxuXFxuaHRtbCwgYm9keSwgZGl2LCBzcGFuLCBhcHBsZXQsIG9iamVjdCwgaWZyYW1lLFxcbmgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIGJsb2NrcXVvdGUsIHByZSxcXG5hLCBhYmJyLCBhY3JvbnltLCBhZGRyZXNzLCBiaWcsIGNpdGUsIGNvZGUsXFxuZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzLCBzYW1wLFxcbnNtYWxsLCBzdHJpa2UsIHN0cm9uZywgc3ViLCBzdXAsIHR0LCB2YXIsXFxuYiwgdSwgaSwgY2VudGVyLFxcbmRsLCBkdCwgZGQsIG9sLCB1bCwgbGksXFxuZmllbGRzZXQsIGZvcm0sIGxhYmVsLCBsZWdlbmQsXFxudGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsXFxuYXJ0aWNsZSwgYXNpZGUsIGNhbnZhcywgZGV0YWlscywgZW1iZWQsIFxcbmZpZ3VyZSwgZmlnY2FwdGlvbiwgZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgXFxubWVudSwgbmF2LCBvdXRwdXQsIHJ1YnksIHNlY3Rpb24sIHN1bW1hcnksXFxudGltZSwgbWFyaywgYXVkaW8sIHZpZGVvIHtcXG5cXHRtYXJnaW46IDA7XFxuXFx0cGFkZGluZzogMDtcXG5cXHRib3JkZXI6IDA7XFxuXFx0Zm9udC1zaXplOiAxMDAlO1xcblxcdGZvbnQ6IGluaGVyaXQ7XFxuXFx0dmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcbn1cXG4vKiBIVE1MNSBkaXNwbGF5LXJvbGUgcmVzZXQgZm9yIG9sZGVyIGJyb3dzZXJzICovXFxuYXJ0aWNsZSwgYXNpZGUsIGRldGFpbHMsIGZpZ2NhcHRpb24sIGZpZ3VyZSwgXFxuZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgbWVudSwgbmF2LCBzZWN0aW9uIHtcXG5cXHRkaXNwbGF5OiBibG9jaztcXG59XFxuYm9keSB7XFxuXFx0bGluZS1oZWlnaHQ6IDE7XFxufVxcbm9sLCB1bCB7XFxuXFx0bGlzdC1zdHlsZTogbm9uZTtcXG59XFxuYmxvY2txdW90ZSwgcSB7XFxuXFx0cXVvdGVzOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlcixcXG5xOmJlZm9yZSwgcTphZnRlciB7XFxuXFx0Y29udGVudDogJyc7XFxuXFx0Y29udGVudDogbm9uZTtcXG59XFxudGFibGUge1xcblxcdGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxuXFx0Ym9yZGVyLXNwYWNpbmc6IDA7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcImh0bWwge1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbn1cXG5cXG46cm9vdCB7XFxuICAtLW9mZi13aGl0ZTogI2VmZWZlZjtcXG4gIC0tYmFja2dyb3VuZC1ibHVlOiAjMDAwMjQwO1xcbn1cXG5cXG4ucm9vdCB7XFxuICBmb250LWZhbWlseTogJ09yYml0cm9uJywgc2Fucy1zZXJpZjtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtYmx1ZSk7XFxuICBjb2xvcjogdmFyKC0tb2ZmLXdoaXRlKTtcXG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xcbiAgYm94LXNpemluZzogYm9yO1xcbiAgcGFkZGluZzogM3JlbSAzcmVtO1xcbn1cXG5cXG5oZWFkZXIge1xcbiAgZm9udC1zaXplOiAzLjVyZW07XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbn1cXG5cXG5oZWFkZXIgLm5ldy1nYW1lIHtcXG4gIGZvbnQtZmFtaWx5OiAnT3JiaXRyb24nLCBzYW5zLXNlcmlmO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tb2ZmLXdoaXRlKTtcXG4gIGNvbG9yOiBibGFjaztcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgcGFkZGluZzogMS41cmVtIDJyZW07XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIG1hcmdpbi1yaWdodDogMC4zcmVtO1xcbn1cXG5cXG4uaW5mb3JtYXRpb24ge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIwMCwgMjAwLDIwMCk7XFxuICBjb2xvcjogYmxhY2s7XFxuICBwYWRkaW5nOiAyLjVyZW0gMy41cmVtO1xcbiAgbWFyZ2luLXRvcDogNXJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDEuNXJlbTtcXG4gIGZvbnQtc2l6ZTogMnJlbTtcXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XFxufVxcblxcbi5tYWluLWdhbWUtd3JhcHBlciB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGZsZXgtd3JhcDogd3JhcDtcXG4gIHBhZGRpbmc6IDRyZW0gMnJlbTtcXG59XFxuXFxuLm1haW4tZ2FtZS13cmFwcGVyIGgyIHtcXG4gIGZvbnQtc2l6ZTogMnJlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcXG59XFxuXFxuLnBsYXllci1zZWN0aW9uLXdyYXBwZXIge1xcbiAgbWFyZ2luLWxlZnQ6IDIwcmVtO1xcbiAgbWFyZ2luLXJpZ2h0OiAyMHJlbTtcXG4gIG1hcmdpbi1ib3R0b206IDVyZW07XFxufVxcblxcbi5jb21wdXRlci1zZWN0aW9uLXdyYXBwZXIge1xcbiAgbWFyZ2luLWxlZnQ6IDIwcmVtO1xcbiAgbWFyZ2luLXJpZ2h0OiAyMHJlbTtcXG59XFxuXFxuLmdyaWQge1xcbiAgZGlzcGxheTogaW5saW5lLWdyaWQ7XFxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg4LCAxZnIpO1xcbiAgZ2FwOiAwLjJyZW07XFxufVxcblxcbi5ncmlkIC5jZWxsIHtcXG4gIHdpZHRoOiA1cmVtO1xcbiAgaGVpZ2h0OiA1cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogOCU7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XFxufVxcblxcbi5wbGF5ZXItc2VjdGlvbi13cmFwcGVyIC5vcHRpb25zIHtcXG4gIG1hcmdpbi10b3A6IDJyZW07XFxufVxcblxcbi5wbGF5ZXItc2VjdGlvbi13cmFwcGVyIC5vcHRpb25zIGJ1dHRvbiB7XFxuICBtYXJnaW4tdG9wOiAxcmVtO1xcbiAgZm9udC1mYW1pbHk6ICdPcmJpdHJvbicsIHNhbnMtc2VyaWY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1vZmYtd2hpdGUpO1xcbiAgY29sb3I6IGJsYWNrO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgZm9udC1zaXplOiAxLjVyZW07XFxuICBwYWRkaW5nOiAxLjVyZW0gMnJlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgbWFyZ2luLXJpZ2h0OiAwLjNyZW07XFxufVxcblxcbi8qIFNoaXAgUGxhY2VtZW50IE1vZGUgKi9cXG4uY2VsbC5hbHJlYWR5LXBsYWNlZCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOnJnYigxODAsIDE4MCwxODApXFxufVxcblxcbi5jZWxsLmludmFsaWQtcGxhY2VtZW50IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjUwLCAwLCAwLCAwLjUpOyAgXFxufVxcblxcbi5jZWxsLnBsYXllci1zZWxlY3Rpb24ge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxODAsIDE4MCwxODAsIDAuNylcXG59XFxuXFxuLyogR2FtZSBNb2RlICovXFxuXFxuLmNlbGwge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG59XFxuXFxuLmNlbGwuaGl0OjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGhlaWdodDogMS42cmVtO1xcbiAgd2lkdGg6IDEuNnJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcXG59XFxuXFxuLmNlbGwubWlzc2VkOjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGhlaWdodDogMS42cmVtO1xcbiAgd2lkdGg6IDEuNnJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcbn1cXG5cXG4uY2VsbC50YXJnZXRpbmcge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjkzZTtcXG59XFxuXFxuLmNlbGwuaW52YWxpZC10YXJnZXRpbmcge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTAsIDAsIDAsIDAuNSk7ICBcXG59XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3N0eWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxvQkFBb0I7RUFDcEIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UsbUNBQW1DO0VBQ25DLHdDQUF3QztFQUN4Qyx1QkFBdUI7RUFDdkIsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0UsbUNBQW1DO0VBQ25DLGtDQUFrQztFQUNsQyxZQUFZO0VBQ1osWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixvQkFBb0I7RUFDcEIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG1DQUFtQztFQUNuQyxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixxQkFBcUI7RUFDckIsZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQixxQ0FBcUM7RUFDckMsV0FBVztBQUNiOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsc0JBQXNCO0VBQ3RCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQ0FBbUM7RUFDbkMsa0NBQWtDO0VBQ2xDLFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQixpQkFBaUI7RUFDakIsb0JBQW9CO0FBQ3RCOztBQUVBLHdCQUF3QjtBQUN4QjtFQUNFO0FBQ0Y7O0FBRUE7RUFDRSxzQ0FBc0M7QUFDeEM7O0FBRUE7RUFDRTtBQUNGOztBQUVBLGNBQWM7O0FBRWQ7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gscUJBQXFCO0VBQ3JCLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gscUJBQXFCO0VBQ3JCLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxzQ0FBc0M7QUFDeENcIixcInNvdXJjZXNDb250ZW50XCI6W1wiaHRtbCB7XFxuICBmb250LXNpemU6IDEwcHg7XFxufVxcblxcbjpyb290IHtcXG4gIC0tb2ZmLXdoaXRlOiAjZWZlZmVmO1xcbiAgLS1iYWNrZ3JvdW5kLWJsdWU6ICMwMDAyNDA7XFxufVxcblxcbi5yb290IHtcXG4gIGZvbnQtZmFtaWx5OiAnT3JiaXRyb24nLCBzYW5zLXNlcmlmO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1ibHVlKTtcXG4gIGNvbG9yOiB2YXIoLS1vZmYtd2hpdGUpO1xcbiAgbWluLWhlaWdodDogMTAwdmg7XFxuICBib3gtc2l6aW5nOiBib3I7XFxuICBwYWRkaW5nOiAzcmVtIDNyZW07XFxufVxcblxcbmhlYWRlciB7XFxuICBmb250LXNpemU6IDMuNXJlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxufVxcblxcbmhlYWRlciAubmV3LWdhbWUge1xcbiAgZm9udC1mYW1pbHk6ICdPcmJpdHJvbicsIHNhbnMtc2VyaWY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1vZmYtd2hpdGUpO1xcbiAgY29sb3I6IGJsYWNrO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgZm9udC1zaXplOiAxLjVyZW07XFxuICBwYWRkaW5nOiAxLjVyZW0gMnJlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgbWFyZ2luLXJpZ2h0OiAwLjNyZW07XFxufVxcblxcbi5pbmZvcm1hdGlvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjAwLCAyMDAsMjAwKTtcXG4gIGNvbG9yOiBibGFjaztcXG4gIHBhZGRpbmc6IDIuNXJlbSAzLjVyZW07XFxuICBtYXJnaW4tdG9wOiA1cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogMS41cmVtO1xcbiAgZm9udC1zaXplOiAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IDUwMDtcXG59XFxuXFxuLm1haW4tZ2FtZS13cmFwcGVyIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgZmxleC13cmFwOiB3cmFwO1xcbiAgcGFkZGluZzogNHJlbSAycmVtO1xcbn1cXG5cXG4ubWFpbi1nYW1lLXdyYXBwZXIgaDIge1xcbiAgZm9udC1zaXplOiAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBtYXJnaW4tYm90dG9tOiAxcmVtO1xcbn1cXG5cXG4ucGxheWVyLXNlY3Rpb24td3JhcHBlciB7XFxuICBtYXJnaW4tbGVmdDogMjByZW07XFxuICBtYXJnaW4tcmlnaHQ6IDIwcmVtO1xcbiAgbWFyZ2luLWJvdHRvbTogNXJlbTtcXG59XFxuXFxuLmNvbXB1dGVyLXNlY3Rpb24td3JhcHBlciB7XFxuICBtYXJnaW4tbGVmdDogMjByZW07XFxuICBtYXJnaW4tcmlnaHQ6IDIwcmVtO1xcbn1cXG5cXG4uZ3JpZCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtZ3JpZDtcXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDgsIDFmcik7XFxuICBnYXA6IDAuMnJlbTtcXG59XFxuXFxuLmdyaWQgLmNlbGwge1xcbiAgd2lkdGg6IDVyZW07XFxuICBoZWlnaHQ6IDVyZW07XFxuICBib3JkZXItcmFkaXVzOiA4JTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBib3JkZXI6IDFweCBzb2xpZCB3aGl0ZTtcXG59XFxuXFxuLnBsYXllci1zZWN0aW9uLXdyYXBwZXIgLm9wdGlvbnMge1xcbiAgbWFyZ2luLXRvcDogMnJlbTtcXG59XFxuXFxuLnBsYXllci1zZWN0aW9uLXdyYXBwZXIgLm9wdGlvbnMgYnV0dG9uIHtcXG4gIG1hcmdpbi10b3A6IDFyZW07XFxuICBmb250LWZhbWlseTogJ09yYml0cm9uJywgc2Fucy1zZXJpZjtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW9mZi13aGl0ZSk7XFxuICBjb2xvcjogYmxhY2s7XFxuICBib3JkZXI6IG5vbmU7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG4gIHBhZGRpbmc6IDEuNXJlbSAycmVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBtYXJnaW4tcmlnaHQ6IDAuM3JlbTtcXG59XFxuXFxuLyogU2hpcCBQbGFjZW1lbnQgTW9kZSAqL1xcbi5jZWxsLmFscmVhZHktcGxhY2VkIHtcXG4gIGJhY2tncm91bmQtY29sb3I6cmdiKDE4MCwgMTgwLDE4MClcXG59XFxuXFxuLmNlbGwuaW52YWxpZC1wbGFjZW1lbnQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTAsIDAsIDAsIDAuNSk7ICBcXG59XFxuXFxuLmNlbGwucGxheWVyLXNlbGVjdGlvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE4MCwgMTgwLDE4MCwgMC43KVxcbn1cXG5cXG4vKiBHYW1lIE1vZGUgKi9cXG5cXG4uY2VsbCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbn1cXG5cXG4uY2VsbC5oaXQ6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgaGVpZ2h0OiAxLjZyZW07XFxuICB3aWR0aDogMS42cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xcbn1cXG5cXG4uY2VsbC5taXNzZWQ6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgaGVpZ2h0OiAxLjZyZW07XFxuICB3aWR0aDogMS42cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxufVxcblxcbi5jZWxsLnRhcmdldGluZyB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2OTNlO1xcbn1cXG5cXG4uY2VsbC5pbnZhbGlkLXRhcmdldGluZyB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1MCwgMCwgMCwgMC41KTsgIFxcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pIHtcbiAgdmFyIF9pdGVtID0gX3NsaWNlZFRvQXJyYXkoaXRlbSwgNCksXG4gICAgICBjb250ZW50ID0gX2l0ZW1bMV0sXG4gICAgICBjc3NNYXBwaW5nID0gX2l0ZW1bM107XG5cbiAgaWYgKHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59OyIsImltcG9ydCBhcGkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgICAgICAgIGltcG9ydCBjb250ZW50IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcmVzZXQuY3NzXCI7XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29udGVudC5sb2NhbHMgfHwge307IiwiaW1wb3J0IGFwaSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgICAgICAgaW1wb3J0IGNvbnRlbnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsImltcG9ydCAnLi9yZXNldC5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5pbXBvcnQgY3JlYXRlR2FtZSBmcm9tICcuL21vZHVsZXMvY3JlYXRlR2FtZSc7XG5pbXBvcnQgY3JlYXRlRE9NQ29udHJvbGxlciBmcm9tICcuL21vZHVsZXMvY3JlYXRlRE9NQ29udHJvbGxlcic7XG5pbXBvcnQgZXZlbnRzIGZyb20gJy4vbW9kdWxlcy9ldmVudHMnO1xuXG5jb25zdCBET01Db250cm9sbGVyID0gY3JlYXRlRE9NQ29udHJvbGxlcihjcmVhdGVHYW1lKGV2ZW50cykpO1xuRE9NQ29udHJvbGxlci5pbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgZXZlbnRzIGZyb20gJy4vZXZlbnRzJztcblxuZnVuY3Rpb24gY3JlYXRlRE9NQ29udHJvbGxlcihnYW1lKSB7XG4gIGNvbnN0IHBsYXllckdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLXNlY3Rpb24td3JhcHBlciAuZ3JpZCcpO1xuICBjb25zdCBjb21wdXRlckdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXItc2VjdGlvbi13cmFwcGVyIC5ncmlkJyk7XG5cbiAgLyogU1RBVEUgKi9cblxuICBsZXQgcGxhY2VkU2hpcHMgPSBbXTtcbiAgbGV0IHNlbGVjdGlvbkxlbmd0aCA9IG51bGw7XG4gIGxldCBzZWxlY3Rpb25PcmllbnRhdGlvbiA9ICd1cCc7XG4gIGxldCBpc1RoZXJlQW5vdGhlclNoaXAgPSB0cnVlO1xuICBjb25zdCBzaGlwc1RvUGxhY2UgPSAoZnVuY3Rpb24gY3JlYXRlU2hpcHNUb1BsYWNlKCkge1xuICAgIGNvbnN0IGl0ZW1zID0gWzUsIDQsIDMsIDMsIDJdO1xuICAgIGxldCBjdXJyZW50SW5kZXggPSAwO1xuICAgIGNvbnN0IG5leHRTaGlwTGVuZ3RoID0gZnVuY3Rpb24gbmV4dFNoaXBMZW5ndGgoKSB7XG4gICAgICBpZiAoY3VycmVudEluZGV4ID49IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICBzZWxlY3Rpb25MZW5ndGggPSBudWxsO1xuICAgICAgICBpc1RoZXJlQW5vdGhlclNoaXAgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGlvbkxlbmd0aCA9IGl0ZW1zW2N1cnJlbnRJbmRleF07XG4gICAgICAgIGN1cnJlbnRJbmRleCArPSAxO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIGlzVGhlcmVBbm90aGVyU2hpcCA9IHRydWU7XG4gICAgICBjdXJyZW50SW5kZXggPSAwO1xuICAgICAgbmV4dFNoaXBMZW5ndGgoKTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0U2hpcExlbmd0aCxcbiAgICAgIHJlc2V0LFxuICAgIH07XG4gIH0oKSk7XG5cbiAgY29uc3Qgc2V0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiBzZXRJbmZvcm1hdGlvbihtZXNzYWdlKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm9ybWF0aW9uJykudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICB9O1xuICBjb25zdCBnZXRDZWxsID0gZnVuY3Rpb24gZ2V0Q2VsbChncmlkLCBjb29yZGluYXRlcykge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gY29vcmRpbmF0ZXM7XG4gICAgY29uc3QgY2VsbCA9IGdyaWQucXVlcnlTZWxlY3RvcihgLmNlbGxbZGF0YS1jZWxsLXg9XCIke3h9XCJdW2RhdGEtY2VsbC15PVwiJHt5fVwiXWApO1xuICAgIGlmIChjZWxsID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ0NlbGwgbm90IGZvdW5kJyk7XG4gICAgcmV0dXJuIGNlbGw7XG4gIH07XG5cbiAgbGV0IGNhblVzZXJNb3ZlID0gbnVsbDtcblxuICBjb25zdCByZW1vdmVBbGxQbGFjZW1lbnRDbGFzc2VzID0gZnVuY3Rpb24gcmVtb3ZlQWxsUGxhY2VtZW50Q2xhc3NlcygpIHtcbiAgICBwbGF5ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdhbHJlYWR5LXBsYWNlZCcpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qIFNFTEVDVElPTiBNT0RFIEZVTkNUSU9OUyAqL1xuXG4gIGNvbnN0IGlzQ2VsbEFscmVhZHlQbGFjZWQgPSBmdW5jdGlvbiBpc0NlbGxBbHJlYWR5UGxhY2VkKGNvb3JkaW5hdGVzLCBhbHJlYWR5UGxhY2VkKSB7XG4gICAgbGV0IHBsYWNlZCA9IGZhbHNlO1xuICAgIGFscmVhZHlQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5mb3JFYWNoKCh7IHgsIHkgfSkgPT4ge1xuICAgICAgICBpZiAoeCA9PT0gY29vcmRpbmF0ZXMueCAmJiB5ID09PSBjb29yZGluYXRlcy55KSB7XG4gICAgICAgICAgcGxhY2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBsYWNlZDtcbiAgfTtcblxuICAvLyByZXR1cm5zIHRoZSBjb29yZGluYXRlcyBmb3IgdGhlIHBsYXllcidzIHNlbGVjdGlvblxuICBjb25zdCBnZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiBnZXRTZWxlY3Rpb24obW91c2VMb2NhdGlvbiwgb3JpZW50YXRpb24sIGxlbmd0aCkge1xuICAgIGxldCBjaGFuZ2luZ0F4aXM7XG4gICAgbGV0IHVuY2hhbmdpbmdBeGlzO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzTGlzdCA9IFtdO1xuICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcbiAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgY2hhbmdpbmdBeGlzID0gJ3knO1xuICAgICAgICB1bmNoYW5naW5nQXhpcyA9ICd4JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgIGNoYW5naW5nQXhpcyA9ICd4JztcbiAgICAgICAgdW5jaGFuZ2luZ0F4aXMgPSAneSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSB7XG4gICAgICAgIFtjaGFuZ2luZ0F4aXNdOiBtb3VzZUxvY2F0aW9uW2NoYW5naW5nQXhpc10gKyBpLFxuICAgICAgICBbdW5jaGFuZ2luZ0F4aXNdOiBtb3VzZUxvY2F0aW9uW3VuY2hhbmdpbmdBeGlzXSxcbiAgICAgIH07XG4gICAgICBjb29yZGluYXRlc0xpc3QucHVzaChjb29yZGluYXRlcyk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlc0xpc3Q7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyQ3VycmVudFNlbGVjdGlvbiA9IGZ1bmN0aW9uIHJlbmRlckN1cnJlbnRTZWxlY3Rpb24oXG4gICAgbW91c2VMb2NhdGlvbixcbiAgICBvcmllbnRhdGlvbixcbiAgICBsZW5ndGgsXG4gICkge1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzTGlzdCA9IGdldFNlbGVjdGlvbihtb3VzZUxvY2F0aW9uLCBvcmllbnRhdGlvbiwgbGVuZ3RoKTtcblxuICAgIGxldCBpc1ZhbGlkU2VsZWN0aW9uID0gdHJ1ZTtcbiAgICBjb29yZGluYXRlc0xpc3QuZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIGlmIChjb29yZGluYXRlcy54IDwgMCB8fCBjb29yZGluYXRlcy55IDwgMCkge1xuICAgICAgICBpc1ZhbGlkU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoY29vcmRpbmF0ZXMueCA+IDcgfHwgY29vcmRpbmF0ZXMueSA+IDcpIHtcbiAgICAgICAgaXNWYWxpZFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGlzQ2VsbEFscmVhZHlQbGFjZWQoY29vcmRpbmF0ZXMsIHBsYWNlZFNoaXBzKSkge1xuICAgICAgICBpc1ZhbGlkU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGlzVmFsaWRTZWxlY3Rpb24pIHtcbiAgICAgIGNvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgICBnZXRDZWxsKHBsYXllckdyaWQsIGNvb3JkaW5hdGVzKS5jbGFzc0xpc3QuYWRkKCdwbGF5ZXItc2VsZWN0aW9uJyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2V0Q2VsbChwbGF5ZXJHcmlkLCBtb3VzZUxvY2F0aW9uKS5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkLXBsYWNlbWVudCcpO1xuICAgIH1cbiAgfTtcblxuICAvKiBhbHRlcnMgdGhlIHBsYXllckdyaWQgdG8gc2hvdyBhbHJlYWR5IHBsYWNlZCBzaGlwcyAqL1xuICBjb25zdCByZW5kZXJQbGFjZWRTaGlwcyA9IGZ1bmN0aW9uIHJlbmRlckluU2VsZWN0TW9kZShhbHJlYWR5UGxhY2VkKSB7XG4gICAgYWxyZWFkeVBsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBzaGlwLmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKHBsYXllckdyaWQsIGNvb3JkaW5hdGVzKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdhbHJlYWR5LXBsYWNlZCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0Q2VsbENvb3JkaW5hdGVzID0gZnVuY3Rpb24gZ2V0Q2VsbENvb3JkaW5hdGVzKGNlbGwpIHtcbiAgICBjb25zdCB4ID0gTnVtYmVyKGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLWNlbGwteCcpKTtcbiAgICBjb25zdCB5ID0gTnVtYmVyKGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLWNlbGwteScpKTtcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IHtcbiAgICAgIHgsXG4gICAgICB5LFxuICAgIH07XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xuICB9O1xuXG4gIC8vIGFkZHMgc2hpcCB0byBzdGF0ZVxuICBjb25zdCBvbkNsaWNrT2ZDZWxsRHVyaW5nU2VsZWN0aW9uID0gZnVuY3Rpb24gb25DbGlja09mQ2VsbER1cmluZ1NlbGVjdGlvbihldmVudCkge1xuICAgIGlmICghaXNUaGVyZUFub3RoZXJTaGlwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNlbGwgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgbW91c2VMb2NhdGlvbiA9IGdldENlbGxDb29yZGluYXRlcyhjZWxsKTtcbiAgICBjb25zdCBjb29yZGluYXRlc0xpc3QgPSBnZXRTZWxlY3Rpb24obW91c2VMb2NhdGlvbiwgc2VsZWN0aW9uT3JpZW50YXRpb24sIHNlbGVjdGlvbkxlbmd0aCk7XG4gICAgbGV0IGlzVmFsaWRTZWxlY3Rpb24gPSB0cnVlO1xuICAgIGNvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgaWYgKGNvb3JkaW5hdGVzLnggPCAwIHx8IGNvb3JkaW5hdGVzLnkgPCAwKSB7XG4gICAgICAgIGlzVmFsaWRTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChjb29yZGluYXRlcy54ID4gNyB8fCBjb29yZGluYXRlcy55ID4gNykge1xuICAgICAgICBpc1ZhbGlkU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaXNDZWxsQWxyZWFkeVBsYWNlZChjb29yZGluYXRlcywgcGxhY2VkU2hpcHMpKSB7XG4gICAgICAgIGlzVmFsaWRTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoaXNWYWxpZFNlbGVjdGlvbikge1xuICAgICAgcGxhY2VkU2hpcHMucHVzaChjb29yZGluYXRlc0xpc3QpO1xuICAgICAgcmVuZGVyUGxhY2VkU2hpcHMocGxhY2VkU2hpcHMpO1xuICAgICAgc2hpcHNUb1BsYWNlLm5leHRTaGlwTGVuZ3RoKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qIGdvZXMgdGhyb3VnaCBhbGwgdGhlIGNlbGxzIGluIHRoZSBwbGF5ZXIncyBncmlkIHRvIHJlbW92ZSBjbGFzc2VzIHRoYXQgaW5kaWNhdGUgcGxhY2VkXG4gIHNoaXBzIGFuZCBzZWxlY3Rpb24gKi9cbiAgY29uc3QgcmVtb3ZlQWxsU2VsZWN0aW9uQ2xhc3NlcyA9IGZ1bmN0aW9uIHJlbW92ZUFsbFNlbGVjdGlvbkNsYXNzZXMoKSB7XG4gICAgcGxheWVyR3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgncGxheWVyLXNlbGVjdGlvbicpO1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkLXBsYWNlbWVudCcpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9uTW91c2VFbnRlckNlbGxEdXJpbmdTZWxlY3Rpb24gPSBmdW5jdGlvbiBvbk1vdXNlRW50ZXJDZWxsRHVyaW5nU2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKCFpc1RoZXJlQW5vdGhlclNoaXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2VsbCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IGdldENlbGxDb29yZGluYXRlcyhjZWxsKTtcbiAgICByZW5kZXJQbGFjZWRTaGlwcyhwbGFjZWRTaGlwcyk7XG4gICAgcmVuZGVyQ3VycmVudFNlbGVjdGlvbihjb29yZGluYXRlcywgc2VsZWN0aW9uT3JpZW50YXRpb24sIHNlbGVjdGlvbkxlbmd0aCwgcGxhY2VkU2hpcHMpO1xuICB9O1xuXG4gIGNvbnN0IG9uTW91c2VMZWF2ZUNlbGxEdXJpbmdTZWxlY3Rpb24gPSBmdW5jdGlvbiBvbk1vdXNlTGVhdmVDZWxsRHVyaW5nU2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgcmVtb3ZlQWxsU2VsZWN0aW9uQ2xhc3NlcygpO1xuICB9O1xuXG4gIC8vIHRvZ2dsZXMgb3JpZW50YXRpb25cbiAgY29uc3Qgb25DbGlja09mQ2hhbmdlT3JpZW50YXRpb24gPSBmdW5jdGlvbiBvbkNsaWNrT2ZDaGFuZ2VPcmllbnRhdGlvbigpIHtcbiAgICBpZiAoc2VsZWN0aW9uT3JpZW50YXRpb24gPT09ICd1cCcpIHtcbiAgICAgIHNlbGVjdGlvbk9yaWVudGF0aW9uID0gJ3JpZ2h0JztcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0aW9uT3JpZW50YXRpb24gPSAndXAnO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbkNsaWNrT2ZSZXNldER1cmluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uIG9uQ2xpY2tPZlJlc2V0RHVyaW5nU2VsZWN0aW9uKCkge1xuICAgIHBsYWNlZFNoaXBzID0gW107XG4gICAgcmVtb3ZlQWxsUGxhY2VtZW50Q2xhc3NlcygpO1xuICAgIHNoaXBzVG9QbGFjZS5yZXNldCgpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZVBsYXllclNlbGVjdGlvbkV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlUGxheWVyU2VsZWN0aW9uRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2VsbHMgPSBwbGF5ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25Nb3VzZUVudGVyQ2VsbER1cmluZ1NlbGVjdGlvbik7XG4gICAgICBjZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBvbk1vdXNlTGVhdmVDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICAgIGNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvbkNsaWNrT2ZTdGFydER1cmluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uIG9uQ2xpY2tPZlN0YXJ0RHVyaW5nU2VsZWN0aW9uKCkge1xuICAgIGlmIChpc1RoZXJlQW5vdGhlclNoaXApIHtcbiAgICAgIHNldEluZm9ybWF0aW9uKCdBbGwgc2hpcHMgbXVzdCBiZSBwbGFjZWQgYmVmb3JlIHRoZSBnYW1lIGNhbiBiZWdpbiEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVtb3ZlUGxheWVyU2VsZWN0aW9uRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aW9ucycpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBwbGFjZWRTaGlwcy5mb3JFYWNoKChwbGFjZWRTaGlwKSA9PiB7XG4gICAgICBnYW1lLnBsYWNlU2hpcCgndXNlcicsIHBsYWNlZFNoaXApO1xuICAgIH0pO1xuICAgIHN0YXJ0R2FtZSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIH07XG5cbiAgY29uc3Qgc2V0VXBQbGF5ZXJTZWxlY3Rpb25FdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldFVwUGxheWVyU2VsZWN0aW9uRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2VsbHMgPSBwbGF5ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25Nb3VzZUVudGVyQ2VsbER1cmluZ1NlbGVjdGlvbik7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBvbk1vdXNlTGVhdmVDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZDZWxsRHVyaW5nU2VsZWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKiBHQU1FIE1PREUgRlVOQ1RJT05TICovXG5cbiAgLy8gcmVtb3ZlcyBoaXQgYW5kIG1pc3MgY2xhc3NlcyBmcm9tIGJvdGggZ3JpZHNcbiAgY29uc3QgcmVtb3ZlQWxsSGl0QW5kTWlzc0NsYXNzZXMgPSBmdW5jdGlvbiByZW1vdmVBbGxIaXRBbmRNaXNzQ2xhc3NlcygpIHtcbiAgICBwbGF5ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaXQnKTtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnbWlzc2VkJyk7XG4gICAgfSk7XG4gICAgY29tcHV0ZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaXQnKTtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnbWlzc2VkJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlQm9hcmRGb3JGaXJlZFVwb25DZWxscyA9IGZ1bmN0aW9uIHVwZGF0ZUJvYXJkRm9yRmlyZWRVcG9uQ2VsbHMocGxheWVyTmFtZSkge1xuICAgIGxldCBoaXRDb29yZGluYXRlcztcbiAgICBsZXQgbWlzc2VkQ29vcmRpbmF0ZXM7XG4gICAgbGV0IGdyaWQ7XG4gICAgaWYgKHBsYXllck5hbWUgPT09ICd1c2VyJykge1xuICAgICAgKHsgaGl0Q29vcmRpbmF0ZXMsIG1pc3NlZENvb3JkaW5hdGVzIH0gPSBnYW1lLmdldEJvYXJkU3RhdGUoJ3VzZXInKSk7XG4gICAgICBncmlkID0gcGxheWVyR3JpZDtcbiAgICB9IGVsc2UgaWYgKHBsYXllck5hbWUgPT09ICdjb21wdXRlcicpIHtcbiAgICAgICh7IGhpdENvb3JkaW5hdGVzLCBtaXNzZWRDb29yZGluYXRlcyB9ID0gZ2FtZS5nZXRCb2FyZFN0YXRlKCdjb21wdXRlcicpKTtcbiAgICAgIGdyaWQgPSBjb21wdXRlckdyaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwbGF5ZXJOYW1lJyk7XG4gICAgfVxuICAgIGhpdENvb3JkaW5hdGVzLmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBnZXRDZWxsKGdyaWQsIGNvb3JkaW5hdGVzKS5jbGFzc0xpc3QuYWRkKCdoaXQnKTtcbiAgICB9KTtcbiAgICBtaXNzZWRDb29yZGluYXRlcy5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgZ2V0Q2VsbChncmlkLCBjb29yZGluYXRlcykuY2xhc3NMaXN0LmFkZCgnbWlzc2VkJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFzQ2VsbEJlZW5GaXJlZFVwb24gPSBmdW5jdGlvbiBoYXNDZWxsQmVlbkZpcmVkVXBvbihjb29yZGluYXRlcykge1xuICAgIGNvbnN0IHsgaGl0Q29vcmRpbmF0ZXMsIG1pc3NlZENvb3JkaW5hdGVzIH0gPSBnYW1lLmdldEJvYXJkU3RhdGUoJ2NvbXB1dGVyJyk7XG4gICAgbGV0IGZpcmVkVXBvbiA9IGZhbHNlO1xuICAgIGhpdENvb3JkaW5hdGVzLmZvckVhY2goKHsgeCwgeSB9KSA9PiB7XG4gICAgICBpZiAoeCA9PT0gY29vcmRpbmF0ZXMueCAmJiB5ID09PSBjb29yZGluYXRlcy55KSB7XG4gICAgICAgIGZpcmVkVXBvbiA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbWlzc2VkQ29vcmRpbmF0ZXMuZm9yRWFjaCgoeyB4LCB5IH0pID0+IHtcbiAgICAgIGlmICh4ID09PSBjb29yZGluYXRlcy54ICYmIHkgPT09IGNvb3JkaW5hdGVzLnkpIHtcbiAgICAgICAgZmlyZWRVcG9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZmlyZWRVcG9uO1xuICB9O1xuXG4gIGNvbnN0IG9uQ2xpY2tPZkNlbGxEdXJpbmdHYW1lID0gZnVuY3Rpb24gb25DbGlja09uQ2VsbER1cmluZ0dhbWUoZXZlbnQpIHtcbiAgICBpZiAoIWNhblVzZXJNb3ZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNlbGwgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBnZXRDZWxsQ29vcmRpbmF0ZXMoY2VsbCk7XG4gICAgaWYgKGhhc0NlbGxCZWVuRmlyZWRVcG9uKGNvb3JkaW5hdGVzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnYW1lLm1ha2VVc2VyTW92ZShjb29yZGluYXRlcyk7XG4gICAgdXBkYXRlQm9hcmRGb3JGaXJlZFVwb25DZWxscygnY29tcHV0ZXInKTtcbiAgICBjYW5Vc2VyTW92ZSA9IGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IG9uVXNlclR1cm5CZWdpbnMgPSBmdW5jdGlvbiBvblVzZXJUdXJuQmVnaW5zKCkge1xuICAgIGNhblVzZXJNb3ZlID0gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBvbkNvbXB1dGVyVHVybkJlZ2lucyA9IGZ1bmN0aW9uIG9uQ29tcHV0ZXJUdXJuQmVnaW5zKCkge1xuICAgIGdhbWUubWFrZUNvbXB1dGVyTW92ZShNYXRoLnJhbmRvbSk7XG4gICAgdXBkYXRlQm9hcmRGb3JGaXJlZFVwb25DZWxscygndXNlcicpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUFsbFRhcmdldGluZ0NsYXNzZXMgPSBmdW5jdGlvbiByZW1vdmVBbGxUYXJnZXRpbmdDbGFzc2VzKCkge1xuICAgIGNvbXB1dGVyR3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgndGFyZ2V0aW5nJyk7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQtdGFyZ2V0aW5nJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgb25Nb3VzZUVudGVyQ29tcHV0ZXJDZWxsRHVyaW5nR2FtZSA9IGZ1bmN0aW9uIG9uTW91c2VFbnRlckNvbXB1dGVyQ2VsbER1cmluZ0dhbWUoZXZlbnQpIHtcbiAgICBjb25zdCBjZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmIChoYXNDZWxsQmVlbkZpcmVkVXBvbihnZXRDZWxsQ29vcmRpbmF0ZXMoY2VsbCkpKSB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQtdGFyZ2V0aW5nJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgndGFyZ2V0aW5nJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uTW91c2VMZWF2ZUNvbXB1dGVyQ2VsbER1cmluZ0dhbWUgPSBmdW5jdGlvbiBvbk1vdXNlTGVhdmVDb21wdXRlckNlbGxEdXJpbmdHYW1lKCkge1xuICAgIHJlbW92ZUFsbFRhcmdldGluZ0NsYXNzZXMoKTtcbiAgfTtcblxuICBjb25zdCBzZXRVcEdhbWVNb2RlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRVcEdhbWVNb2RlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2VsbHMgPSBjb21wdXRlckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBvbk1vdXNlRW50ZXJDb21wdXRlckNlbGxEdXJpbmdHYW1lKTtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG9uTW91c2VMZWF2ZUNvbXB1dGVyQ2VsbER1cmluZ0dhbWUpO1xuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tPZkNlbGxEdXJpbmdHYW1lKTtcbiAgICB9KTtcblxuICAgIGV2ZW50cy5vbignVVNFUl9UVVJOX0JFR0lOUycsIG9uVXNlclR1cm5CZWdpbnMpO1xuICAgIGV2ZW50cy5vbignQ09NUFVURVJfVFVSTl9CRUdJTlMnLCBvbkNvbXB1dGVyVHVybkJlZ2lucyk7XG4gICAgZXZlbnRzLm9uKCdQTEFZRVJfSEFTX1dPTicsIG9uUGxheWVySGFzV29uKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgfTtcblxuICBjb25zdCByZW1vdmVHYW1lTW9kZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlR2FtZU1vZGVFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjZWxscyA9IGNvbXB1dGVyR3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIG9uTW91c2VFbnRlckNvbXB1dGVyQ2VsbER1cmluZ0dhbWUpO1xuICAgICAgY2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgb25Nb3VzZUxlYXZlQ29tcHV0ZXJDZWxsRHVyaW5nR2FtZSk7XG4gICAgICBjZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja09mQ2VsbER1cmluZ0dhbWUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgfSk7XG5cbiAgICBldmVudHMub2ZmKCdVU0VSX1RVUk5fQkVHSU5TJywgb25Vc2VyVHVybkJlZ2lucyk7XG4gICAgZXZlbnRzLm9mZignQ09NUFVURVJfVFVSTl9CRUdJTlMnLCBvbkNvbXB1dGVyVHVybkJlZ2lucyk7XG4gICAgZXZlbnRzLm9mZignUExBWUVSX0hBU19XT04nLCBvblBsYXllckhhc1dvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgfTtcblxuICBjb25zdCBvbkNsaWNrT2ZOZXdHYW1lID0gZnVuY3Rpb24gb25DbGlja09mTmV3R2FtZSgpIHtcbiAgICBjb25zdCBuZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5uZXctZ2FtZScpO1xuICAgIG5ld0dhbWVCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT2ZOZXdHYW1lKTtcbiAgICBuZXdHYW1lQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBnYW1lLnJlc2V0R2FtZSgpO1xuICAgIHBsYWNlZFNoaXBzID0gW107XG4gICAgcmVtb3ZlQWxsUGxhY2VtZW50Q2xhc3NlcygpO1xuICAgIHJlbW92ZUFsbEhpdEFuZE1pc3NDbGFzc2VzKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wdGlvbnMnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgIHNoaXBzVG9QbGFjZS5yZXNldCgpO1xuICAgIHNldFVwUGxheWVyU2VsZWN0aW9uRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICBjb25zdCBvblBsYXllckhhc1dvbiA9IGZ1bmN0aW9uIG9uUGxheWVySGFzV29uKGV2ZW50RGF0YSkge1xuICAgIGNvbnN0IHsgd2lubmVyIH0gPSBldmVudERhdGE7XG4gICAgbGV0IHZpY3RvclRvRGlzcGxheTtcbiAgICBpZiAod2lubmVyID09PSAndXNlcicpIHtcbiAgICAgIHZpY3RvclRvRGlzcGxheSA9ICdVc2VyJztcbiAgICB9IGVsc2UgaWYgKHdpbm5lciA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgdmljdG9yVG9EaXNwbGF5ID0gJ0NvbXB1dGVyJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbml6ZWQgdmljdG9yIGluIGV2ZW50IGRhdGEnKTtcbiAgICB9XG4gICAgc2V0SW5mb3JtYXRpb24oYCR7dmljdG9yVG9EaXNwbGF5fSBoYXMgd29uIHRoZSBnYW1lIWApO1xuICAgIHJlbW92ZUdhbWVNb2RlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZW1vdmVBbGxUYXJnZXRpbmdDbGFzc2VzKCk7XG4gICAgY29uc3QgbmV3R2FtZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAubmV3LWdhbWUnKTtcbiAgICBuZXdHYW1lQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgbmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tPZk5ld0dhbWUpO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9IGZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcbiAgICBnYW1lLmdlbmVyYXRlQW5kUGxhY2VDb21wdXRlclNoaXBzKE1hdGgucmFuZG9tKTtcbiAgICBzZXRVcEdhbWVNb2RlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBnYW1lLnN0YXJ0KCk7XG4gIH07XG5cbiAgLyogSU5JVElBTElaRSAqL1xuXG4gIGNvbnN0IGluaXRpYWxpemUgPSBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgIHNldEluZm9ybWF0aW9uKCdQbGFjZSB5b3VyIHNoaXBzIScpO1xuICAgIGZvciAobGV0IGkgPSA3OyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqICs9IDEpIHtcbiAgICAgICAgY29uc3QgcGxheWVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBwbGF5ZXJDZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcbiAgICAgICAgcGxheWVyQ2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC14JywgU3RyaW5nKGopKTtcbiAgICAgICAgcGxheWVyQ2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC15JywgU3RyaW5nKGkpKTtcbiAgICAgICAgcGxheWVyR3JpZC5hcHBlbmRDaGlsZChwbGF5ZXJDZWxsKTtcbiAgICAgICAgY29uc3QgY29tcHV0ZXJDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbXB1dGVyQ2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICAgICAgIGNvbXB1dGVyQ2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC14JywgU3RyaW5nKGopKTtcbiAgICAgICAgY29tcHV0ZXJDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsLXknLCBTdHJpbmcoaSkpO1xuICAgICAgICBjb21wdXRlckdyaWQuYXBwZW5kQ2hpbGQoY29tcHV0ZXJDZWxsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYW5nZS1vcmllbnRhdGlvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja09mQ2hhbmdlT3JpZW50YXRpb24pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXNldCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja09mUmVzZXREdXJpbmdTZWxlY3Rpb24pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja09mU3RhcnREdXJpbmdTZWxlY3Rpb24pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAubmV3LWdhbWUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgc2hpcHNUb1BsYWNlLm5leHRTaGlwTGVuZ3RoKCk7XG4gICAgc2V0VXBQbGF5ZXJTZWxlY3Rpb25FdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdGlhbGl6ZSxcbiAgICByZW5kZXJQbGFjZWRTaGlwcyxcbiAgICByZW5kZXJDdXJyZW50U2VsZWN0aW9uLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVET01Db250cm9sbGVyO1xuIiwiaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2NyZWF0ZUdhbWVib2FyZCc7XG5pbXBvcnQgY3JlYXRlUGxheWVyIGZyb20gJy4vY3JlYXRlUGxheWVyJztcblxuY29uc3QgY3JlYXRlR2FtZSA9IGZ1bmN0aW9uIGNyZWF0ZUdhbWUoZXZlbnRzKSB7XG4gIGNvbnN0IGV2ZW50c0VtaXR0ZWQgPSB7XG4gICAgVVNFUl9UVVJOX0JFR0lOUzogJ1VTRVJfVFVSTl9CRUdJTlMnLFxuICAgIENPTVBVVEVSX1RVUk5fQkVHSU5TOiAnQ09NUFVURVJfVFVSTl9CRUdJTlMnLFxuICAgIFBMQVlFUl9IQVNfV09OOiAnUExBWUVSX0hBU19XT04nLFxuICB9O1xuXG4gIC8vIGluaXRpYWxpemF0aW9uXG4gIGNvbnN0IHhMZW5ndGggPSA4O1xuICBjb25zdCB5TGVuZ3RoID0gODtcblxuICBjb25zdCB1c2VyUGxheWVyID0gY3JlYXRlUGxheWVyKCd1c2VyJyk7XG4gIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gY3JlYXRlUGxheWVyKCdjb21wdXRlcicpO1xuXG4gIGxldCBjdXJyZW50UGxheWVyID0gbnVsbDtcblxuICBsZXQgdXNlckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKHhMZW5ndGgsIHlMZW5ndGgpO1xuICBsZXQgY29tcHV0ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCh4TGVuZ3RoLCB5TGVuZ3RoKTtcblxuICAvKiB1c2VkIHRvIHJlc29sdmUgdGhlIHJldHVybmVkIHByb21pc2VzIGluIGF3YWl0VXNlck1vdmUgYW5kXG4gIGF3YWl0Q29tcHV0ZXJNb3ZlICAqL1xuICBsZXQgYXdhaXRDYWxsYmFjayA9IG51bGw7XG5cbiAgY29uc3QgZ2V0Q29ycmVzcG9uZGluZ0JvYXJkID0gZnVuY3Rpb24gZ2V0Q29ycmVzcG9uZGluZ0JvYXJkKHBsYXllck5hbWUpIHtcbiAgICBpZiAocGxheWVyTmFtZSA9PT0gJ3VzZXInKSByZXR1cm4gdXNlckJvYXJkO1xuICAgIGlmIChwbGF5ZXJOYW1lID09PSAnY29tcHV0ZXInKSByZXR1cm4gY29tcHV0ZXJCb2FyZDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsYXllciBkb2VzIG5vdCBleGlzdCcpO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IGZ1bmN0aW9uIHBsYWNlU2hpcChwbGF5ZXJOYW1lLCBjb29yZGluYXRlc0xpc3QpIHtcbiAgICBjb25zdCBib2FyZCA9IGdldENvcnJlc3BvbmRpbmdCb2FyZChwbGF5ZXJOYW1lKTtcbiAgICBib2FyZC5wbGFjZVNoaXAoY29vcmRpbmF0ZXNMaXN0KTtcbiAgfTtcblxuICBjb25zdCBnZXRCb2FyZFN0YXRlID0gZnVuY3Rpb24gZ2V0Qm9hcmRTdGF0ZShwbGF5ZXJOYW1lKSB7XG4gICAgY29uc3QgYm9hcmQgPSBnZXRDb3JyZXNwb25kaW5nQm9hcmQocGxheWVyTmFtZSk7XG4gICAgY29uc3QgcGxhY2VkU2hpcHMgPSBib2FyZC5nZXRQbGFjZWRTaGlwcygpO1xuICAgIGNvbnN0IGhpdENvb3JkaW5hdGVzID0gYm9hcmQuZ2V0SGl0Q29vcmRpbmF0ZXMoKTtcbiAgICBjb25zdCBtaXNzZWRDb29yZGluYXRlcyA9IGJvYXJkLmdldE1pc3NlZENvb3JkaW5hdGVzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBsYWNlZFNoaXBzLFxuICAgICAgaGl0Q29vcmRpbmF0ZXMsXG4gICAgICBtaXNzZWRDb29yZGluYXRlcyxcbiAgICAgIHhMZW5ndGgsXG4gICAgICB5TGVuZ3RoLFxuICAgIH07XG4gIH07XG5cbiAgLyogcmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSBjb29yZGluYXRlcyBvZiB0aGVcbiAgdXNlcidzIG1vdmUgKi9cbiAgY29uc3QgYXdhaXRVc2VyTW92ZSA9IGZ1bmN0aW9uIGF3YWl0VXNlck1vdmUoKSB7XG4gICAgY3VycmVudFBsYXllciA9IHVzZXJQbGF5ZXI7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBhd2FpdENhbGxiYWNrID0gcmVzb2x2ZTtcbiAgICAgIGV2ZW50cy5lbWl0KGV2ZW50c0VtaXR0ZWQuVVNFUl9UVVJOX0JFR0lOUywgbnVsbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYXdhaXRDb21wdXRlck1vdmUgPSBmdW5jdGlvbiBhd2FpdENvbXB1dGVyTW92ZSgpIHtcbiAgICBjdXJyZW50UGxheWVyID0gY29tcHV0ZXJQbGF5ZXI7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBhd2FpdENhbGxiYWNrID0gcmVzb2x2ZTtcbiAgICAgIGV2ZW50cy5lbWl0KGV2ZW50c0VtaXR0ZWQuQ09NUFVURVJfVFVSTl9CRUdJTlMsIG51bGwpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IG1ha2VVc2VyTW92ZSA9IGZ1bmN0aW9uIG1ha2VVc2VyTW92ZShjb29yZGluYXRlcykge1xuICAgIGlmICghKGN1cnJlbnRQbGF5ZXIgPT09IHVzZXJQbGF5ZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBVc2VyIFR1cm4nKTtcbiAgICB9XG4gICAgdXNlclBsYXllci5tYWtlTW92ZShjb21wdXRlckJvYXJkLCBjb29yZGluYXRlcyk7XG4gICAgYXdhaXRDYWxsYmFjaygpO1xuICB9O1xuXG4gIGNvbnN0IG1ha2VDb21wdXRlck1vdmUgPSBmdW5jdGlvbiBtYWtlQ29tcHV0ZXJNb3ZlKHJhbmRvbUZuKSB7XG4gICAgaWYgKCEoY3VycmVudFBsYXllciA9PT0gY29tcHV0ZXJQbGF5ZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBDb21wdXRlciBUdXJuJyk7XG4gICAgfVxuICAgIGNvbXB1dGVyUGxheWVyLmF1dG9NYWtlTW92ZSh1c2VyQm9hcmQsIHJhbmRvbUZuKTtcbiAgICBhd2FpdENhbGxiYWNrKCk7XG4gIH07XG5cbiAgY29uc3QgaGFzUGxheWVyV29uID0gZnVuY3Rpb24gaGFzUGxheWVyV29uKHBsYXllck5hbWUpIHtcbiAgICBsZXQgYm9hcmQ7XG4gICAgaWYgKHBsYXllck5hbWUgPT09ICd1c2VyJykge1xuICAgICAgYm9hcmQgPSBjb21wdXRlckJvYXJkO1xuICAgIH1cbiAgICBpZiAocGxheWVyTmFtZSA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgYm9hcmQgPSB1c2VyQm9hcmQ7XG4gICAgfVxuICAgIGlmIChib2FyZC5hcmVBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjb25zdCBkZWNsYXJlV2lubmVyID0gZnVuY3Rpb24gZGVjbGFyZVdpbm5lcihwbGF5ZXJOYW1lKSB7XG4gICAgZXZlbnRzLmVtaXQoXG4gICAgICBldmVudHNFbWl0dGVkLlBMQVlFUl9IQVNfV09OLFxuICAgICAgeyB3aW5uZXI6IHBsYXllck5hbWUgfSxcbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0ID0gYXN5bmMgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tYXdhaXQtaW4tbG9vcCAqL1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjdXJyZW50UGxheWVyID0gdXNlclBsYXllcjtcbiAgICAgIGF3YWl0IGF3YWl0VXNlck1vdmUoKTtcbiAgICAgIGlmIChoYXNQbGF5ZXJXb24oJ3VzZXInKSkge1xuICAgICAgICBkZWNsYXJlV2lubmVyKCd1c2VyJyk7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXIgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSBjb21wdXRlclBsYXllcjtcbiAgICAgIGF3YWl0IGF3YWl0Q29tcHV0ZXJNb3ZlKCk7XG4gICAgICBpZiAoaGFzUGxheWVyV29uKCdjb21wdXRlcicpKSB7XG4gICAgICAgIGRlY2xhcmVXaW5uZXIoJ2NvbXB1dGVyJyk7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXIgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVzZXRHYW1lID0gZnVuY3Rpb24gcmVzZXRHYW1lKCkge1xuICAgIHVzZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCh4TGVuZ3RoLCB5TGVuZ3RoKTtcbiAgICBjb21wdXRlckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKHhMZW5ndGgsIHlMZW5ndGgpO1xuICB9O1xuXG4gIGNvbnN0IGdlbmVyYXRlU2hpcENvb3JkaW5hdGVzID0gZnVuY3Rpb24gZ2VuZXJhdGVTaGlwQ29vcmRpbmF0ZXMob3JpZW50YXRpb24sIG9yaWdpbiwgbGVuZ3RoKSB7XG4gICAgY29uc3QgY29vcmRpbmF0ZXNMaXN0ID0gW107XG4gICAgY29vcmRpbmF0ZXNMaXN0LnB1c2goeyAuLi5vcmlnaW4gfSk7XG4gICAgbGV0IGNvbnN0YW50VmFyaWFibGU7XG4gICAgbGV0IGNoYW5naW5nVmFyaWFibGU7XG4gICAgaWYgKG9yaWVudGF0aW9uID09PSAndXAnKSB7XG4gICAgICBjb25zdGFudFZhcmlhYmxlID0gJ3gnO1xuICAgICAgY2hhbmdpbmdWYXJpYWJsZSA9ICd5JztcbiAgICB9IGVsc2UgaWYgKG9yaWVudGF0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICBjb25zdGFudFZhcmlhYmxlID0gJ3knO1xuICAgICAgY2hhbmdpbmdWYXJpYWJsZSA9ICd4JztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgb3JpZW50YXRpb24nKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgbmV3Q29vcmRpbmF0ZXMgPSB7XG4gICAgICAgIFtjb25zdGFudFZhcmlhYmxlXTogb3JpZ2luW2NvbnN0YW50VmFyaWFibGVdLFxuICAgICAgICBbY2hhbmdpbmdWYXJpYWJsZV06IChvcmlnaW5bY2hhbmdpbmdWYXJpYWJsZV0gKyBpKSxcbiAgICAgIH07XG4gICAgICBjb29yZGluYXRlc0xpc3QucHVzaChuZXdDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlc0xpc3Q7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlUmFuZG9tU2hpcENvb3JkaW5hdGVzID0gZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMoXG4gICAgcmFuZG9tRm4sXG4gICAgcGxheWVyTmFtZSxcbiAgICBsZW5ndGgsXG4gICkge1xuICAgIGxldCBvcmllbnRhdGlvbjtcbiAgICBsZXQgcGVybWl0dGVkWExlbmd0aEZvck9yaWdpbjtcbiAgICBsZXQgcGVybWl0dGVkWUxlbmd0aEZvck9yaWdpbjtcbiAgICBjb25zdCBvcmllbnRhdGlvbk51bWJlciA9IE1hdGguZmxvb3IocmFuZG9tRm4oKSAqIDIpO1xuICAgIHN3aXRjaCAob3JpZW50YXRpb25OdW1iZXIpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgb3JpZW50YXRpb24gPSAncmlnaHQnO1xuICAgICAgICBwZXJtaXR0ZWRYTGVuZ3RoRm9yT3JpZ2luID0geExlbmd0aCAtIGxlbmd0aCArIDE7XG4gICAgICAgIHBlcm1pdHRlZFlMZW5ndGhGb3JPcmlnaW4gPSB5TGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgb3JpZW50YXRpb24gPSAndXAnO1xuICAgICAgICBwZXJtaXR0ZWRYTGVuZ3RoRm9yT3JpZ2luID0geExlbmd0aDtcbiAgICAgICAgcGVybWl0dGVkWUxlbmd0aEZvck9yaWdpbiA9IHlMZW5ndGggLSBsZW5ndGggKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbiA9IHtcbiAgICAgIHg6IE1hdGguZmxvb3IocmFuZG9tRm4oKSAqIHBlcm1pdHRlZFhMZW5ndGhGb3JPcmlnaW4pLFxuICAgICAgeTogTWF0aC5mbG9vcihyYW5kb21GbigpICogcGVybWl0dGVkWUxlbmd0aEZvck9yaWdpbiksXG4gICAgfTtcbiAgICBjb25zdCBzaGlwID0gZ2VuZXJhdGVTaGlwQ29vcmRpbmF0ZXMob3JpZW50YXRpb24sIG9yaWdpbiwgbGVuZ3RoKTtcblxuICAgIGNvbnN0IGJvYXJkID0gZ2V0Q29ycmVzcG9uZGluZ0JvYXJkKHBsYXllck5hbWUpO1xuXG4gICAgaWYgKGJvYXJkLmFyZUNvb3JkaW5hdGVzVmFsaWRGb3JTaGlwKHNoaXApKSB7XG4gICAgICByZXR1cm4gc2hpcDtcbiAgICB9XG4gICAgLy8gdHJ5IGFnYWluIGF0IGdlbmVyYXRpbmcgYSBuZXcgc2hpcCBpZiB0aGUgZ2VuZXJhdGVkIGNvb3JkaW5hdGVzIGFyZSBub3QgdmFsaWRcbiAgICByZXR1cm4gZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMocmFuZG9tRm4sIHBsYXllck5hbWUsIGxlbmd0aCk7XG4gIH07XG5cbiAgY29uc3QgZ2VuZXJhdGVBbmRQbGFjZUNvbXB1dGVyU2hpcHMgPSBmdW5jdGlvbiBnZW5lcmF0ZUFuZFBsYWNlQ29tcHV0ZXJTaGlwcyhyYW5kb21Gbikge1xuICAgIGNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKGdlbmVyYXRlUmFuZG9tU2hpcENvb3JkaW5hdGVzKHJhbmRvbUZuLCAnY29tcHV0ZXInLCAyKSk7XG4gICAgY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMocmFuZG9tRm4sICdjb21wdXRlcicsIDMpKTtcbiAgICBjb21wdXRlckJvYXJkLnBsYWNlU2hpcChnZW5lcmF0ZVJhbmRvbVNoaXBDb29yZGluYXRlcyhyYW5kb21GbiwgJ2NvbXB1dGVyJywgMykpO1xuICAgIGNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKGdlbmVyYXRlUmFuZG9tU2hpcENvb3JkaW5hdGVzKHJhbmRvbUZuLCAnY29tcHV0ZXInLCA0KSk7XG4gICAgY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoZ2VuZXJhdGVSYW5kb21TaGlwQ29vcmRpbmF0ZXMocmFuZG9tRm4sICdjb21wdXRlcicsIDUpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHBsYWNlU2hpcCxcbiAgICBnZXRCb2FyZFN0YXRlLFxuICAgIHN0YXJ0LFxuICAgIG1ha2VVc2VyTW92ZSxcbiAgICBtYWtlQ29tcHV0ZXJNb3ZlLFxuICAgIHJlc2V0R2FtZSxcbiAgICBnZW5lcmF0ZVNoaXBDb29yZGluYXRlcyxcbiAgICBnZW5lcmF0ZVJhbmRvbVNoaXBDb29yZGluYXRlcyxcbiAgICBnZW5lcmF0ZUFuZFBsYWNlQ29tcHV0ZXJTaGlwcyxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUdhbWU7XG4iLCJpbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL2NyZWF0ZVNoaXAnO1xuXG5mdW5jdGlvbiBjcmVhdGVHYW1lYm9hcmQoeExlbmd0aCwgeUxlbmd0aCkge1xuICBpZiAoISh4TGVuZ3RoID4gMCkgfHwgISh5TGVuZ3RoID4gMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXJndW1lbnRzIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgfVxuXG4gIGNvbnN0IHNoaXBzRGV0YWlscyA9IFtdO1xuICBjb25zdCBoaXRDb29yZGluYXRlc0xpc3QgPSBbXTtcbiAgY29uc3QgbWlzc2VkQ29vcmRpbmF0ZXNMaXN0ID0gW107XG5cbiAgY29uc3QgZ2V0WExlbmd0aCA9IGZ1bmN0aW9uIGdldFhMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHhMZW5ndGg7XG4gIH07XG5cbiAgY29uc3QgZ2V0WUxlbmd0aCA9IGZ1bmN0aW9uIGdldFlMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHlMZW5ndGg7XG4gIH07XG5cbiAgY29uc3QgdmVyaWZ5Q29vcmRpbmF0ZXNBcmVWYWxpZCA9IGZ1bmN0aW9uIHZlcmlmeUNvb3JkaW5hdGVzQXJlVmFsaWQoY29vcmRpbmF0ZXMpIHtcbiAgICBpZiAoIShjb29yZGluYXRlcy54IDwgeExlbmd0aCAmJiBjb29yZGluYXRlcy55IDwgeUxlbmd0aCkpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdDb29yZGluYXRlcyBhcmUgaW52YWxpZCcpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBwbGFjZVNoaXAgPSBmdW5jdGlvbiBwbGFjZVNoaXAoY29vcmRpbmF0ZXNMaXN0KSB7XG4gICAgY29uc3QgbmV3U2hpcCA9IGNyZWF0ZVNoaXAoY29vcmRpbmF0ZXNMaXN0Lmxlbmd0aCk7XG4gICAgY29uc3QgY29vcmRpbmF0ZXNMaXN0Q29weSA9IFtdO1xuXG4gICAgY29vcmRpbmF0ZXNMaXN0LmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICB2ZXJpZnlDb29yZGluYXRlc0FyZVZhbGlkKGNvb3JkaW5hdGVzKTtcbiAgICAgIGNvb3JkaW5hdGVzTGlzdENvcHkucHVzaCh7IC4uLmNvb3JkaW5hdGVzIH0pO1xuICAgIH0pO1xuXG4gICAgc2hpcHNEZXRhaWxzLnB1c2goe1xuICAgICAgc2hpcDogbmV3U2hpcCxcbiAgICAgIGNvb3JkaW5hdGVzTGlzdDogY29vcmRpbmF0ZXNMaXN0Q29weSxcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCByZWNlaXZlQXR0YWNrID0gZnVuY3Rpb24gcmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcykge1xuICAgIHZlcmlmeUNvb3JkaW5hdGVzQXJlVmFsaWQoY29vcmRpbmF0ZXMpO1xuICAgIGhpdENvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChoaXRDb29yZGluYXRlcykgPT4ge1xuICAgICAgaWYgKGNvb3JkaW5hdGVzLnggPT09IGhpdENvb3JkaW5hdGVzLnggJiYgY29vcmRpbmF0ZXMueSA9PT0gaGl0Q29vcmRpbmF0ZXMueSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIHByZXZpb3VzbHkgYXR0YWNrZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG1pc3NlZENvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChtaXNzZWRDb29yZGluYXRlcykgPT4ge1xuICAgICAgaWYgKGNvb3JkaW5hdGVzLnggPT09IG1pc3NlZENvb3JkaW5hdGVzLnggJiYgY29vcmRpbmF0ZXMueSA9PT0gbWlzc2VkQ29vcmRpbmF0ZXMueSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIHByZXZpb3VzbHkgYXR0YWNrZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgaGl0ID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwc0RldGFpbHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHNoaXBDb29yZGluYXRlc0xpc3QgPSBzaGlwc0RldGFpbHNbaV0uY29vcmRpbmF0ZXNMaXN0O1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGlwQ29vcmRpbmF0ZXNMaXN0Lmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNoaXBDb29yZGluYXRlcyA9IHNoaXBDb29yZGluYXRlc0xpc3Rbal07XG4gICAgICAgIGNvbnN0IGRvQ29vcmRpbmF0ZXNNYXRjaCA9IChcbiAgICAgICAgICBzaGlwQ29vcmRpbmF0ZXMueCA9PT0gY29vcmRpbmF0ZXMueFxuICAgICAgICAgICYmIHNoaXBDb29yZGluYXRlcy55ID09PSBjb29yZGluYXRlcy55XG4gICAgICAgICk7XG4gICAgICAgIGlmIChkb0Nvb3JkaW5hdGVzTWF0Y2gpIHtcbiAgICAgICAgICBoaXRDb29yZGluYXRlc0xpc3QucHVzaCh7IC4uLmNvb3JkaW5hdGVzIH0pO1xuICAgICAgICAgIHNoaXBzRGV0YWlsc1tpXS5zaGlwLmhpdChqKTtcbiAgICAgICAgICBoaXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaGl0KSB7XG4gICAgICBtaXNzZWRDb29yZGluYXRlc0xpc3QucHVzaCh7IC4uLmNvb3JkaW5hdGVzIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRIaXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldEhpdENvb3JkaW5hdGVzKCkge1xuICAgIGNvbnN0IGhpdENvb3JkaW5hdGVzQ29weSA9IFtdO1xuICAgIGhpdENvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChoaXRDb29yZGluYXRlcykgPT4ge1xuICAgICAgaGl0Q29vcmRpbmF0ZXNDb3B5LnB1c2goeyAuLi5oaXRDb29yZGluYXRlcyB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBoaXRDb29yZGluYXRlc0NvcHk7XG4gIH07XG5cbiAgY29uc3QgZ2V0TWlzc2VkQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRNaXNzZWRDb29yZGluYXRlcygpIHtcbiAgICBjb25zdCBtaXNzZWRDb29yZGluYXRlc0NvcHkgPSBbXTtcbiAgICBtaXNzZWRDb29yZGluYXRlc0xpc3QuZm9yRWFjaCgobWlzc2VkQ29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIG1pc3NlZENvb3JkaW5hdGVzQ29weS5wdXNoKHsgLi4ubWlzc2VkQ29vcmRpbmF0ZXMgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWlzc2VkQ29vcmRpbmF0ZXNDb3B5O1xuICB9O1xuXG4gIGNvbnN0IGdldFBsYWNlZFNoaXBzID0gZnVuY3Rpb24gZ2V0UGxhY2VkU2hpcHMoKSB7XG4gICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzID0gW107XG4gICAgc2hpcHNEZXRhaWxzLmZvckVhY2goKHsgY29vcmRpbmF0ZXNMaXN0IH0pID0+IHtcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGVzTGlzdENvcHkgPSBbXTtcbiAgICAgIGNvb3JkaW5hdGVzTGlzdC5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgICBjb29yZGluYXRlc0xpc3RDb3B5LnB1c2goeyAuLi5jb29yZGluYXRlcyB9KTtcbiAgICAgIH0pO1xuICAgICAgc2hpcENvb3JkaW5hdGVzLnB1c2goY29vcmRpbmF0ZXNMaXN0Q29weSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNoaXBDb29yZGluYXRlcztcbiAgfTtcblxuICBjb25zdCBhcmVBbGxTaGlwc1N1bmsgPSBmdW5jdGlvbiBhcmVBbGxTaGlwc1N1bmsoKSB7XG4gICAgbGV0IGFsbFN1bmsgPSB0cnVlO1xuICAgIHNoaXBzRGV0YWlscy5mb3JFYWNoKChzaGlwRGV0YWlscykgPT4ge1xuICAgICAgaWYgKCFzaGlwRGV0YWlscy5zaGlwLmlzU3VuaygpKSB7XG4gICAgICAgIGFsbFN1bmsgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYWxsU3VuaztcbiAgfTtcblxuICBjb25zdCBhcmVDb29yZGluYXRlc1ZhbGlkRm9yU2hpcCA9IGZ1bmN0aW9uIGFyZUNvb3JkaW5hdGVzVmFsaWRGb3JTaGlwKHNoaXBDb29yZGluYXRlcykge1xuICAgIGxldCB2YWxpZCA9IHRydWU7XG4gICAgc2hpcENvb3JkaW5hdGVzLmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBzaGlwc0RldGFpbHMuZm9yRWFjaCgoeyBjb29yZGluYXRlc0xpc3QgfSkgPT4ge1xuICAgICAgICBjb29yZGluYXRlc0xpc3QuZm9yRWFjaCgoeyB4LCB5IH0pID0+IHtcbiAgICAgICAgICBpZiAoeCA9PT0gY29vcmRpbmF0ZXMueCAmJiB5ID09PSBjb29yZGluYXRlcy55KSB7XG4gICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRYTGVuZ3RoLFxuICAgIGdldFlMZW5ndGgsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBwbGFjZVNoaXAsXG4gICAgZ2V0SGl0Q29vcmRpbmF0ZXMsXG4gICAgZ2V0TWlzc2VkQ29vcmRpbmF0ZXMsXG4gICAgZ2V0UGxhY2VkU2hpcHMsXG4gICAgYXJlQWxsU2hpcHNTdW5rLFxuICAgIGFyZUNvb3JkaW5hdGVzVmFsaWRGb3JTaGlwLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVHYW1lYm9hcmQ7XG4iLCJjb25zdCBjcmVhdGVQbGF5ZXIgPSBmdW5jdGlvbiBjcmVhdGVQbGF5ZXIobmFtZSkge1xuICBjb25zdCBtYWtlTW92ZSA9IGZ1bmN0aW9uIG1ha2VNb3ZlKGdhbWVCb2FyZCwgY29vcmRpbmF0ZXMpIHtcbiAgICBnYW1lQm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gIH07XG5cbiAgY29uc3QgZ2V0TmFtZSA9IGZ1bmN0aW9uIGdldE5hbWUoKSB7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG5cbiAgY29uc3QgYXJlQ29vcmRpbmF0ZXNBbHJlYWR5QXR0YWNrZWQgPSBmdW5jdGlvbiBhcmVDb29yZGluYXRlc0FscmVhZHlBdHRhY2tlZChcbiAgICBnYW1lQm9hcmQsXG4gICAgY29vcmRpbmF0ZXMsXG4gICkge1xuICAgIGxldCBhbHJlYWR5QXR0YWNrZWQgPSBmYWxzZTtcbiAgICBjb25zdCBoaXRDb29yZGluYXRlcyA9IGdhbWVCb2FyZC5nZXRIaXRDb29yZGluYXRlcygpO1xuICAgIGhpdENvb3JkaW5hdGVzLmZvckVhY2goKHsgeCwgeSB9KSA9PiB7XG4gICAgICBpZiAoeCA9PT0gY29vcmRpbmF0ZXMueCAmJiB5ID09PSBjb29yZGluYXRlcy55KSB7XG4gICAgICAgIGFscmVhZHlBdHRhY2tlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgbWlzc2VkQ29vcmRpbmF0ZXMgPSBnYW1lQm9hcmQuZ2V0TWlzc2VkQ29vcmRpbmF0ZXMoKTtcbiAgICBtaXNzZWRDb29yZGluYXRlcy5mb3JFYWNoKCh7IHgsIHkgfSkgPT4ge1xuICAgICAgaWYgKHggPT09IGNvb3JkaW5hdGVzLnggJiYgeSA9PT0gY29vcmRpbmF0ZXMueSkge1xuICAgICAgICBhbHJlYWR5QXR0YWNrZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhbHJlYWR5QXR0YWNrZWQ7XG4gIH07XG5cbiAgY29uc3QgYXV0b01ha2VNb3ZlID0gZnVuY3Rpb24gYXV0b01ha2VNb3ZlKGdhbWVCb2FyZCwgcmFuZG9tRm4pIHtcbiAgICBsZXQgeFZhbHVlO1xuICAgIGxldCB5VmFsdWU7XG4gICAgZG8ge1xuICAgICAgeFZhbHVlID0gTWF0aC5mbG9vcihnYW1lQm9hcmQuZ2V0WExlbmd0aCgpICogcmFuZG9tRm4oKSk7XG4gICAgICB5VmFsdWUgPSBNYXRoLmZsb29yKGdhbWVCb2FyZC5nZXRZTGVuZ3RoKCkgKiByYW5kb21GbigpKTtcbiAgICB9IHdoaWxlIChhcmVDb29yZGluYXRlc0FscmVhZHlBdHRhY2tlZChnYW1lQm9hcmQsIHsgeDogeFZhbHVlLCB5OiB5VmFsdWUgfSkpO1xuXG4gICAgZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2soeyB4OiB4VmFsdWUsIHk6IHlWYWx1ZSB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIG1ha2VNb3ZlLFxuICAgIGdldE5hbWUsXG4gICAgYXV0b01ha2VNb3ZlLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGxheWVyO1xuIiwiZnVuY3Rpb24gY3JlYXRlU2hpcChsZW5ndGgpIHtcbiAgaWYgKCEobGVuZ3RoID4gMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignTGVuZ3RoIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgfVxuICBjb25zdCBwb3NpdGlvbnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHBvc2l0aW9ucy5wdXNoKGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IGhpdCA9IGZ1bmN0aW9uIGhpdChwb3NpdGlvbikge1xuICAgIGlmIChwb3NpdGlvbiA+PSBsZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgYXJndW1lbnQgbXVzdCBiZSBiZWxvdyB0aGUgU2hpcCBsZW5ndGgnKTtcbiAgICB9XG4gICAgcG9zaXRpb25zW3Bvc2l0aW9uXSA9IHRydWU7XG4gIH07XG5cbiAgY29uc3QgaXNTdW5rID0gZnVuY3Rpb24gaXNTdW5rKCkge1xuICAgIGxldCBpc0FsbEhpdCA9IHRydWU7XG4gICAgcG9zaXRpb25zLmZvckVhY2goKHBvc2l0aW9uKSA9PiB7XG4gICAgICBpZiAoIXBvc2l0aW9uKSB7XG4gICAgICAgIGlzQWxsSGl0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaXNBbGxIaXQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBoaXQsXG4gICAgaXNTdW5rLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwO1xuIiwiY29uc3QgZXZlbnRzTGlzdCA9IHt9O1xuXG5mdW5jdGlvbiBvbihldmVudE5hbWUsIGZuKSB7XG4gIGV2ZW50c0xpc3RbZXZlbnROYW1lXSA9IGV2ZW50c0xpc3RbZXZlbnROYW1lXSB8fCBbXTtcbiAgZXZlbnRzTGlzdFtldmVudE5hbWVdLnB1c2goZm4pO1xufVxuXG5mdW5jdGlvbiBvZmYoZXZlbnROYW1lLCBmbikge1xuICBpZiAoZXZlbnRzTGlzdFtldmVudE5hbWVdKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHNMaXN0W2V2ZW50TmFtZV0ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmIChldmVudHNMaXN0W2V2ZW50TmFtZV1baV0gPT09IGZuKSB7XG4gICAgICAgIGV2ZW50c0xpc3RbZXZlbnROYW1lXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBlbWl0KGV2ZW50TmFtZSwgZGF0YSkge1xuICBpZiAoZXZlbnRzTGlzdFtldmVudE5hbWVdKSB7XG4gICAgZXZlbnRzTGlzdFtldmVudE5hbWVdLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICBmbihkYXRhKTtcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBldmVudHMgPSB7XG4gIG9uLFxuICBvZmYsXG4gIGVtaXQsXG59O1xuXG5leHBvcnQgeyBldmVudHMgYXMgZGVmYXVsdCB9O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2luZGV4LmpzXCIpO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==